// test.mdl - Example showing modern MDL features
// Uses pack format 82+ with new directory structure
pack "multi_file_example" "A comprehensive MDL datapack example" 82;

namespace "test";

// Number variables for scoreboard storage
var num player_count = 0;
var num game_timer = 0;
var num player_score = 100;
var num health = 20;

function "main" {
    // Basic variable assignment
    player_count = 0;
    game_timer = 0;
    
    // If statement with variable substitution
    if "$player_score$ > 50" {
        say "Player is doing well!";
    } else {
        say "Player needs to improve!";
    }
    
    // While loop with counter
    while "$game_timer$ < 5" {
        game_timer = $game_timer$ + 1;
        say "Timer: $game_timer$";
    }
    
    // Conditional with variable substitution
    if "$player_count$ > 0" {
        say "Players online: $player_count$";
    }
}

function "helper" {
    var num result = 0;
    result = 5 + 3;
    say "Calculation result: $result$";
    
    // Variable substitution in tellraw
    tellraw @a [{"text":"Score: "},{"score":{"name":"@a","objective":"player_score"}}];
}

function "health_check" {
    if "$health$ < 10" {
        say "Health is low: $health$";
        health = $health$ + 5;
    } else {
        say "Health is good: $health$";
    }
}

// Hook to run main function on load
on_load "test:main";
