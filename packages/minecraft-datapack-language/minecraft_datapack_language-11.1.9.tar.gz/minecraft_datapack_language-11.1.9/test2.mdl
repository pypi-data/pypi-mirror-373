// test2.mdl - Simplified MDL Project (Minecraft 1.21+)
// Uses pack format 82+ with new directory structure (function/ instead of functions/)
pack "test2" "A simplified MDL datapack" 82;

namespace "test2";

// Number variables for scoreboard storage
var num player_count = 0;
var num game_timer = 0;
var num player_score = 0;

function "main" {
    // Basic variable assignment
    player_count = 0;
    game_timer = 0;
    player_score = 100;
    
    // If statement with variable substitution
    if "$player_score$ > 50" {
        say "Player is doing well!";
    } else {
        say "Player needs to improve!";
    }
    
    // While loop with counter
    while "$game_timer$ < 10" {
        game_timer = $game_timer$ + 1;
        say "Timer: $game_timer$";
    }
    
    // While loop example (for loops are no longer supported)
    while "$player_count$ < 5" {
        say "Player count: $player_count$";
        player_count = $player_count$ + 1;
    }
    
    // Conditional with variable substitution
    if "$player_count$ > 0" {
        say "Players online: $player_count$";
    }
}

function "helper" {
    var num result = 0;
    result = 5 + 3;
    say "Calculation result: $result$";
    
    // Variable substitution in tellraw
    tellraw @s [{"text":"Score: "},{"score":{"name":"@s","objective":"player_score"}}];
}

// Hook to run main function every tick
on_tick "test2:main";
