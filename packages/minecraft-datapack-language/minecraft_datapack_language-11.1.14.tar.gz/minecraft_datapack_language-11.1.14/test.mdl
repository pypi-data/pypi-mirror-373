// test.mdl - Simplified MDL Project (Minecraft 1.21+)
// Uses pack format 82+ with new directory structure (function/ instead of functions/)
pack "test" "A simplified MDL datapack" 82;

namespace "test";

// Number variables for scoreboard storage
var num player_count = 0;
var num game_timer = 0;
var num player_score = 0;

function "main" {
    // Basic variable assignment
    player_count = 0;
    game_timer = 0;
    player_score = 100;
    
    // While loop with counter
    while "$game_timer$ < 10" {
        game_timer = $game_timer$ + 1;
        say "Timer: $game_timer$";
    }
}

function "helper" {
    var num result = 0;
    result = 5 + 3;
    say "Calculation result: $result$";
    
    // Variable substitution in tellraw
    tellraw @a [{"text":"Score: "},{"score":{"name":"@a","objective":"player_score"}}];
}

// Hook to run main function every tick
on_load "test:main";

// Registry types - these reference JSON files relative to this MDL file
recipe "diamond_sword" "recipes/diamond_sword.json";
loot_table "diamond_sword" "loot_tables/diamond_sword.json";
advancement "diamond_sword" "advancements/diamond_sword.json";
predicate "diamond_sword" "predicates/diamond_sword.json";
item_modifier "diamond_sword" "item_modifiers/diamond_sword.json";
structure "diamond_sword" "structures/diamond_sword.json";
