// test_scope_feature.mdl - Demonstrating Variable Scoping with new <> syntax

pack "Test Scope Pack" "Testing variable scoping features" 15;

namespace "test_scope";

// Global variables (stored on mdl_server armor stand)
var num global_counter = 0;
var num global_timer = 0;

// Player-scoped variables (stored on each player)
var num player_score scope<@s> = 0;
var num player_level scope<@s> = 1;

// Team-scoped variables (stored on team members)
var num team_score scope<@a[team=red]> = 0;
var num team_bonus scope<@a[team=blue]> = 0;

// World-scoped variables (stored on a specific armor stand)
var num world_timer scope<@e[type=armor_stand,tag=world_timer,limit=1]> = 0;

function "enabletimer" {
    global_timer = 1;
    player_score = player_score + 10;
    team_score = team_score + 5;
    world_timer = world_timer + 1;
}

function "disabletimer" {
    global_timer = 0;
}

function "load" {
    global_counter = 0;
    global_timer = 0;
}

function "tick" {
    if "score global_timer matches 1" {
        global_counter = global_counter + 1;
        player_score = player_score + 1;
        team_score = team_score + 1;
        world_timer = world_timer + 1;
    }
}

on_load "test_scope:load";
on_tick "test_scope:tick";
