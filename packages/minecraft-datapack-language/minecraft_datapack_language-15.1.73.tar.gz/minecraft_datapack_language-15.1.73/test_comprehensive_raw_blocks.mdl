pack "comprehensive_raw_test" "Comprehensive raw block testing" 82;
namespace "raw_test";

// Test 1: Basic raw block functionality
function "test_basic_raw" {
    say "Starting basic raw block test";
    
    $!raw
    scoreboard players set @s player_timer_enabled 1
    execute as @a run function raw_test:increase_tick_per_player
    say "Raw commands bypass MDL syntax checking"
    raw!$
    
    say "Basic raw block test complete";
}

// Test 2: Single-line raw commands
function "test_single_line_raw" {
    say "Testing single-line raw commands";
    
    $!raw scoreboard players add @s player_tick_counter 1 raw!$
    $!raw effect give @s minecraft:speed 10 1 raw!$
    $!raw particle minecraft:explosion ~ ~ ~ 1 1 1 0 10 raw!$
    
    say "Single-line raw commands complete";
}

// Test 3: Mixed MDL and raw commands
function "test_mixed_commands" {
    say "This is MDL syntax";
    $!raw scoreboard players set @s player_timer_enabled 1 raw!$
    say "Back to MDL syntax";
    $!raw execute as @a run say "Raw command from mixed test" raw!$
    say "Mixed commands test complete";
}

// Test 4: Complex execute commands in raw blocks
function "test_complex_execute" {
    say "Testing complex execute commands";
    
    $!raw
    execute as @a[team=red] at @s run particle minecraft:firework ~ ~ ~ 0.5 0.5 0.5 0.1 100
    execute as @a[team=blue] at @s run particle minecraft:explosion ~ ~ ~ 1 1 1 0 10
    execute as @a[tag=admin] at @s run effect give @s minecraft:glowing 10 1 true
    raw!$
    
    say "Complex execute commands complete";
}

// Test 5: Scoreboard operations in raw blocks
function "test_scoreboard_operations" {
    say "Testing scoreboard operations";
    
    $!raw
    scoreboard objectives add player_score dummy "Player Score"
    scoreboard objectives add global_timer dummy "Global Timer"
    scoreboard players set @a player_score 0
    scoreboard players add @a player_score 10
    scoreboard players set @e[type=armor_stand,tag=mdl_server,limit=1] global_timer 0
    raw!$
    
    say "Scoreboard operations complete";
}

// Test 6: Effect and sound commands in raw blocks
function "test_effects_and_sounds" {
    say "Testing effects and sounds";
    
    $!raw
    effect give @a minecraft:speed 10 1
    effect give @a minecraft:glowing 5 1 true
    effect give @a minecraft:night_vision 20 1
    playsound minecraft:entity.player.levelup player @a ~ ~ ~ 1 1
    playsound minecraft:block.note_block.pling player @a ~ ~ ~ 0.5 1
    raw!$
    
    say "Effects and sounds complete";
}

// Test 7: Data commands in raw blocks
function "test_data_commands" {
    say "Testing data commands";
    
    $!raw
    data modify entity @e[type=armor_stand,limit=1] CustomName set value {"text":"Test Armor Stand","color":"gold"}
    data modify entity @s CustomName set value "Test Player"
    data get entity @s Health
    raw!$
    
    say "Data commands complete";
}

// Test 8: Special characters and complex syntax in raw blocks
function "test_special_characters" {
    say "Testing special characters";
    
    $!raw
    tellraw @a {"text":"Special chars: $@#%^&*()","color":"gold"}
    tellraw @a {"text":"Complex JSON: {\"nested\":{\"value\":42}}","color":"blue"}
    execute as @a run data modify entity @s CustomName set value "Complex Name with Spaces"
    raw!$
    
    say "Special characters test complete";
}

// Test 9: Multiple raw blocks in one function
function "test_multiple_raw_blocks" {
    say "Testing multiple raw blocks";
    
    $!raw scoreboard players set @s test_counter 0 raw!$
    say "First raw block complete";
    
    $!raw scoreboard players add @s test_counter 1 raw!$
    say "Second raw block complete";
    
    $!raw scoreboard players add @s test_counter 1 raw!$
    say "Third raw block complete";
    
    $!raw
    scoreboard players get @s test_counter
    raw!$
    
    say "Multiple raw blocks test complete";
}

// Test 10: Raw blocks with variable substitution context
function "test_raw_with_context" {
    var num testVar = 42;
    
    say "Testing raw blocks with context";
    say "MDL variable value: $testVar$";
    
    $!raw
    scoreboard players set @s mdl_test_var 42
    execute as @a run scoreboard players set @s mdl_test_var 42
    raw!$
    
    say "Raw with context test complete";
}

// Test 11: Raw blocks with complex Minecraft commands
function "test_complex_minecraft_commands" {
    say "Testing complex Minecraft commands";
    
    $!raw
    summon armor_stand ~ ~ ~ {Tags:["test_stand"],CustomName:'{"text":"Test Stand"}',Invisible:1b}
    tp @e[type=armor_stand,tag=test_stand] ~ ~5 ~
    kill @e[type=armor_stand,tag=test_stand]
    raw!$
    
    say "Complex Minecraft commands complete";
}

// Test 12: Raw blocks with conditional logic simulation
function "test_raw_conditional_logic" {
    say "Testing raw conditional logic";
    
    $!raw
    execute if score @s test_score matches 100.. run say "High score achieved!"
    execute unless score @s test_score matches 100.. run say "Keep trying!"
    execute if entity @a[team=red] run say "Red team is present"
    execute unless entity @a[team=blue] run say "No blue team players"
    raw!$
    
    say "Raw conditional logic complete";
}

// Test 13: Raw blocks with function calls
function "test_raw_function_calls" {
    say "Testing raw function calls";
    
    $!raw
    function raw_test:test_basic_raw
    execute as @a run function raw_test:test_single_line_raw
    raw!$
    
    say "Raw function calls complete";
}

// Test 14: Raw blocks with particle and visual effects
function "test_visual_effects" {
    say "Testing visual effects";
    
    $!raw
    particle minecraft:firework ~ ~ ~ 0.5 0.5 0.5 0.1 100
    particle minecraft:explosion ~ ~ ~ 1 1 1 0 10
    particle minecraft:end_rod ~ ~ ~ 0.2 0.2 0.2 0.05 50
    particle minecraft:portal ~ ~ ~ 0.3 0.3 0.3 0.1 20
    raw!$
    
    say "Visual effects complete";
}

// Test 15: Raw blocks with world manipulation
function "test_world_manipulation" {
    say "Testing world manipulation";
    
    $!raw
    setblock ~ ~-1 ~ minecraft:stone
    fill ~-5 ~-1 ~-5 ~5 ~-1 ~5 minecraft:air
    clone ~-10 ~ ~-10 ~10 ~ ~10 ~ ~ ~
    raw!$
    
    say "World manipulation complete";
}

// Main test function that runs all raw block tests
function "run_all_raw_tests" {
    say "Starting comprehensive raw block testing";
    
    function "raw_test:test_basic_raw";
    function "raw_test:test_single_line_raw";
    function "raw_test:test_mixed_commands";
    function "raw_test:test_complex_execute";
    function "raw_test:test_scoreboard_operations";
    function "raw_test:test_effects_and_sounds";
    function "raw_test:test_data_commands";
    function "raw_test:test_special_characters";
    function "raw_test:test_multiple_raw_blocks";
    function "raw_test:test_raw_with_context";
    function "raw_test:test_complex_minecraft_commands";
    function "raw_test:test_raw_conditional_logic";
    function "raw_test:test_raw_function_calls";
    function "raw_test:test_visual_effects";
    function "raw_test:test_world_manipulation";
    
    say "All raw block tests complete!";
}

// Hook to run tests on load
on_load "raw_test:run_all_raw_tests";
