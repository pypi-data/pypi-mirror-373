"use strict";(self.webpackChunkdaiquiri_ui=self.webpackChunkdaiquiri_ui||[]).push([[588],{73725:(n,t,e)=>{function s(n){return n&&"NONE"!==n?"IDLE"===n?["IDLE","secondary"]:"PREPARING"===n||"STARTING"===n?["RUNNING","warning"]:"STOPPING"===n||"DONE"===n?["FINISHED","success"]:"USER_ABORTED"===n?["ABORTED","secondary"]:"KILLED"===n?["ERROR","danger"]:"IDLE"===n?["IDLE","secondary"]:"RUNNING"===n?["RUNNING","warning"]:"FINISHED"===n?["FINISHED","success"]:"ABORTED"===n?["ABORTED","secondary"]:"ERROR"===n?["ERROR","danger"]:[n,"danger"]:["NONE","secondary"]}e.d(t,{s:()=>s})},65588:(n,t,e)=>{e.r(t),e.d(t,{default:()=>R});var s=e(52799),r=e(20837),i=e(21943),o=e(57056),c=e(96956),a=e(95713),u=e(34718),l=e.n(u),d=e(57209),f=e(91861),j=e(7894);var x=e(74773),h=e(73725),m=e(69521);const N=l()("daiquiri.components.tomo.TomoScanInfo");function g(n){return"tomo:dark"===n?["Dark","Acquire dark projection"]:"tomo:flat"===n?["Flat","Acquire flat projection"]:"tomo:return_ref"===n?["Return","Return to origin and acquiring few projection as reference"]:"tomo:step"===n?["Step scan","Tomo scan using rotation as step motor"]:"tomo:continuous"===n?["Continuous scan","Tomo scan using rotation as continuous motor"]:[n,"No description"]}function p(){const n=(0,x.u)();if(!n)return N("Skipped: lastgroup missing."),(0,m.jsx)(m.Fragment,{});const{subscans:t}=n;if(!t)return N("Skipped: subscans missing."),(0,m.jsx)(m.Fragment,{});const{activesubscan:e}=n;const s=t.reduce(((n,t)=>{const[e]=g(t);return n+e.length}),0);return(0,m.jsx)(i.Z,{children:(0,c.map)(t,((t,r)=>{const o=function(t){return n?t<e?"DONE":t===e?n.state:"IDLE":""}(r);return function(n,t,e){const[r,o]=(0,h.s)(t),[c,a]=g(e),u="RUNNING"===r;return(0,m.jsx)(i.Z,{animated:u,variant:o,label:`${l=c,l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()}`,title:a,now:c.length,max:s},n);var l}(r,o,t)}))})}function E(n){const[t,e]=(0,r.useState)(0);!function(n,t){const e=(0,j.x)(n);(0,r.useEffect)((()=>{if(!t&&0!==t)return;const n=setInterval((()=>e.current()),t);return()=>clearInterval(n)}),[t])}((()=>{e(Date.now())}),5e3);const s=(0,r.useMemo)((()=>{if(t<=0)return 0;const e=(0,f.SW)(n.starttime),s=(t-e.getTime())/1e3;return s<0?0:s}),[n.starttime,t]);return(0,m.jsxs)(m.Fragment,{children:[(0,f.$Q)(s)," ",(0,m.jsx)("i",{className:"fa-solid fa-spinner fa-spin-pulse"})]})}function I(n){const t=(0,x.u)(),e=(0,d.v9)((n=>{if(t)return n.metadata.ns_datacollections.default.results[t.datacollectionid]}));if(!t)return(0,m.jsx)(a.Z,{children:(0,m.jsx)(a.Z.Contents,{children:"No scan"})});const[s,r]=(0,h.s)(t.state);const{starttime:i,endtime:c,duration:u}=null!==e&&void 0!==e?e:{},l=function(n){const{subscans:t}=n;if(!t)return"";const{activesubscan:e}=n;if(e<0)return"Not yet started";if(e+1===t.length&&"STARTING"!==n.state)return"Done";const s=t[e],[,r]=g(s);return`${e+1}/${t.length}: ${r}`}(t);return(0,m.jsx)(a.Z,{children:(0,m.jsx)(a.Z.Contents,{children:(0,m.jsxs)("ul",{children:[t.datacollectionid&&(0,m.jsxs)("li",{children:[(0,m.jsx)("b",{children:"Data collection"}),": ",t.datacollectionid]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("b",{children:"Scan"}),": ",t.scanid]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("b",{children:"Start"}),":"," ",i?(0,f.SW)(i).toLocaleTimeString():""]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("b",{children:"Status"}),":"," ",(0,m.jsx)(o.Z,{bg:r,title:`BLISS state: ${t.state}`,children:s})]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("b",{children:"Progress"}),": ",(0,m.jsx)(p,{})]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("b",{children:"Description"}),": ",l]}),c&&(0,m.jsxs)("li",{children:[(0,m.jsx)("b",{children:"End"}),": ",(0,f.SW)(c).toLocaleTimeString()]}),i&&(0,m.jsxs)("li",{children:[(0,m.jsx)("b",{children:"Duration"}),":"," ",u?(0,f.$Q)(u):(0,m.jsx)(E,{starttime:i})]})]})})})}function R(n){const{providers:t,yamlNode:e,...r}=n;return s.ol(e,r),(0,m.jsx)(I,{})}}}]);
//# sourceMappingURL=588.253ef985.chunk.js.map