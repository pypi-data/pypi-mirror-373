"use strict";(self.webpackChunkdaiquiri_ui=self.webpackChunkdaiquiri_ui||[]).push([[370],{1370:(e,r,s)=>{s.r(r),s.d(r,{default:()=>C});var n=s(52799),o=s(57209),t=s(85083),i=s(45425),u=s(31801),a=s(78530),l=s(20837),c=s(23414),d=s(96956),p=s(40714),v=s(7253),f=s(15560),h=s.n(f),g=s(85443),x=s(75849),j=s(18578),m=s(69521);function y(e){function r(){var r;null!==(r=e.actions)&&void 0!==r&&r.onClose&&e.actions.onClose()}return(0,m.jsx)(g.Z,{show:e.show,target:e.target,children:s=>{const{style:n,show:o,...t}=s,i=n.transform&&/translate3d\((\d+)px, (\d+)px/.exec(n.transform),u=i?{x:Number.parseInt(i[1]),y:Number.parseInt(i[2])}:{};return(0,m.jsx)("div",{children:(0,m.jsx)(h(),{handle:".popover-header",children:(0,m.jsxs)(x.Z,{id:`popover-${e.popoverid}`,className:"draggable-popup",...t,style:{top:u.y,left:u.x},children:[(0,m.jsxs)(x.Z.Header,{as:"h3",children:[e.title,(0,m.jsxs)(j.Z,{onClick:r,className:"close",children:[(0,m.jsx)("span",{"aria-hidden":"true",children:"\xd7"}),(0,m.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,m.jsx)(x.Z.Body,{children:e.children})]})})})}})}var w=s(25743),$=s(77048);const Z=(0,i.Qg)({hardware:a.Z})((0,o.$j)((function(e,r){const{providers:s}=r;return{synoptic:u.Z.selector("config",e,"synoptic"),hardwareGroups:s.hardware.groups.selector("results",e)}}),(function(e,r){return{actions:{fetchHardwareGroups:()=>r.providers.hardware.groups.fetch({first:!0}),fetchSVG:e=>t.Z.get(`/synoptic/${e}`)}}}))((function(e){const r=(0,l.useRef)({}),s=(0,l.useRef)({}),[n,o]=(0,l.useState)(void 0),{sid:t=0,synoptic:i,hardwareGroups:u}=e,a=(0,$.l)((e=>e.hardware));function f(){return t<i.synoptics.length&&t>-1}if((0,l.useEffect)((()=>{var r;f()&&e.actions.fetchSVG(null!==(r=e.sid)&&void 0!==r?r:0).then((e=>{o(e.data)}))}),[i.synoptics,e.sid]),(0,l.useEffect)((()=>{e.actions.fetchHardwareGroups()}),[]),!f())return(0,m.jsxs)(p.Z,{variant:"warning",children:['Could not find synoptic "',t,'"']});const h=i.synoptics[t],g=(0,d.map)(h.elements,(e=>{var n;const o=e.group?u[e.group]:null;let t=null;if(e.value){const r=e.value.split("."),s=a[r[0]];s&&(t=`${s.properties[r[1]]} ${s.properties.unit||""}`)}const i=e.name.toLowerCase(),d=(0,l.createRef)();return s.current[null!==(n=e.group)&&void 0!==n?n:"undefined"]=d,[(0,m.jsx)(c.SvgProxy,{selector:`.${i} .status`,class:`$ORIGINAL ${o&&(o.state?"ok":"error")}`},`${e.group}state`),(0,m.jsx)(c.SvgProxy,{selector:`.${i} .value`,children:t},`${e.group}value`),(0,m.jsx)(c.SvgProxy,{selector:`.${i} > rect`,onClick:()=>{var s;return function(e,s){var n;s in r&&(null===(n=r[s].current)||void 0===n||n.showModal())}(0,null!==(s=e.group)&&void 0!==s?s:"undefined")},ref:d},`${e.group}handler`),(0,m.jsx)(c.SvgProxy,{class:"$ORIGINAL "+(o?"active":""),selector:`.${i}`},`${e.group}comp`)]})),x=(0,d.filter)(h.elements,(e=>void 0!==e.group)),j=(0,d.map)(x,(e=>{var n,o;if(!e.group)return(0,m.jsx)(m.Fragment,{});const t=(0,l.createRef)();return r.current[e.group]=t,(0,m.jsx)(w.Z,{id:`${e.group}pop`,ref:t,target:function(){var r,n,o,t,i,u;if(null!==(r=s.current[null!==(n=e.group)&&void 0!==n?n:"undefined"])&&void 0!==r&&r.current)return null===(o=s.curren[null!==(u=e.group)&&void 0!==u?u:"undefined"])||void 0===o||null===(t=o.current)||void 0===t||null===(i=t.elemRefs)||void 0===i?void 0:i[0]},showButton:!1,modalClass:y,popoverid:e.group,title:null!==(n=null===(o=u[e.group])||void 0===o?void 0:o.name)&&void 0!==n?n:"",button:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("i",{className:"fa fa-plus"}),"show"]}),children:(0,m.jsx)(v.Z,{even:!0,objects:u[e.group]&&(0,d.map)(u[e.group].objects,(e=>({id:e})))})},`${e.group}pop`)}));return(0,m.jsxs)("div",{children:[(0,m.jsx)(c.SvgLoader,{width:"100%",svgXML:n,className:"synoptic",children:g}),j]})})));function C(e){const{providers:r,yamlNode:s,...o}=e;return n.ol(s,o),(0,m.jsx)(Z,{providers:r})}}}]);
//# sourceMappingURL=370.28dd9727.chunk.js.map