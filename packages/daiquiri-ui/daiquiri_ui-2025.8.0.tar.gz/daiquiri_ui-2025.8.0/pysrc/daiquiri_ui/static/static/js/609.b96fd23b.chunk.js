"use strict";(self.webpackChunkdaiquiri_ui=self.webpackChunkdaiquiri_ui||[]).push([[609],{68609:(e,i,t)=>{t.r(i),t.d(i,{default:()=>w});var s=t(52799),l=t(57209),n=t(45425),o=t(71145),r=t(20837),a=t(96956),c=t(10086),d=(t(31427),t(48687),t(32542),t(99483),t(86913),t(53885),t(639),t(18578)),u=t(40714),h=t(6145),f=t(32414),m=t(83401),p=t(2133),v=t(69521);function x(e){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"title-wrap",children:e.title}),e.dirty&&"*",e.dirty&&(0,v.jsx)(p.Z,{title:"File Modified",message:"This file has been modified, are you sure you want to close without saving?",children:i=>(0,v.jsx)(d.Z,{size:"sm",className:"ms-1",onClick:i(e.close),children:(0,v.jsx)("i",{className:"fa fa-times"})})}),!e.dirty&&(0,v.jsx)(d.Z,{size:"sm",className:"ms-1",onClick:e.close,children:(0,v.jsx)("i",{className:"fa fa-times"})})]})}function j(e){const{name:i,setDirty:t,file:s}=e,[l,n]=(0,r.useState)(s.contents),[o,a]=(0,r.useState)({width:"",height:""}),d=(0,r.useRef)(l),u=(0,r.useCallback)((e=>{d.current=e,t(e!==s.contents),n(e)}),[t,s]),h=(0,r.useCallback)((()=>{e.save({path:s.path,contents:d.current}).then((()=>{t(!1)}))}),[d,s]);return(0,v.jsx)(c.ZP,{ref:e=>(e=>{var i,t;const s=null===e||void 0===e||null===(i=e.refEditor)||void 0===i||null===(t=i.parentNode)||void 0===t?void 0:t.parentNode;if(s&&!o.width){const e=s;if(!e.clientWidth||!e.clientHeight)return void console.error("No client size defined");a({width:`${e.clientWidth}px`,height:`${e.clientHeight}px`})}})(e),width:o.width,height:o.height,mode:{yml:"yaml",py:"python"}[s.ext],theme:"monokai",value:l,onChange:u,name:i,editorProps:{$blockScrolling:!0},enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,commands:[{name:"save",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:h}]})}function g(e){const{files:i,selectedFile:t="",actions:s}=e,[l,n]=(0,r.useState)({});return(0,r.useEffect)((()=>{if(!(t in i)){const t=(0,a.values)(i);(0,a.values)(t).length>0&&setTimeout((()=>{e.actions.selectFile(t[t.length-1].path)}),200)}}),[i,t,s]),(0,v.jsxs)(m.Z,{className:"editor",children:[e.error&&(0,v.jsxs)(u.Z,{variant:"danger",children:[(0,v.jsx)("i",{className:"fa fa-warning"})," Could not open file",(0,v.jsx)("div",{className:"description",children:e.error})]}),0===(0,a.values)(e.files).length&&(0,v.jsx)("p",{children:"Select a file from the tree to edit it"}),(0,a.values)(e.files).length>0&&(0,v.jsx)(h.Z,{activeKey:e.selectedFile,onSelect:i=>e.actions.selectFile(i),transition:!1,children:(0,a.map)(e.files,((i,t)=>(0,v.jsx)(f.Z,{title:(0,v.jsx)(x,{title:t,close:()=>e.actions.closeFile(t),dirty:l[t]}),eventKey:t,children:(0,v.jsx)(j,{name:t,file:i,save:e.actions.updateFile,setDirty:e=>n({...l,[t]:e})})},t.replace("/",""))))})]})}g.defaultProps={selectedFile:void 0,error:void 0};const y=g;const F=(0,n.Qg)({editor:o.Z})((0,l.$j)((function(e,i){const{providers:t}=i;return{selectedFile:o.Z.selector("selectedFile",e),files:t.editor.files.selector("results",e),error:t.editor.files.selector("error",e)}}),(function(e,i){return{actions:{selectFile:e=>o.Z.dispatch("SELECT_FILE",e),updateFile:e=>i.providers.editor.files.update(e),closeFile:e=>i.providers.editor.files.deleteLocal(e)}}}))(y));function w(e){const{providers:i,yamlNode:t,...l}=e;return s.ol(t,l),(0,v.jsx)(F,{providers:i})}}}]);
//# sourceMappingURL=609.b96fd23b.chunk.js.map