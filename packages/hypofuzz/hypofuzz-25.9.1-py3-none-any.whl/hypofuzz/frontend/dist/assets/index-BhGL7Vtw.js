var ls=Object.defineProperty;var as=(t,e,s)=>e in t?ls(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var ne=(t,e,s)=>as(t,typeof e!="symbol"?e+"":e,s);import{r as cs,g as At,a as us,b as M,u as ct,c as fs,R as Tt,L as _e,O as ms,d as Lt,e as ds,f as me,B as hs,h as _s}from"./react-x3E9hWHm.js";import{F as W,f as Pt,S as ee,r as ps,a as gs,b as xs,c as ys,d as bs,e as vs,L as pe,g as js,h as Ss,i as ws,j as Ns,k as it,l as ks,m as $s,n as Rs,o as Cs,p as It,q as Es,s as Ms,t as As,u as gt,v as xt,w as $e,x as Re,y as Ce,z as Ee,A as Dt,B as Ft,C as Ot,D as Ts,O as Ls}from"./vendor-beLQCLEk.js";import{d as Xt,a as Ps,b as Is,c as Ds,o as Bt,l as De,e as Fs,s as yt,i as He,f as Os,g as Xs,h as Bs,j as Vs,q as Us}from"./d3-DfGPKUIz.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();var Ge={exports:{}},ve={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bt;function Ys(){if(bt)return ve;bt=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(i,n,o){var a=null;if(o!==void 0&&(a=""+o),n.key!==void 0&&(a=""+n.key),"key"in n){o={};for(var l in n)l!=="key"&&(o[l]=n[l])}else o=n;return n=o.ref,{$$typeof:t,type:i,key:a,ref:n!==void 0?n:null,props:o}}return ve.Fragment=e,ve.jsx=s,ve.jsxs=s,ve}var vt;function Ws(){return vt||(vt=1,Ge.exports=Ys()),Ge.exports}var r=Ws();Array.prototype.sortKey||(Array.prototype.sortKey=function(t){return this.sort((e,s)=>{const i=t(e),n=t(s);if(Array.isArray(i)&&Array.isArray(n)){for(let o=0;o<Math.min(i.length,n.length);o++){if(i[o]<n[o])return-1;if(i[o]>n[o])return 1}return 0}return i<n?-1:i>n?1:0})});var zs=cs();const Ks=At(zs);var qe={exports:{}},Je={};/**
 * @license React
 * react-compiler-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jt;function Hs(){if(jt)return Je;jt=1;var t=us().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Je.c=function(e){return t.H.useMemoCache(e)},Je}var St;function Gs(){return St||(St=1,qe.exports=Hs()),qe.exports}var U=Gs();function qs(t){const e=U.c(10),{current:s,total:i,message:n}=t,o=i>0?Math.floor(s/i*100):0;let a;e[0]!==n?(a=r.jsx("div",{className:"progress-notification__text",children:n}),e[0]=n,e[1]=a):a=e[1];const l=`${o}%`;let c;e[2]!==l?(c=r.jsx("div",{className:"progress-notification__bar",children:r.jsx("div",{className:"progress-notification__fill",style:{width:l}})}),e[2]=l,e[3]=c):c=e[3];let u;e[4]!==o?(u=r.jsxs("div",{className:"progress-notification__percentage",children:[o,"%"]}),e[4]=o,e[5]=u):u=e[5];let m;return e[6]!==a||e[7]!==c||e[8]!==u?(m=r.jsxs("div",{className:"progress-notification",children:[a,c,u]}),e[6]=a,e[7]=c,e[8]=u,e[9]=m):m=e[9],m}function Js(t){const e=U.c(15),{message:s,onDismiss:i,isVisible:n}=t,[o,a]=M.useState(n);let l,c;if(e[0]!==n?(l=()=>{if(n){a(!0);return}else{const y=setTimeout(()=>{a(!1)},300);return()=>clearTimeout(y)}},c=[n],e[0]=n,e[1]=l,e[2]=c):(l=e[1],c=e[2]),M.useEffect(l,c),!o)return null;const u=`notification ${n?"notification--visible":"notification--hidden"}`;let m;e[3]!==s?(m=r.jsx("div",{className:"notification__content",children:s}),e[3]=s,e[4]=m):m=e[4];let f;e[5]!==i?(f=y=>{y.stopPropagation(),i()},e[5]=i,e[6]=f):f=e[6];let d;e[7]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(W,{icon:Pt}),e[7]=d):d=e[7];let _;e[8]!==f?(_=r.jsx("button",{className:"notification__close",onClick:f,"aria-label":"Close notification",children:d}),e[8]=f,e[9]=_):_=e[9];let x;return e[10]!==i||e[11]!==u||e[12]!==m||e[13]!==_?(x=r.jsxs("div",{className:u,onClick:i,children:[m,_]}),e[10]=i,e[11]=u,e[12]=m,e[13]=_,e[14]=x):x=e[14],x}const Vt=M.createContext(null);function Zs(t){const e=U.c(14),{children:s}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],e[0]=i):i=e[0];const[n,o]=M.useState(i);let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=new Map,e[1]=a):a=e[1];const l=M.useRef(a),c=M.useRef(0);let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=g=>{clearTimeout(l.current.get(g)),l.current.delete(g),o(v=>v.filter(w=>w.id!==g))},e[2]=u):u=e[2];const m=u;let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=(g,v)=>{const w=c.current=c.current+1,k={id:w,message:g,duration:v};if(o(j=>[...j,k]),v!==null){const j=setTimeout(()=>{m(w)},v);l.current.set(w,j)}return w},e[3]=f):f=e[3];const d=f;let _;e[4]===Symbol.for("react.memo_cache_sentinel")?(_=(g,v,w)=>{if(o(k=>k.map(j=>j.id===g?{...j,message:v,duration:w}:j)),w!==null){clearTimeout(l.current.get(g));const k=setTimeout(()=>{m(g)},w);l.current.set(g,k)}},e[4]=_):_=e[4];const x=_;let y;e[5]===Symbol.for("react.memo_cache_sentinel")?(y={addNotification:d,updateNotification:x,dismissNotification:m},e[5]=y):y=e[5];let b;if(e[6]!==n){let g;e[8]===Symbol.for("react.memo_cache_sentinel")?(g=(v,w)=>r.jsx("div",{className:"notification-wrapper",style:{top:`${20+w*80}px`},children:r.jsx(Js,{message:v.message,isVisible:!0,onDismiss:()=>m(v.id)})},v.id),e[8]=g):g=e[8],b=n.map(g),e[6]=n,e[7]=b}else b=e[7];let h;e[9]!==b?(h=r.jsx("div",{className:"notifications",children:b}),e[9]=b,e[10]=h):h=e[10];let p;return e[11]!==s||e[12]!==h?(p=r.jsxs(Vt.Provider,{value:y,children:[s,h]}),e[11]=s,e[12]=h,e[13]=p):p=e[13],p}function Qs(){const t=M.useContext(Vt);if(!t)throw new Error("useNotification must be used within a NotificationProvider");return t}function ut(){const t=U.c(2),[e,s]=M.useState(!1);let i,n;return t[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{const o=function(){s(window.matchMedia("(max-width: 768px)").matches)};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},n=[],t[0]=i,t[1]=n):(i=t[0],n=t[1]),M.useEffect(i,n),e}function ye(t){const e=U.c(9),{value:s,onChange:i,options:n,disabled:o}=t,a=o===void 0?!1:o,l=ut();console.assert(ee(n.map(en)).size===n.length);const c=`toggle ${a?"toggle--disabled":""}`;let u;e[0]!==a||e[1]!==l||e[2]!==i||e[3]!==n||e[4]!==s?(u=n.map(f=>r.jsx("button",{className:`toggle__button${s===f.value?" toggle__button--active":""} ${a?"toggle__button--disabled":""}`,onClick:()=>{if(!a)if(n.length==2&&s===f.value){const d=n.find(_=>_.value!==f.value).value;i(d)}else i(f.value)},children:l?f.mobileContent??f.content:f.content},String(f.value))),e[0]=a,e[1]=l,e[2]=i,e[3]=n,e[4]=s,e[5]=u):u=e[5];let m;return e[6]!==c||e[7]!==u?(m=r.jsx("div",{className:c,children:u}),e[6]=c,e[7]=u,e[8]=m):m=e[8],m}function en(t){return t.value}class Ut{constructor(e,s,i,n,o){ne(this,"createdAt");this.name=e,this.valueName=s,this.predicate=i,this.key=n,this.extraData=o,this.createdAt=Date.now()}}const Yt=M.createContext(void 0);function tn(t){const e=U.c(18),{children:s}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=["covering",new Map],e[0]=i):i=e[0];let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=new Map([i,["rolling",new Map]]),e[1]=n):n=e[1];const[o,a]=M.useState(n),[l,c]=M.useState("covering");let u;e[2]!==o||e[3]!==l?(u=o.get(l)||new Map,e[2]=o,e[3]=l,e[4]=u):u=e[4];const m=u;let f;e[5]!==l?(f=p=>{a(g=>{const v=new Map(g);return v.set(l,p),v})},e[5]=l,e[6]=f):f=e[6];const d=f;let _;e[7]!==m||e[8]!==d?(_=p=>{const g=new Map(m),w=(g.get(p)||[]).filter(k=>k.key!==p);w.length===0?g.delete(p):g.set(p,w),d(g)},e[7]=m,e[8]=d,e[9]=_):_=e[9];const x=_;let y;e[10]!==m||e[11]!==l||e[12]!==x||e[13]!==d?(y={filters:m,setFilters:d,removeFilter:x,observationCategory:l,setObservationCategory:c},e[10]=m,e[11]=l,e[12]=x,e[13]=d,e[14]=y):y=e[14];const b=y;let h;return e[15]!==s||e[16]!==b?(h=r.jsx(Yt.Provider,{value:b,children:s}),e[15]=s,e[16]=b,e[17]=h):h=e[17],h}function Ve(){const t=M.useContext(Yt);if(t===void 0)throw new Error("useFilters must be used within a FilterProvider");return t}const Wt=M.createContext(null),Ze=10,sn=25,re=10;function nn(t){const e=U.c(14),{state:s}=t,i=M.useRef(null);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={left:-9999,top:-9999},e[0]=n):n=e[0];const[o,a]=M.useState(n);let l,c;if(e[1]!==s.visible||e[2]!==s.x||e[3]!==s.y?(l=()=>{if(!s.visible||!i.current)return;const x=i.current.getBoundingClientRect(),y=x.width,b=x.height;let h=s.x+Ze,p=s.y-sn;h+y>window.innerWidth-re&&(h=s.x-y-Ze,h<re&&(h=re)),h<re&&(h=re),p<re&&(p=re),p+b>window.innerHeight-re&&(p=s.y-b-Ze,p<re&&(p=re)),a({left:h,top:p})},c=[s.x,s.y,s.visible],e[1]=s.visible,e[2]=s.x,e[3]=s.y,e[4]=l,e[5]=c):(l=e[4],c=e[5]),M.useEffect(l,c),!s.visible)return null;const u=`${o.left}px`,m=`${o.top}px`;let f;e[6]!==u||e[7]!==m?(f={position:"fixed",left:u,top:m,display:"block",pointerEvents:"none",zIndex:9999},e[6]=u,e[7]=m,e[8]=f):f=e[8];let d;e[9]!==s.content?(d=typeof s.content=="string"?r.jsx("div",{dangerouslySetInnerHTML:{__html:s.content}}):s.content,e[9]=s.content,e[10]=d):d=e[10];let _;return e[11]!==f||e[12]!==d?(_=fs.createPortal(r.jsx("div",{ref:i,className:"cursor-tooltip",style:f,children:d}),document.body),e[11]=f,e[12]=d,e[13]=_):_=e[13],_}function rn(t){const e=U.c(15),{children:s}=t,i=ct();let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={visible:!1,content:"",x:0,y:0,owner:null},e[0]=n):n=e[0];const[o,a]=M.useState(n);let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{a(on)},e[1]=l):l=e[1];let c;e[2]!==i.pathname?(c=[i.pathname],e[2]=i.pathname,e[3]=c):c=e[3],M.useEffect(l,c);let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=(g,v,w,k)=>{a({visible:!0,content:g,x:v,y:w,owner:k})},e[4]=u):u=e[4];const m=u;let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=g=>{a(v=>v.owner===g?{...v,visible:!1,owner:null}:v)},e[5]=f):f=e[5];const d=f;let _;e[6]===Symbol.for("react.memo_cache_sentinel")?(_=(g,v,w)=>{a(k=>k.visible&&k.owner===w&&(k.x!==g||k.y!==v)?{...k,x:g,y:v}:k)},e[6]=_):_=e[6];const x=_;let y;e[7]!==o.visible?(y={showTooltip:m,hideTooltip:d,moveTooltip:x,visible:o.visible},e[7]=o.visible,e[8]=y):y=e[8];const b=y;let h;e[9]!==o?(h=r.jsx(nn,{state:o}),e[9]=o,e[10]=h):h=e[10];let p;return e[11]!==s||e[12]!==b||e[13]!==h?(p=r.jsxs(Wt.Provider,{value:b,children:[s,h]}),e[11]=s,e[12]=b,e[13]=h,e[14]=p):p=e[14],p}function on(t){return{...t,visible:!1,owner:null}}function Ue(){const t=M.useContext(Wt);if(!t)throw new Error("useTooltip must be used within a TooltipProvider");return t}var ln=ps();const Ae=At(ln);function zt(t,e=0){return Array.from(t).reduce((s,i)=>s+i,e)}function Kt(t,e=!1){t.current&&(e&&t.current.querySelectorAll("code").forEach(s=>{s.removeAttribute("data-highlighted")}),t.current.querySelectorAll("code:not([data-highlighted='yes'])").forEach(s=>{Ae.highlightElement(s)}))}function Me(t,e){if(e){let s=null,i=null;for(let n=0;n<t.length;n++){const o=t[n],a=e(o);a!=null&&(i===null||a>i)&&(i=a,s=o)}return s}else{let s=null;for(let i=0;i<t.length;i++){const n=t[i];n!=null&&(s===null||n>s)&&(s=n)}return s}}function an(t,e){{let s=null;for(let i=0;i<t.length;i++){const n=t[i];n!=null&&(s===null||n<s)&&(s=n)}return s}}function Qe(t,e,s){let i=0,n=t.length;for(;i<n;){const o=i+n>>>1;(s?s(t[o])<=e:t[o]<=e)?i=o+1:n=o}return i}let je=null;function cn(){return je||(je=document.createElement("div"),je.style.cssText=`
      position: absolute;
      visibility: hidden;
      white-space: nowrap;
      top: -9999px;
      left: -9999px;
      pointer-events: none;
      z-index: -1;
    `,document.body.appendChild(je)),je}function et(t,e=""){const s=cn();s.className=e,s.textContent=t;const i=s.getBoundingClientRect();return{width:i.width,height:i.height}}function Ht(t,e,s){if(t.metaKey||t.ctrlKey){const n=`${window.location.origin}${e}`;window.open(n,"_blank")}else s(e)}function ft(t){return t.split("::").pop()||t}function Gt(t,e="/"){if(!t||t.length<2)return"";const s=t.map(l=>l.split(e)),i=Math.min(...s.map(l=>l.length)),n=[];for(let l=0;l<i;l++){const c=s[0][l];if(!s.every(m=>m[l]===c))break;n.push(c)}if(n.length===0)return"";const o=n.join(e),a=o?o+e:"";return a&&t.every(l=>l.startsWith(a))?a:""}const ae={select:Xt,scaleLinear:De,scaleOrdinal:Bt,scaleBand:Ds,axisBottom:Is,axisLeft:Ps};class qt{constructor(e,s){this.key=e,this.name=s}getValue(e){return e.features.get(this.name)}}class un extends qt{constructor(){super(...arguments);ne(this,"isSystem",!1)}}class fn extends qt{constructor(s,i,n){super(s,i);ne(this,"isSystem",!0);this.key=s,this.name=i,this.value=n}getValue(s){return this.value(s)}}const wt=5,oe=2.5;function mn(t){const e=U.c(44),{feature:s,observations:i}=t,n=M.useRef(null),o=M.useRef(null),{filters:a,setFilters:l}=Ve(),{showTooltip:c,hideTooltip:u,moveTooltip:m}=Ue();let f;e[0]!==s.key||e[1]!==a?(f=function(){const R=a.get(s.key)||[];if(R.length===0)return ee();console.assert(R.length===1);const T=R[0];return ee(T.extraData.selectedValues)},e[0]=s.key,e[1]=a,e[2]=f):f=e[2];const d=f;let _;e[3]!==d?(_=d(),e[3]=d,e[4]=_):_=e[4];const x=_;let y;e[5]!==i.raw?(y=i.raw.filter(yn),e[5]=i.raw,e[6]=y):y=e[6];let b;e[7]!==i.filtered?(b=i.filtered.filter(xn),e[7]=i.filtered,e[8]=b):b=e[8];let h;e[9]!==y||e[10]!==b?(h={raw:y,filtered:b},e[9]=y,e[10]=b,e[11]=h):h=e[11];const p=h;let g;e[12]!==s||e[13]!==a||e[14]!==x||e[15]!==l?(g=C=>{let R=ee();x.equals(ee([C]))?R=ee():R=ee([C]);let T;R.size===1?T=R.first():T=R.map(gn).join(" or ");const L=[];R.size>0&&L.push(new Ut(s.name,T,$=>R.some(F=>F===s.getValue($)),`nominal-${s.key}`,{selectedValues:R}));const N=new Map(a);N.set(s.key,L),l(N)},e[12]=s,e[13]=a,e[14]=x,e[15]=l,e[16]=g):g=e[16];const v=g;let w;e[17]!==s||e[18]!==p.filtered||e[19]!==p.raw||e[20]!==u||e[21]!==m||e[22]!==v||e[23]!==x||e[24]!==c?(w=()=>{if(p.filtered.length==0)return;const C=ee(p.raw.map(O=>s.getValue(O)));let R=new Map;for(const O of p.filtered){const P=s.getValue(O);R.set(P,(R.get(P)||0)+1)}const T=zt(Array.from(R.values()));R=new Map([...R.entries()].sortKey(pn)),ae.select(o.current).selectAll("*").remove();const L=n.current.clientWidth,N=C.size<wt?85:170,$=ae.select(o.current).attr("width",L).attr("height",N).append("g"),F=function(O,P){const[X,I]=P;c(`${s.name}<br>${X}: ${I}`,O.clientX,O.clientY,"tyche-nominal")};if(C.size<wt){const O={top:0,right:15,bottom:20,left:10},P=L-O.left-O.right,X=N-O.top-O.bottom,I=ae.scaleLinear().domain([0,1]).range([0,P]);let Y;R.has(Ye)||R.has(We)?Y=_n:Y=ae.scaleOrdinal().domain(C).range([ie.PRIMARY,ie.ACCENT,ie.ACCENT2,ie.ACCENT3,ie.ACCENT4]);const z=$.append("g").attr("transform",`translate(${O.left},${O.top})`);let V=0;const B=X-O.bottom;R.forEach((H,q)=>{const Z=H/T*P,K=x.has(q);z.append("rect").attr("x",V).attr("y",0).attr("width",Z).attr("height",B).attr("fill",Y(q)).style("cursor","pointer").on("click",()=>v(q)).on("mouseover",G=>{F(G,[q,H])}).on("mousemove",G=>m(G.clientX,G.clientY,"tyche-nominal")).on("mouseleave",()=>u("tyche-nominal")),K&&z.append("rect").attr("x",V+oe).attr("y",oe).attr("width",Z-2*oe).attr("height",B-2*oe).attr("fill",Y(q)).attr("stroke","white").attr("stroke-width",oe).style("pointer-events","none"),z.append("text").attr("x",V+Z/2).attr("y",B/2).attr("text-anchor","middle").attr("dominant-baseline","central").attr("fill","white").text(q).style("font-size","14px").style("font-weight","bold"),V=V+Z}),z.append("g").attr("transform",`translate(0,${B})`).call(ae.axisBottom(I).tickFormat(hn)),z.append("text").attr("x",P/2).attr("y",B+35).attr("text-anchor","middle").text("% of observations").style("font-size","13px")}else{const O={top:5,right:5,bottom:30,left:10},P=L-O.left-O.right,X=N-O.top-O.bottom,I=ae.scaleBand().domain(Array.from(R.keys())).range([0,P]).padding(.2),Y=ae.scaleLinear().domain([0,Me(Array.from(R.values()))||0]).range([X,0]),z=$.append("g").attr("transform",`translate(${O.left},${O.top})`);z.selectAll(".bar").data(Array.from(R.entries())).enter().append("rect").attr("class","bar").attr("x",V=>{const[B]=V;return I(B)||0}).attr("y",V=>{const[,B]=V;return Y(B)}).attr("width",I.bandwidth()).attr("height",V=>{const[,B]=V;return X-Y(B)}).attr("fill",ie.PRIMARY).style("cursor","pointer").on("click",function(V,B){const[H]=B;v(H)}).on("mouseover",function(V,B){F(V,B)}).on("mousemove",V=>m(V.clientX,V.clientY,"tyche-nominal")).on("mouseleave",()=>u("tyche-nominal")),z.selectAll(".inner-bar").data(Array.from(R.entries()).filter(V=>{const[B]=V;return x.has(B)})).enter().append("rect").attr("class","inner-bar").attr("x",V=>{const[B]=V;return(I(B)||0)+oe}).attr("y",V=>{const[,B]=V;return Y(B)+oe}).attr("width",I.bandwidth()-2*oe).attr("height",V=>{const[,B]=V;return X-Y(B)-2*oe}).attr("fill",ie.PRIMARY).attr("stroke","white").attr("stroke-width",oe).style("pointer-events","none"),z.append("g").attr("transform",`translate(0,${X})`).call(ae.axisBottom(I)).selectAll("text").attr("transform","rotate(-45)").style("text-anchor","end"),z.append("g").call(ae.axisLeft(Y).ticks(7).tickFormat(dn)),z.append("text").attr("transform","rotate(-90)").attr("y",-30).attr("x",-X/2).attr("text-anchor","middle").text("Count").style("font-size","12px")}},e[17]=s,e[18]=p.filtered,e[19]=p.raw,e[20]=u,e[21]=m,e[22]=v,e[23]=x,e[24]=c,e[25]=w):w=e[25];let k;if(e[26]!==s||e[27]!==p||e[28]!==u||e[29]!==m||e[30]!==v||e[31]!==x||e[32]!==c?(k=[p,s,u,m,v,x,c],e[26]=s,e[27]=p,e[28]=u,e[29]=m,e[30]=v,e[31]=x,e[32]=c,e[33]=k):k=e[33],M.useEffect(w,k),p.filtered.length==0)return null;let j;e[34]!==s.isSystem?(j=s.isSystem&&r.jsxs("span",{className:"tooltip",children:[r.jsx(W,{icon:gs,className:"tyche__nominal__feature__icon"}),r.jsx("span",{className:"tooltip__text",children:"This feature is generated automatically for all tests"})]}),e[34]=s.isSystem,e[35]=j):j=e[35];let E;e[36]!==s.name?(E=r.jsx("span",{className:"tyche__nominal__feature__text",children:s.name}),e[36]=s.name,e[37]=E):E=e[37];let A;e[38]!==E||e[39]!==j?(A=r.jsxs("div",{className:"tyche__nominal__feature",children:[j,E]}),e[38]=E,e[39]=j,e[40]=A):A=e[40];let D;e[41]===Symbol.for("react.memo_cache_sentinel")?(D=r.jsx("div",{ref:n,className:"tyche__nominal__chart",children:r.jsx("svg",{ref:o,style:{width:"100%"}})}),e[41]=D):D=e[41];let S;return e[42]!==A?(S=r.jsxs("div",{children:[A,D]}),e[42]=A,e[43]=S):S=e[43],S}function dn(t){return Math.round(Number(t)).toString()}function hn(t){return`${Math.round(Number(t)*100)}%`}function _n(t){return t===Ye?ie.SUCCESS:t===We?ie.ERROR:ie.PRIMARY}function pn(t){const[e]=t;return e===Ye?0:e===We?1:e}function gn(t){return`${t}`}function xn(t){return t.status!=="gave_up"}function yn(t){return t.status!=="gave_up"}function mt(t){const e=U.c(17),{title:s,children:i,defaultState:n,onStateChange:o,headerClass:a,contentClass:l}=t,c=n===void 0?"open":n,u=a===void 0?"":a,m=l===void 0?"":l,[f,d]=M.useState(c);let _;e[0]!==o||e[1]!==f?(_=()=>{const v=f==="open"?"closed":"open";d(v),o==null||o(v)},e[0]=o,e[1]=f,e[2]=_):_=e[2];const x=_,y=`collapsible__header ${u}`;let b;e[3]!==f?(b=r.jsx("span",{className:"collapsible__toggle",children:f==="open"?r.jsx(W,{icon:xs}):r.jsx(W,{icon:ys})}),e[3]=f,e[4]=b):b=e[4];let h;e[5]!==y||e[6]!==b||e[7]!==s||e[8]!==x?(h=r.jsxs("div",{className:y,onClick:x,children:[b,s]}),e[5]=y,e[6]=b,e[7]=s,e[8]=x,e[9]=h):h=e[9];let p;e[10]!==i||e[11]!==m||e[12]!==f?(p=f==="open"&&r.jsx("div",{className:`${m}`,children:i}),e[10]=i,e[11]=m,e[12]=f,e[13]=p):p=e[13];let g;return e[14]!==h||e[15]!==p?(g=r.jsxs("div",{children:[h,p]}),e[14]=h,e[15]=p,e[16]=g):g=e[16],g}function dt(t){const e=U.c(5),{title:s,children:i,defaultState:n,onStateChange:o}=t,a=n===void 0?"open":n;let l;return e[0]!==i||e[1]!==a||e[2]!==o||e[3]!==s?(l=r.jsx("div",{className:"tyche__section",children:r.jsx(mt,{title:s,defaultState:a,onStateChange:o,headerClass:"tyche__section__header",contentClass:"tyche__section__content",children:i})}),e[0]=i,e[1]=a,e[2]=o,e[3]=s,e[4]=l):l=e[4],l}const bn="__hypofuzz_stability";function vn(t){const e=U.c(12),{observations:s,observationCategory:i}=t;let n,o,a,l;if(e[0]!==i||e[1]!==s){l=Symbol.for("react.early_return_sentinel");e:{const u=new Set;s.raw.forEach(d=>{for(const _ of d.features.keys())_.startsWith("Retried draw from")||u.add(_)});const m=Array.from(u).map(Nn);if(i=="rolling"&&m.push(new fn(bn,"Stability",wn)),m.length===0){l=null;break e}if(!s.filtered.some(Sn)){l=null;break e}n=dt,o="Features";let f;e[6]!==s?(f=d=>r.jsx(mn,{feature:d,observations:s}),e[6]=s,e[7]=f):f=e[7],a=Array.from(m).sortKey(jn).map(f)}e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=l}else n=e[2],o=e[3],a=e[4],l=e[5];if(l!==Symbol.for("react.early_return_sentinel"))return l;let c;return e[8]!==n||e[9]!==o||e[10]!==a?(c=r.jsx(n,{title:o,children:a}),e[8]=n,e[9]=o,e[10]=a,e[11]=c):c=e[11],c}function jn(t){return t.name}function Sn(t){return t.status!=="gave_up"}function wn(t){return t.stability??"unknown"}function Nn(t){return new un(t,t)}function kn(){const t=U.c(7),{filters:e,removeFilter:s}=Ve();let i,n;if(t[0]!==e||t[1]!==s){n=Symbol.for("react.early_return_sentinel");e:{const o=Array.from(e.values()).flat().sortKey($n);if(o.length===0){n=null;break e}let a;t[4]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("div",{className:"tyche__filters__title",children:"Filters"}),t[4]=a):a=t[4];let l;t[5]!==s?(l=c=>r.jsxs("div",{className:"tyche__filters__filter",children:[r.jsxs("div",{className:"tyche__filters__filter__name",children:[r.jsx("div",{className:"tyche__filters__filter__remove",onClick:()=>s(c.key),children:r.jsx(W,{icon:Pt})}),c.name]}),r.jsx("div",{className:"tyche__filters__filter__value-name",children:c.valueName})]},c.key),t[5]=s,t[6]=l):l=t[6],i=r.jsxs("div",{className:"tyche__filters",children:[a,o.map(l)]})}t[0]=e,t[1]=s,t[2]=i,t[3]=n}else i=t[2],n=t[3];return n!==Symbol.for("react.early_return_sentinel")?n:i}function $n(t){return t.createdAt}function Jt(t){const e=t.regex,s=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),i=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:i,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},c={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},m={begin:/\{\{/,relevance:0},f={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c,m,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c,m,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,m,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,m,u]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},d="[0-9](_?[0-9])*",_=`(\\b(${d}))?\\.(${d})|\\b(${d})\\.`,x=`\\b|${i.join("|")}`,y={className:"number",relevance:0,variants:[{begin:`(\\b(${d})|(${_}))[eE][+-]?(${d})[jJ]?(?=${x})`},{begin:`(${_})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${x})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${x})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${x})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${x})`},{begin:`\\b(${d})[jJ](?=${x})`}]},b={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},h={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",c,y,f,t.HASH_COMMENT_MODE]}]};return u.contains=[f,y,c],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|\?)|=>/,contains:[c,y,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,b,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,s],scope:{1:"keyword",3:"title.function"},contains:[h]},{variants:[{match:[/\bclass/,/\s+/,s,/\s*/,/\(\s*/,s,/\s*\)/]},{match:[/\bclass/,/\s+/,s]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[y,h,f]}]}}function Ne(t){const e=U.c(31),{currentPage:s,pageCount:i,onPageChange:n}=t;console.assert(i>1);let o;e[0]!==s||e[1]!==i?(o=function(){return i<=7?Array.from({length:i},Rn):s<=3?[0,1,2,3,4,"ellipsis",i-1]:s>=i-4?[0,"ellipsis",i-5,i-4,i-3,i-2,i-1]:[0,"ellipsis",s-1,s,s+1,"ellipsis",i-1]},e[0]=s,e[1]=i,e[2]=o):o=e[2];const a=o;let l;e[3]!==a?(l=a(),e[3]=a,e[4]=l):l=e[4];const c=l;let u;e[5]!==s||e[6]!==n?(u=function(E){typeof E=="number"&&s!==E&&n(E)},e[5]=s,e[6]=n,e[7]=u):u=e[7];const m=u;let f;e[8]!==s||e[9]!==n?(f=function(){s>0&&n(s-1)},e[8]=s,e[9]=n,e[10]=f):f=e[10];const d=f;let _;e[11]!==s||e[12]!==n||e[13]!==i?(_=function(){s<i-1&&n(s+1)},e[11]=s,e[12]=n,e[13]=i,e[14]=_):_=e[14];const x=_,y=`pagination__nav pagination__nav--left ${s===0?"pagination__nav--disabled":""}`;let b;e[15]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(W,{icon:bs}),e[15]=b):b=e[15];let h;e[16]!==d||e[17]!==y?(h=r.jsx("div",{className:y,onClick:d,children:b}),e[16]=d,e[17]=y,e[18]=h):h=e[18];let p;e[19]!==s||e[20]!==m||e[21]!==c?(p=c.map((j,E)=>{if(j==="ellipsis")return r.jsx("div",{className:" pagination__ellipsis",children:"..."},`ellipsis-${E}`);const A=j===s;return r.jsx("div",{className:`pagination__number ${A?"pagination__number--current":""}`,onClick:()=>m(j),children:j+1},j)}),e[19]=s,e[20]=m,e[21]=c,e[22]=p):p=e[22];const g=`pagination__nav pagination__nav--right ${s===i-1?"pagination__nav--disabled":""}`;let v;e[23]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(W,{icon:vs}),e[23]=v):v=e[23];let w;e[24]!==x||e[25]!==g?(w=r.jsx("div",{className:g,onClick:x,children:v}),e[24]=x,e[25]=g,e[26]=w):w=e[26];let k;return e[27]!==w||e[28]!==h||e[29]!==p?(k=r.jsxs("div",{className:"pagination",children:[h,p,w]}),e[27]=w,e[28]=h,e[29]=p,e[30]=k):k=e[30],k}function Rn(t,e){return e}Ae.registerLanguage("python",Jt);const tt=30;function Cn(t){const e=U.c(36),{observations:s,observationCategory:i}=t,n=M.useRef(null),[o,a]=M.useState(0);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{a(0)},e[0]=l):l=e[0];let c;e[1]!==i?(c=[i],e[1]=i,e[2]=c):c=e[2],M.useEffect(l,c);let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=function(){n.current&&n.current.querySelectorAll("code:not([data-highlighted='yes'])").forEach(An)},e[3]=u):u=e[3];const m=u;let f;e[4]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{m()},e[4]=f):f=e[4];let d;e[5]!==s||e[6]!==o?(d=[s,o],e[5]=s,e[6]=o,e[7]=d):d=e[7],M.useEffect(f,d);let _,x,y,b,h,p,g,v;if(e[8]!==s.filtered||e[9]!==o){const E=new Map;s.filtered.forEach(D=>{const S=D.representation;E.set(S,(E.get(S)||0)+1)}),x=Math.ceil(E.size/tt);const A=Array.from(E.entries()).sortKey(Mn).slice(o*tt,(o+1)*tt);_=dt,v="Test cases",y="closed",e[18]===Symbol.for("react.memo_cache_sentinel")?(b=D=>{D==="open"&&requestAnimationFrame(()=>{m()})},e[18]=b):b=e[18],h=n,e[19]!==o||e[20]!==x?(p=x>1&&r.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"12px"},children:r.jsx(Ne,{currentPage:o,pageCount:x,onPageChange:a})}),e[19]=o,e[20]=x,e[21]=p):p=e[21],g=A.map(En),e[8]=s.filtered,e[9]=o,e[10]=_,e[11]=x,e[12]=y,e[13]=b,e[14]=h,e[15]=p,e[16]=g,e[17]=v}else _=e[10],x=e[11],y=e[12],b=e[13],h=e[14],p=e[15],g=e[16],v=e[17];let w;e[22]!==o||e[23]!==x?(w=x>1&&r.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"12px"},children:r.jsx(Ne,{currentPage:o,pageCount:x,onPageChange:a})}),e[22]=o,e[23]=x,e[24]=w):w=e[24];let k;e[25]!==w||e[26]!==h||e[27]!==p||e[28]!==g?(k=r.jsxs("div",{ref:h,children:[p,g,w]}),e[25]=w,e[26]=h,e[27]=p,e[28]=g,e[29]=k):k=e[29];let j;return e[30]!==_||e[31]!==y||e[32]!==b||e[33]!==k||e[34]!==v?(j=r.jsx(_,{title:v,defaultState:y,onStateChange:b,children:k}),e[30]=_,e[31]=y,e[32]=b,e[33]=k,e[34]=v,e[35]=j):j=e[35],j}function En(t){const[e,s]=t;return r.jsxs("div",{style:{position:"relative"},className:"tyche__representation__example",children:[r.jsx("pre",{children:r.jsx("code",{className:"language-python",children:e})}),s>1&&r.jsxs("div",{className:"tyche__representation__example__count",children:["x ",s]})]},e)}function Mn(t){const[,e]=t;return-e}function An(t){Ae.highlightElement(t)}const Nt=640;function Tn({name:t,observations:e,verticalAxis:s,horizontalAxis:i,cssStyle:n=(o,a)=>({})}){const{filters:o,setFilters:a}=Ve(),{showTooltip:l,hideTooltip:c,moveTooltip:u}=Ue();function m(){const S=o.get(t)||[];if(S.length===0)return ee();console.assert(S.length===1);const C=S[0];return ee(C.extraData.selectedCells)}const f=m(),d=[],_=Array(s.length).fill(0),x=Array(i.length).fill(0);let y=0;for(let S=0;S<s.length;S++){d[S]=[];for(let C=0;C<i.length;C++)d[S][C]={count:0,widthPercent:0}}e.filtered.forEach(S=>{for(let C=0;C<s.length;C++){const[,R]=s[C];if(R(S)){for(let T=0;T<i.length;T++){const[,L]=i[T];if(L(S)){d[C][T].count++,_[C]++,x[T]++,y++;break}}break}}});const b=_.map((S,C)=>S>0?C:null).filter(S=>S!==null),h=x.map((S,C)=>S>0?C:null).filter(S=>S!==null),p=(S,C)=>{let R=ee();if(S!==null&&C!==null){const $=pe([S,C]);f.equals(ee([$]))?R=ee():R=ee([$])}else S!==null?(console.assert(C===null),h.forEach($=>{d[S][$].count>0&&(R=R.add(pe([S,$])))})):C!==null&&(console.assert(S===null),b.forEach($=>{d[$][C].count>0&&(R=R.add(pe([$,C])))}));function T(){if(R.size===0)return"";let $=R;const F=[],O=[...b.map(P=>({name:s[P][0],cells:h.filter(X=>d[P][X].count>0).map(X=>pe([P,X]))})),...h.map(P=>({name:i[P][0],cells:b.filter(X=>d[X][P].count>0).map(X=>pe([X,P]))}))];for(const P of O)P.cells.length>0&&P.cells.every(X=>$.has(X))&&(F.push(P.name),$=$.subtract(ee(P.cells)));for(;$.size>0;){const P=$.first(),[X,I]=P.toArray();F.push(`${s[X][0]}+${i[I][0]}`),$=$.delete(P)}return console.assert($.size==0),F.join(" or ")}const L=[];R.size>0&&L.push(new Ut(t,T(),$=>R.some(F=>{const[O,P]=F.toArray(),X=s[O][1],I=i[P][1];return X($)&&I($)}),t,{selectedCells:R}));const N=new Map(o);N.set(t,L),a(N)},g=Math.max(...b.map(S=>et(s[S][0],"tyche__mosaic__row-header").width)),v=Math.max(...h.map(S=>et(i[S][0],"tyche__mosaic__column-header").height)),w=Math.max(...b.map(S=>et(_[S].toString(),"tyche__mosaic__row-total").width));if(b.length===0||h.length===0)return r.jsx("div",{children:"No observations"});const k=30,j=30;for(let S=0;S<s.length;S++)for(let C=0;C<i.length;C++)d[S][C].widthPercent=_[S]>0?d[S][C].count/_[S]*100:0;const E=b.map(S=>Math.max(_[S]/y*45*b.length,j)),A=h.map((S,C)=>C===0?0:C===h.length-1?100:C/(h.length-1)*100),D=Nt-g-w;return b.forEach(S=>{const C=h.map(T=>d[S][T]);if(C.reduce((T,L)=>T+L.widthPercent,0)>0){const L=C.map($=>$.widthPercent/100*D).map(($,F)=>C[F].count>0&&$>0&&$<k?k:$),N=L.reduce(($,F)=>$+F,0);h.forEach(($,F)=>{d[S][$].widthPercent=N>0?L[F]/N*100:0})}}),r.jsxs("div",{className:"tyche__mosaic__container",style:{maxWidth:`${Nt}px`,minHeight:"175px"},children:[r.jsx("div",{className:"tyche__mosaic__column-headers",style:{marginLeft:`${g}px`,marginRight:`${w}px`,height:`${v}px`},children:h.map((S,C)=>{const R=C===0,T=C===h.length-1;return r.jsx("div",{className:"tyche__mosaic__column-header",style:{left:`${A[C]}%`,transform:R?"translateX(0%)":T?"translateX(-100%)":"translateX(-50%)",textAlign:R?"left":T?"right":"center"},onClick:()=>p(null,S),children:i[S][0]},`header-${S}`)})}),b.map((S,C)=>r.jsxs("div",{className:"tyche__mosaic__row",style:{height:`${E[C]}px`},children:[r.jsx("div",{className:"tyche__mosaic__row-header",style:{width:`${g}px`,cursor:"pointer"},onClick:()=>p(S,null),children:s[S][0]}),r.jsx("div",{className:"tyche__mosaic__row-cells",children:h.map(R=>{const T=d[S][R];if(T.count===0)return null;const L=f.has(pe([S,R])),N=`${s[S][0]} and ${i[R][0]}<br>Count: ${T.count}`;return r.jsx("div",{className:`tyche__mosaic__cell${L?" tyche__mosaic__cell--selected":""}`,style:{width:`${T.widthPercent}%`,minWidth:`${k}px`,minHeight:`${j}px`,...n(s[S][0],i[R][0])},onClick:()=>p(S,R),onMouseEnter:$=>l(N,$.clientX,$.clientY,"tyche-mosaic"),onMouseMove:$=>u($.clientX,$.clientY,"tyche-mosaic"),onMouseLeave:()=>c("tyche-mosaic"),children:r.jsx("span",{className:"tyche__mosaic__cell-value",children:T.count})},`cell-${S}-${R}`)})}),r.jsx("div",{className:"tyche__mosaic__row-total",style:{width:`${w}px`},children:_[S]})]},`row-${S}`)),r.jsxs("div",{className:"tyche__mosaic__column-totals-row",style:{height:`${v}px`},children:[r.jsx("div",{style:{width:`${g}px`}}),r.jsx("div",{className:"tyche__mosaic__column-totals",style:{marginRight:`${w}px`},children:h.map((S,C)=>{const R=C===0,T=C===h.length-1;return r.jsx("div",{className:"tyche__mosaic__column-total",style:{left:`${A[C]}%`,transform:R?"translateX(0%)":T?"translateX(-100%)":"translateX(-50%)",textAlign:R?"left":T?"right":"center"},children:x[S]},`total-${S}`)})}),r.jsx("div",{className:"tyche__mosaic__grand-total",style:{width:`${w}px`},children:y})]})]})}function Ln(t){const e=U.c(5),{observations:s}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=function(u,m){const f={};return u==="Passed"?f.backgroundColor=ie.SUCCESS:u==="Invalid"?f.backgroundColor=ie.WARNING:u==="Failed"&&(f.backgroundColor=ie.ERROR),m==="Duplicate"&&(f.opacity=.7),f},e[0]=i):i=e[0];const n=i;let o,a;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=[["Passed",Fn],["Invalid",Dn]],a=[["Unique",In],["Duplicate",Pn]],e[1]=o,e[2]=a):(o=e[1],a=e[2]);let l;return e[3]!==s?(l=r.jsx(dt,{title:"Summary",children:r.jsx(Tn,{name:"summary",observations:s,verticalAxis:o,horizontalAxis:a,cssStyle:n})}),e[3]=s,e[4]=l):l=e[4],l}function Pn(t){return t.isDuplicate??!1}function In(t){return t.isUnique??!1}function Dn(t){return t.status==="gave_up"}function Fn(t){return t.status==="passed"}const Ye="Present",We="Not present";var ie=(t=>(t.PRIMARY="#6b8ab5",t.SUCCESS="#8ba86b",t.WARNING="#d59a7e",t.ERROR="#c77a7e",t.ACCENT="#c1a2bb",t.ACCENT2="#9fc7c6",t.ACCENT3="#edd39a",t.ACCENT4="#99c7d6",t.ACCENT5="#8faac6",t))(ie||{});function On(t){const e=U.c(27),{test:s}=t,{filters:i,observationCategory:n,setObservationCategory:o}=Ve();let a;e[0]!==n||e[1]!==s.corpus_observations||e[2]!==s.rolling_observations?(a=n==="rolling"?s.rolling_observations.sortKey(Xn):s.corpus_observations,e[0]=n,e[1]=s.corpus_observations,e[2]=s.rolling_observations,e[3]=a):a=e[3];const l=a;let c;e[4]!==i||e[5]!==l?(c=function(){const k=Array.from(i.values()).flat();return k.length===0?l:l.filter(j=>k.every(E=>E.predicate(j)))},e[4]=i,e[5]=l,e[6]=c):c=e[6];const u=c;let m;e[7]!==u?(m=u(),e[7]=u,e[8]=m):m=e[8];let f;e[9]!==l||e[10]!==m?(f={raw:l,filtered:m},e[9]=l,e[10]=m,e[11]=f):f=e[11];const d=f;let _,x;e[12]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx("div",{className:"card__header",children:r.jsx("span",{children:"Observations"})}),x={paddingTop:"10px",paddingBottom:"10px",display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"20px",fontSize:"1.05rem",fontWeight:"500"},e[12]=_,e[13]=x):(_=e[12],x=e[13]);let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=[{value:"covering",content:"Covering"},{value:"rolling",content:"Rolling"}],e[14]=y):y=e[14];let b;e[15]!==n||e[16]!==o?(b=r.jsx(ye,{value:n,onChange:o,options:y}),e[15]=n,e[16]=o,e[17]=b):b=e[17];let h;e[18]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(kn,{}),e[18]=h):h=e[18];let p;e[19]!==b?(p=r.jsxs("div",{style:x,children:[b,h]}),e[19]=b,e[20]=p):p=e[20];let g;e[21]!==n||e[22]!==d?(g=d.raw.length>0?r.jsxs(r.Fragment,{children:[r.jsx(Ln,{observations:d}),r.jsx(vn,{observations:d,observationCategory:n}),r.jsx(Cn,{observations:d,observationCategory:n})]}):r.jsx("div",{className:"tyche__section",children:"No observations"}),e[21]=n,e[22]=d,e[23]=g):g=e[23];let v;return e[24]!==p||e[25]!==g?(v=r.jsxs("div",{className:"card",children:[_,p,g]}),e[24]=p,e[25]=g,e[26]=v):v=e[26],v}function Xn(t){return-t.run_start}function Bn(t){const e=U.c(2),{test:s}=t;let i;return e[0]!==s?(i=r.jsx(tn,{children:r.jsx(On,{test:s})}),e[0]=s,e[1]=i):i=e[1],i}const kt=["Skipped","SkipTest"];class Te{withProperties(e){return Object.assign(Object.create(this.constructor.prototype),this,e)}}class be extends Te{constructor(e,s){super(),this.state=e,this.observation=s}static fromJson(e){return new be(e.state,Ke.fromJson(e.observation))}}class he extends Te{constructor(e=new Map([[0,0],[1,0],[2,0],[3,0]])){super(),this.counts=e}static fromJson(e){const s=new Map([[0,0],[1,0],[2,0],[3,0]]);for(const[i,n]of Object.entries(e))console.assert(typeof n=="number"),s.set(Number(i),n);return new he(s)}add(e){const s=new Map(this.counts);for(const[i,n]of e.counts.entries())s.set(i,s.get(i)+n);return new he(s)}subtract(e){const s=new Map(this.counts);for(const[i,n]of e.counts.entries())s.set(i,s.get(i)-n);return new he(s)}sum(){return zt(this.counts.values())}}var rt=(t=>(t.GENERATE="generate",t.REPLAY="replay",t.DISTILL="distill",t.SHRINK="shrink",t.FAILED="failed",t))(rt||{});class ze extends Te{constructor(s,i,n,o,a,l,c,u){super();ne(this,"status_counts_diff");ne(this,"elapsed_time_diff");ne(this,"timestamp_monotonic");this.elapsed_time=s,this.timestamp=i,this.status_counts=n,this.behaviors=o,this.fingerprints=a,this.since_new_behavior=l,this.phase=c,this.worker_uuid=u,this.status_counts_diff=null,this.elapsed_time_diff=null,this.timestamp_monotonic=null}get ninputs(){return this.status_counts.sum()}static fromJson(s,i){return new ze(i.elapsed_time,i.timestamp,he.fromJson(i.status_counts),i.behaviors,i.fingerprints,i.since_new_behavior,i.phase,s)}}class Ke extends Te{constructor(s,i,n,o,a,l,c,u,m,f,d,_){super();ne(this,"isDuplicate",null);ne(this,"isUnique",null);this.type=s,this.status=i,this.status_reason=n,this.representation=o,this.arguments_=a,this.how_generated=l,this.features=c,this.timing=u,this.metadata=m,this.property=f,this.run_start=d,this.stability=_}static fromJson(s){return new Ke(s.type,s.status,s.status_reason,s.representation,new Map(Object.entries(s.arguments)),s.how_generated,new Map(Object.entries(s.features)),new Map(Object.entries(s.timing)),new Map(Object.entries(s.metadata)),s.property,Number(s.run_start),s.stability)}}var Q=(t=>(t[t.FAILED_FATALLY=0]="FAILED_FATALLY",t[t.FAILED=1]="FAILED",t[t.SHRINKING=2]="SHRINKING",t[t.RUNNING=3]="RUNNING",t[t.SKIPPED_DYNAMICALLY=4]="SKIPPED_DYNAMICALLY",t[t.WAITING=5]="WAITING",t))(Q||{});function $t(t,e){const s=e?e.status_counts:new he,i=e?e.elapsed_time:0,n=t.status_counts.subtract(s),o=t.elapsed_time-i,a=e?Math.max(t.timestamp,e.timestamp_monotonic+o):t.timestamp;return console.assert(Array.from(n.counts.values()).every(l=>l>=0)),console.assert(o>=0),t.withProperties({status_counts_diff:n,elapsed_time_diff:o,timestamp_monotonic:a})}const ke=class ke extends Te{constructor(s,i,n,o,a,l,c,u){super();ne(this,"linear_reports");ne(this,"_status_counts_cumsum");ne(this,"_elapsed_time_cumsum");ne(this,"load_finished_at",null);this.database_key=s,this.nodeid=i,this.rolling_observations=n,this.corpus_observations=o,this.failures=a,this.fatal_failure=l,this.reports_by_worker=c,this.stability=u,this.linear_reports=[],this._status_counts_cumsum=new Map,this._elapsed_time_cumsum=new Map,this.load_finished_at=null;const m=this.reports_by_worker;this.reports_by_worker=new Map;const f=Array.from(m.entries()).flatMap(([d,_])=>_.map(x=>[d,x])).sortKey(([d,_])=>_.timestamp);for(const[d,_]of f)this.add_report(d,_);this._check_invariants()}static fromJson(s){return new ke(s.database_key,s.nodeid,[],[],new Map(Object.entries(s.failures).map(([i,n])=>[i,be.fromJson(n)])),s.fatal_failure,new Map(Object.entries(s.reports_by_worker).map(([i,n])=>[i,n.map(ze.fromJson)])),s.stability)}_assert_reports_ordered(s){for(let i=0;i<s.length-1;i++)console.assert(s[i].timestamp_monotonic<=s[i+1].timestamp_monotonic)}_check_invariants(){this._assert_reports_ordered(this.linear_reports);const s=this.linear_status_counts(null);for(let n=0;n<s.length-1;n++)console.assert(s[n].sum()<=s[n+1].sum());const i=this.linear_elapsed_time(null);for(let n=0;n<i.length-1;n++)console.assert(i[n]<=i[n+1]);console.assert(i.length===s.length&&s.length===this.linear_reports.length);for(const[n,o]of this.reports_by_worker.entries())this._assert_reports_ordered(o)}add_report(s,i){let n=null,o=0;if(this.reports_by_worker.has(s)){const l=this.reports_by_worker.get(s);o=Qe(l,i.elapsed_time,c=>c.elapsed_time),n=o!=0?l[o-1]:null}const a=$t(i,n);if(this.reports_by_worker.has(s)||this.reports_by_worker.set(s,[]),this.reports_by_worker.get(s).splice(o,0,a),a.phase!==rt.REPLAY||a.behaviors>=this.behaviors&&a.fingerprints>=this.fingerprints){const l=Qe(this.linear_reports,a.timestamp_monotonic,c=>c.timestamp_monotonic);if(this.linear_reports.splice(l,0,a),l!=this.linear_reports.length-1){let c=null,u;for(u=0;u<this.linear_reports.length-(l+1);u++){const m=this.linear_reports[l+1+u];if(a.worker_uuid===m.worker_uuid){c=m;break}}c&&(console.assert(this.linear_reports[l+1+u]===c),this.linear_reports[l+1+u]=$t(c,a));for(const m of[this._status_counts_cumsum,this._elapsed_time_cumsum])for(const[f,[d,_]]of m.entries())l>=d&&m.set(f,[d,_.slice(0,l-d)])}}}get normalFailures(){return Array.from(this.failures.entries()).filter(([s,i])=>!kt.some(n=>s.includes(`${n} at`))).map(([s,i])=>i)}get skipFailures(){return Array.from(this.failures.entries()).filter(([s,i])=>kt.some(n=>s.includes(`${n} at`))).map(([s,i])=>i)}get status(){if(this.skipFailures.length>0)return Q.SKIPPED_DYNAMICALLY;if(this.fatal_failure)return Q.FAILED_FATALLY;if(this.failures.size>0)return Q.FAILED;if(this.linear_reports.length===0)return Q.WAITING;const s=this.linear_reports[this.linear_reports.length-1],i=new Date().getTime()/1e3;return s.phase==rt.SHRINK?Q.SHRINKING:s.ninputs===0||s.timestamp<i-ke.WAITING_STATUS_DURATION?Q.WAITING:Q.RUNNING}get behaviors(){return this.linear_reports.length===0?0:this.linear_reports[this.linear_reports.length-1].behaviors}get fingerprints(){return this.linear_reports.length===0?0:this.linear_reports[this.linear_reports.length-1].fingerprints}get since_new_behavior(){return this.linear_reports.length===0?null:this.linear_reports[this.linear_reports.length-1].since_new_behavior}elapsed_time(s){const i=this.linear_elapsed_time(s);return i.length===0?0:i[i.length-1]}ninputs(s){const i=this.linear_status_counts(s);return i.length===0?0:i[i.length-1].sum()}_cumsum(s,i,n,o,a){if(o===null&&(o=-1/0),s.has(o)){const[m,f]=s.get(o);if(f.length<this.linear_reports.slice(m).length){let d=f.length>0?f[f.length-1]:a;for(const _ of this.linear_reports.slice(m+f.length))d=n(d,_[i]),f.push(d);s.set(o,[m,f])}return f}const l=[],c=Qe(this.linear_reports,o,m=>m.timestamp_monotonic);let u=a;for(const m of this.linear_reports.slice(c))u=n(u,m[i]),l.push(u);return s.set(o,[c,l]),l}linear_status_counts(s){return this._cumsum(this._status_counts_cumsum,"status_counts_diff",(i,n)=>i.add(n),s,new he)}linear_elapsed_time(s){return this._cumsum(this._elapsed_time_cumsum,"elapsed_time_diff",(i,n)=>i+n,s,0)}};ne(ke,"WAITING_STATUS_DURATION",120);let Fe=ke;const Vn="hypofuzz-inf-a928fa52",Un="hypofuzz-ninf-a928fa52",Yn="hypofuzz-nan-a928fa52";function Wn(t,e){return e===Vn?1/0:e===Un?-1/0:e===Yn?NaN:e}const Zt=M.createContext(null);function Rt(t){const e=new Map;t.forEach(i=>{e.set(i.representation,(e.get(i.representation)||0)+1)}),t.forEach(i=>{const n=e.get(i.representation);i.isUnique=n==1,i.isDuplicate=n>1});const s=new Set;t.forEach(i=>{i.features.forEach((n,o)=>{s.add(o)})}),t.forEach(i=>{s.forEach(n=>{i.features.has(n)||i.features.set(n,We)});for(const[n,o]of i.features)o===""&&i.features.set(n,Ye)})}function zn(t,e){const s=new Map(t);function i(n){if(s.has(n))return s.get(n);{const o=new Fe(null,n,[],[],new Map,null,new Map,null);return s.set(o.nodeid,o),o}}switch(e.type){case 1:return t;case 2:{const{tests:n}=e;for(const{database_key:o,nodeid:a,failures:l,fatal_failure:c,stability:u}of n){const m=i(a);m.database_key=o,l.forEach((f,d)=>{m.failures.set(d,f)}),m.fatal_failure=c,m.stability=u}return s}case 3:{const{nodeid:n,worker_uuid:o,reports:a}=e,l=i(n);for(const c of a)l.add_report(o,c);return s}case 5:{const{nodeid:n,failures:o}=e,a=i(n);return o.forEach((l,c)=>{a.failures.set(c,l)}),s}case 6:{const{nodeid:n,failures:o}=e,a=i(n);return a.failures=o,s}case 4:{const{nodeid:n,observation_type:o,observations:a}=e,l=i(n);return o==="rolling"?(l.rolling_observations=[...l.rolling_observations,...a],l.rolling_observations=l.rolling_observations.sortKey(c=>-c.run_start).slice(0,300),Rt(l.rolling_observations)):(console.assert(o==="corpus"),l.corpus_observations=[...l.corpus_observations,...a],Rt(l.corpus_observations)),s}case 7:{const{nodeids:n}=e;for(const o of n){const a=i(o);a.load_finished_at=Date.now()}return s}case 8:{const{nodeid:n,fatal_failure:o}=e,a=i(n);return a.fatal_failure=o,s}default:throw new Error("non-exhaustive switch in testsReducer")}}function Kn(t){const e=U.c(26),{children:s}=t,[i,n]=M.useState(null);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=new Map,e[0]=o):o=e[0];const[a,l]=M.useReducer(zn,o),[c,u]=M.useState(!1),[m,f]=M.useState(null);let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d={count_tests:null,count_tests_loaded:null},e[1]=d):d=e[1];const[_,x]=M.useState(d),{addNotification:y,updateNotification:b,dismissNotification:h}=Qs(),p=M.useRef(null);let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=S=>{u(!0),f(S)},e[2]=g):g=e[2];const v=g;let w;e[3]!==_||e[4]!==a?(w=()=>{const S=Date.now();return _.count_tests_loaded!==null&&_.count_tests!==null&&_.count_tests_loaded===_.count_tests&&Array.from(a.values()).every(C=>C.load_finished_at===null?!1:S-C.load_finished_at>200)},e[3]=_,e[4]=a,e[5]=w):w=e[5];const k=w;let j;e[6]!==y||e[7]!==h||e[8]!==c||e[9]!==m||e[10]!==a||e[11]!==b?(j=()=>{if(!c)return;a.clear(),x({count_tests:null,count_tests_loaded:null});const S=new URL(`ws${window.location.protocol==="https:"?"s":""}://${window.location.host}/ws`);m&&S.searchParams.set("nodeid",m);const C=new WebSocket(S);return C.onmessage=R=>{const T=JSON.parse(R.data,Wn),L=Number(T.type),N=Number(T.count_tests),$=Number(T.count_tests_loaded);e:switch(L){case 1:{const F={count_tests:N,count_tests_loaded:$};if(x(F),l({type:1,loading_status:F}),$===N){p.current!==null&&(h(p.current),p.current=null);break e}const O=Tt.createElement(qs,{current:$,total:N,message:`Dashboard is still starting up (${$}/${N} tests loaded)`});p.current?b(p.current,O,null):p.current=y(O,null);break e}case 2:{l({type:2,tests:T.tests.map(qn)});break e}case 3:{l({type:3,nodeid:T.nodeid,worker_uuid:T.worker_uuid,reports:T.reports.map(F=>ze.fromJson(T.worker_uuid,F))});break e}case 4:{l({type:4,nodeid:T.nodeid,observation_type:T.observation_type,observations:T.observations.map(Ke.fromJson)});break e}case 5:{l({type:5,nodeid:T.nodeid,failures:new Map(Object.entries(T.failures).map(Gn))});break e}case 6:{l({type:6,nodeid:T.nodeid,failures:new Map(Object.entries(T.failures).map(Hn))});break e}case 7:{l({type:7,nodeids:T.nodeids});break e}default:throw new Error(`Unknown event type: ${T.type}`)}},n(C),()=>{C.close()}},e[6]=y,e[7]=h,e[8]=c,e[9]=m,e[10]=a,e[11]=b,e[12]=j):j=e[12];let E;e[13]!==y||e[14]!==h||e[15]!==c||e[16]!==m||e[17]!==b?(E=[m,c,y,h,b],e[13]=y,e[14]=h,e[15]=c,e[16]=m,e[17]=b,e[18]=E):E=e[18],M.useEffect(j,E);let A;e[19]!==i||e[20]!==a||e[21]!==k?(A={tests:a,socket:i,doLoadData:v,testsLoaded:k},e[19]=i,e[20]=a,e[21]=k,e[22]=A):A=e[22];let D;return e[23]!==s||e[24]!==A?(D=r.jsx(Zt.Provider,{value:A,children:s}),e[23]=s,e[24]=A,e[25]=D):D=e[25],D}function Hn(t){const[e,s]=t;return[e,be.fromJson(s)]}function Gn(t){const[e,s]=t;return[e,be.fromJson(s)]}function qn(t){return{database_key:t.database_key,nodeid:t.nodeid,failures:new Map(Object.entries(t.failures).map(Jn)),fatal_failure:t.fatal_failure,stability:t.stability}}function Jn(t){const[e,s]=t;return[e,be.fromJson(s)]}function ht(t){const e=U.c(4),s=t===void 0?null:t,i=M.useContext(Zt);if(!i)throw new Error("useData must be used within a DataProvider");let n,o;return e[0]!==i||e[1]!==s?(n=()=>{i.doLoadData(s)},o=[s,i],e[0]=i,e[1]=s,e[2]=n,e[3]=o):(n=e[2],o=e[3]),M.useEffect(n,o),i}function Le(t){const e=U.c(9),{to:s,icon:i,children:n,isActive:o}=t,a=ct(),l=`sidebar__link ${o(a.pathname)?"sidebar__link--active":""}`;let c;e[0]!==i?(c=r.jsx("span",{className:"sidebar__link__icon",children:i}),e[0]=i,e[1]=c):c=e[1];let u;e[2]!==n||e[3]!==l||e[4]!==c?(u=r.jsxs("div",{className:l,children:[c,n]}),e[2]=n,e[3]=l,e[4]=c,e[5]=u):u=e[5];let m;return e[6]!==u||e[7]!==s?(m=r.jsx(_e,{to:s,className:"sidebar__link__text",children:u}),e[6]=u,e[7]=s,e[8]=m):m=e[8],m}function Zn(){const t=U.c(24),e=ct(),[s,i]=M.useState(!1),n=M.useRef(null);let o,a;t[0]!==s?(o=()=>{const k=function(E){var A;s&&((A=n.current)==null?void 0:A.contains(E.target))===!1&&i(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},a=[s],t[0]=s,t[1]=o,t[2]=a):(o=t[1],a=t[2]),M.useEffect(o,a);let l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{i(!1)},t[3]=l):l=t[3];let c;t[4]!==e?(c=[e],t[4]=e,t[5]=c):c=t[5],M.useEffect(l,c);let u;t[6]!==s?(u=!s&&r.jsx("div",{className:"toggle-sidebar",onClick:()=>i(!0),children:r.jsx(W,{icon:js,size:"lg"})}),t[6]=s,t[7]=u):u=t[7];let m;t[8]!==s?(m=s&&r.jsx("div",{className:"opacity-overlay"}),t[8]=s,t[9]=m):m=t[9];const f=`sidebar ${s?"sidebar--open":""}`;let d;t[10]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(_e,{to:"/",className:"sidebar__title",children:"HypoFuzz"}),t[10]=d):d=t[10];let _;t[11]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx(Le,{to:"/",isActive:si,icon:r.jsx(W,{icon:Ss}),children:"Tests"}),t[11]=_):_=t[11];let x;t[12]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx(Le,{icon:r.jsx(W,{icon:ws}),to:"/patches",isActive:ti,children:"Patches"}),t[12]=x):x=t[12];let y;t[13]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(Le,{icon:r.jsx(W,{icon:Ns}),to:"/collected",isActive:ei,children:"Collection"}),t[13]=y):y=t[13];let b,h;t[14]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(Le,{icon:r.jsx(W,{icon:it}),to:"/workers",isActive:Qn,children:"Workers"}),h=r.jsx("div",{className:"sidebar__separator"}),t[14]=b,t[15]=h):(b=t[14],h=t[15]);let p;t[16]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsxs("nav",{className:"sidebar__nav",children:[_,x,y,b,h,r.jsx("a",{href:`${"/".replace(/\/$/,"")}/docs/`,className:"sidebar__link__text",children:r.jsxs("div",{className:"sidebar__link",children:[r.jsx("span",{className:"sidebar__link__icon",children:r.jsx(W,{icon:ks})}),"Docs"]})})]}),t[16]=p):p=t[16];let g;t[17]!==f?(g=r.jsxs("div",{ref:n,className:f,children:[d,p]}),t[17]=f,t[18]=g):g=t[18];let v;t[19]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx("div",{className:"content",children:r.jsx(ms,{})}),t[19]=v):v=t[19];let w;return t[20]!==g||t[21]!==u||t[22]!==m?(w=r.jsxs("div",{className:"layout",children:[u,m,g,v]}),t[20]=g,t[21]=u,t[22]=m,t[23]=w):w=t[23],w}function Qn(t){return t==="/workers"}function ei(t){return t==="/collected"}function ti(t){return t==="/patches"}function si(t){return t==="/"||t.startsWith("/tests/")}function _t({headers:t,data:e,row:s,mobileRow:i,getKey:n,onFilterChange:o,filterStrings:a,perPage:l}){const[c,u]=M.useState(null),[m,f]=M.useState(0),[d,_]=M.useState(""),[x,y]=M.useState(0),b=ut();function h(){let j=e;if(d&&(j=e.filter(A=>a?a(A).some(D=>D.toLowerCase().includes(d.toLowerCase())):!0)),c===null)return j;const E=[...j].sortKey(A=>t[c].sortKey(A));return m===0?E:E.reverse()}const p=M.useMemo(()=>h(),[e,d,c,m]),g=M.useMemo(()=>l?Math.max(1,Math.ceil(p.length/l)):1,[p.length,l]);M.useEffect(()=>{l&&x>=g&&y(g-1)},[x,g,l]);const v=j=>{t[j].sortKey&&(c===j?f(E=>E===0?1:0):(u(j),f(0)),l&&y(0))};function w(j){_(j),o==null||o(j),l&&y(0)}const k=M.useMemo(()=>{if(!l)return p;const j=x*l,E=(x+1)*l;return p.slice(j,E)},[p,x,l]);return r.jsxs("div",{className:"table",children:[a!==void 0&&r.jsxs("div",{className:"table__controls",children:[r.jsxs("div",{className:"table__filter",children:[r.jsx("input",{type:"text",placeholder:"Filter",value:d,onChange:j=>w(j.target.value),className:"table__filter__input"}),d&&r.jsx("span",{className:"table__filter__clear",onClick:()=>w(""),children:r.jsx(W,{icon:$s})})]}),l&&g>1&&r.jsx("div",{className:"table__pagination table__pagination--top",children:r.jsx(Ne,{currentPage:x,pageCount:g,onPageChange:y})})]}),a===void 0&&l&&g>1&&r.jsx("div",{className:"table__pagination table__pagination--top",children:r.jsx(Ne,{currentPage:x,pageCount:g,onPageChange:y})}),i!==void 0&&b?k.map(j=>r.jsx("div",{children:i(j)},n?n(j):void 0)):r.jsxs("table",{className:"table__table",children:[r.jsx("thead",{children:r.jsx("tr",{children:t.map((j,E)=>r.jsx("th",{onClick:()=>v(E),className:j.sortKey?"table--sortable":"",children:r.jsxs("div",{className:`table__header table__header--${j.align??"left"}`,children:[j.content,j.sortKey&&r.jsx("div",{className:"table__sort",children:[0,1].map(A=>r.jsx("div",{className:`table__sort__arrow table__sort__arrow--${A===0?"asc":"desc"} ${c===E&&m===A?"table__sort__arrow--active":""}`,children:A===0?r.jsx(W,{icon:Rs}):r.jsx(W,{icon:Cs})}))})]})},E))})}),r.jsx("tbody",{children:k.map(j=>{const E=s(j);return console.assert(E.length===t.length),r.jsx("tr",{children:E.map((A,D)=>r.jsx("td",{children:A},D))},n?n(j):void 0)})})]}),l&&g>1&&r.jsx("div",{className:"table__pagination table__pagination--bottom",children:r.jsx(Ne,{currentPage:x,pageCount:g,onPageChange:y})}),d&&p.length<e.length&&r.jsxs("div",{className:"table__filter-status",children:["Showing ",p.length," of ",e.length," rows",r.jsx("span",{className:"table__filter-status__clear",onClick:()=>{_(""),o==null||o("")},children:"[clear]"})]})]})}async function pt(t){try{return await(await fetch(`/api/${t}`)).json()}catch(e){return console.error(`Failed to fetch /api/${t}`,e),null}}async function ni(t){return await pt(`patches/${t}`)}async function Qt(){return await pt("available_patches/")}async function ii(){return await pt("collection_status/")}const es={not_collected:0,collected:1};function ri(){const t=U.c(13),[e,s]=M.useState(null);let i,n;if(t[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{ii().then(x=>{s(x)})},n=[],t[0]=i,t[1]=n):(i=t[0],n=t[1]),M.useEffect(i,n),e===null)return null;if(!e.length){let x;return t[2]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card__header",children:"Test collection"}),"No tests collected."]}),t[2]=x):x=t[2],x}let o,a;t[3]!==e?(o=[...e].sortKey(fi),a=Gt(o.map(ui)),t[3]=e,t[4]=o,t[5]=a):(o=t[4],a=t[5]);const l=a;let c;t[6]===Symbol.for("react.memo_cache_sentinel")?(c=[{content:"Test",sortKey:ci},{content:"Status",sortKey:ai,align:"center"}],t[6]=c):c=t[6];const u=c;let m;t[7]!==l.length?(m=x=>{const y=x.nodeid.slice(l.length);return[r.jsx("div",{style:{wordBreak:"break-all"},children:x.status=="collected"?r.jsx(_e,{to:`/tests/${encodeURIComponent(x.nodeid)}`,className:"test__link",children:y}):y}),r.jsx("div",{style:{textAlign:"center"},children:x.status==="collected"?r.jsx("div",{className:"pill pill__success",children:"Collected"}):r.jsxs("div",{className:"pill pill__neutral",children:["Not collected (",x.status_reason,")"]})})]},t[7]=l.length,t[8]=m):m=t[8];const f=m;let d;t[9]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("div",{className:"card__header",children:"Test collection status"}),t[9]=d):d=t[9];let _;return t[10]!==f||t[11]!==o?(_=r.jsxs("div",{className:"card",children:[d,r.jsx(_t,{headers:u,data:o,row:f,getKey:li,filterStrings:oi,perPage:100})]}),t[10]=f,t[11]=o,t[12]=_):_=t[12],_}function oi(t){return[t.nodeid,t.status==="collected"?"Collected":`Not collected (${t.status_reason})`]}function li(t){return t.database_key}function ai(t){return[es[t.status],t.status_reason]}function ci(t){return t.nodeid}function ui(t){return t.nodeid}function fi(t){return[es[t.status],t.status_reason,t.nodeid]}function mi(){const t=U.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("h1",{children:"Page not found!"}),t[0]=e):e=t[0],e}function di(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}Ae.registerLanguage("diff",di);function ts(t){const e=U.c(61),{nodeid:s}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={},e[0]=i):i=e[0];const[n,o]=M.useState(i),[a,l]=M.useState(!0),[c,u]=M.useState(null),[m,f]=M.useState(!1),d=M.useRef(null);let _,x;e[1]!==s?(_=()=>{ni(s).then(Y=>{Y&&o(Y),l(!1)})},x=[s],e[1]=s,e[2]=_,e[3]=x):(_=e[2],x=e[3]),M.useEffect(_,x);let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{Kt(d,!0)},e[4]=y):y=e[4];let b;if(e[5]!==c||e[6]!==n?(b=[n,c],e[5]=c,e[6]=n,e[7]=b):b=e[7],M.useEffect(y,b),a){let Y;return e[8]===Symbol.for("react.memo_cache_sentinel")?(Y=r.jsx("div",{className:"card",children:r.jsx("p",{children:"Loading patches..."})}),e[8]=Y):Y=e[8],Y}if(Object.values(n).every(_i)){let Y;return e[9]===Symbol.for("react.memo_cache_sentinel")?(Y=r.jsx("div",{className:"card",children:r.jsx("p",{children:"No patches for this test"})}),e[9]=Y):Y=e[9],Y}let h,p,g,v,w,k,j,E,A;if(e[10]!==s||e[11]!==c||e[12]!==n){const Y=new Map([["failing","Failing"],["covering","Covering"]]),z=c??Array.from(Y.keys()).find(H=>n[H]);v=n[z];let V;e[22]!==v?(V=async()=>{await navigator.clipboard.writeText(v),f(!0),setTimeout(()=>{f(!1)},2e3)},e[22]=v,e[23]=V):V=e[23],p=V;let B;e[24]!==z||e[25]!==s||e[26]!==v?(B=()=>{const H=new Blob([v],{type:"text/plain"}),q=URL.createObjectURL(H),Z=document.createElement("a");Z.href=q,Z.download=`${z}-${s.split("::").pop()}.patch`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(q)},e[24]=z,e[25]=s,e[26]=v,e[27]=B):B=e[27],g=B,w=d,e[28]===Symbol.for("react.memo_cache_sentinel")?(A={paddingTop:"10px",paddingBottom:"10px",display:"flex",fontSize:"1.05rem",fontWeight:"500"},e[28]=A):A=e[28],h=ye,j=z,E=u,k=Array.from(Y.entries()),e[10]=s,e[11]=c,e[12]=n,e[13]=h,e[14]=p,e[15]=g,e[16]=v,e[17]=w,e[18]=k,e[19]=j,e[20]=E,e[21]=A}else h=e[13],p=e[14],g=e[15],v=e[16],w=e[17],k=e[18],j=e[19],E=e[20],A=e[21];let D;e[29]!==n||e[30]!==k?(D=k.filter(Y=>{const[z]=Y;return n[z]}).map(hi),e[29]=n,e[30]=k,e[31]=D):D=e[31];let S;e[32]!==h||e[33]!==D||e[34]!==j||e[35]!==E?(S=r.jsx(h,{value:j,onChange:E,options:D}),e[32]=h,e[33]=D,e[34]=j,e[35]=E,e[36]=S):S=e[36];let C;e[37]!==S||e[38]!==A?(C=r.jsx("div",{style:A,children:S}),e[37]=S,e[38]=A,e[39]=C):C=e[39];const R=`patch__controls__control ${m?"patch__controls__control--success":""}`,T=m?It:Es;let L;e[40]!==T?(L=r.jsx(W,{icon:T}),e[40]=T,e[41]=L):L=e[41];let N;e[42]!==p||e[43]!==R||e[44]!==L?(N=r.jsx("div",{className:R,onClick:p,title:"Copy patch",children:L}),e[42]=p,e[43]=R,e[44]=L,e[45]=N):N=e[45];let $;e[46]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx(W,{icon:Ms}),e[46]=$):$=e[46];let F;e[47]!==g?(F=r.jsx("div",{className:"patch__controls__control",onClick:g,title:"Download patch",children:$}),e[47]=g,e[48]=F):F=e[48];let O;e[49]!==N||e[50]!==F?(O=r.jsxs("div",{className:"patch__controls",children:[N,F]}),e[49]=N,e[50]=F,e[51]=O):O=e[51];let P;e[52]!==v?(P=r.jsx("code",{className:"language-diff",children:v}),e[52]=v,e[53]=P):P=e[53];let X;e[54]!==O||e[55]!==P?(X=r.jsxs("pre",{className:"patch__pre",children:[O,P]}),e[54]=O,e[55]=P,e[56]=X):X=e[56];let I;return e[57]!==w||e[58]!==C||e[59]!==X?(I=r.jsxs("div",{ref:w,children:[C,X]}),e[57]=w,e[58]=C,e[59]=X,e[60]=I):I=e[60],I}function hi(t){const[e,s]=t;return{value:e,content:s}}function _i(t){return t===null}function pi(){const t=U.c(8),[e,s]=M.useState(null);let i,n;if(t[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{Qt().then(c=>{s(c)})},n=[],t[0]=i,t[1]=n):(i=t[0],n=t[1]),M.useEffect(i,n),e===null||e.length===0){let c;return t[2]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card__header",children:"Patches"}),r.jsx("p",{children:"No tests with patches present."})]}),t[2]=c):c=t[2],c}let o;t[3]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx("div",{className:"card__header",style:{marginBottom:"1rem"},children:"Patches"}),t[3]=o):o=t[3];let a;t[4]!==e?(a=e.map(gi),t[4]=e,t[5]=a):a=t[5];let l;return t[6]!==a?(l=r.jsxs("div",{className:"card",children:[o,a]}),t[6]=a,t[7]=l):l=t[7],l}function gi(t){return r.jsx(mt,{title:r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx("span",{children:t}),r.jsxs(_e,{to:`/tests/${encodeURIComponent(t)}`,className:"patches__test__link",style:{marginLeft:"8px"},children:["View test ",r.jsx(W,{icon:As})]})]}),headerClass:"patches__test",defaultState:"closed",children:r.jsx(ts,{nodeid:t})})}function xi(t){return t>=1e6?`${Math.floor(t/1e6)}M`:t>=1e3?`${Math.floor(t/1e3)}k`:t>0?t.toLocaleString():"0"}function yi({baseScale:t,viewportScale:e,tickCount:s,zoomState:i,orientation:n}){const o=t.range();let a;return n==="bottom"?a=[t.invert((o[0]-i.x)/i.scaleX),t.invert((o[1]-i.x)/i.scaleX)]:a=[t.invert(o[0]-i.y),t.invert(o[1]-i.y)],t.domain(a).range(o).ticks(s).filter(c=>c>=0).map(c=>({offset:e(c),name:xi(c)}))}function Ct(t){const e=U.c(27),{baseScale:s,viewportScale:i,orientation:n,tickCount:o,transform:a,zoomState:l}=t,c=o===void 0?5:o;let u;if(e[0]!==s||e[1]!==n||e[2]!==c||e[3]!==a||e[4]!==i||e[5]!==l){const m=yi({baseScale:s,viewportScale:i,tickCount:c,zoomState:l,orientation:n}),f=n==="bottom";let d;e[7]!==s||e[8]!==f?(d=f?[0,0,s.range()[1],0]:[0,0,0,s.range()[0]],e[7]=s,e[8]=f,e[9]=d):d=e[9];const[_,x,y,b]=d;let h;e[10]!==_||e[11]!==y||e[12]!==x||e[13]!==b?(h=r.jsx("line",{className:"domain",x1:_,y1:x,x2:y,y2:b,stroke:"currentColor",strokeWidth:1}),e[10]=_,e[11]=y,e[12]=x,e[13]=b,e[14]=h):h=e[14];const p=_,g=x,v=f?_:_-6,w=f?x+6:x;let k;e[15]!==p||e[16]!==g||e[17]!==v||e[18]!==w?(k=r.jsx("line",{className:"domain",x1:p,y1:g,x2:v,y2:w,stroke:"currentColor",strokeWidth:1}),e[15]=p,e[16]=g,e[17]=v,e[18]=w,e[19]=k):k=e[19];const j=y,E=b,A=f?y:y-6,D=f?b+6:b;let S;e[20]!==j||e[21]!==E||e[22]!==A||e[23]!==D?(S=r.jsx("line",{className:"domain",x1:j,y1:E,x2:A,y2:D,stroke:"currentColor",strokeWidth:1}),e[20]=j,e[21]=E,e[22]=A,e[23]=D,e[24]=S):S=e[24];let C;e[25]!==f?(C=(R,T)=>{const L=f?R.offset:0,N=f?0:R.offset,$=f?R.offset:-10,F=f?15:R.offset+4;return r.jsxs("g",{className:"tick",children:[r.jsx("line",{x1:L,y1:N,x2:L+(f?0:-6),y2:N+(f?6:0),stroke:"currentColor",strokeWidth:1}),r.jsx("text",{x:$,y:F,textAnchor:f?"middle":"end",fontSize:"12",fill:"currentColor",children:R.name})]},T)},e[25]=f,e[26]=C):C=e[26],u=r.jsxs("g",{className:`axis axis--${n}`,transform:a,children:[h,k,S,m.map(C)]}),e[0]=s,e[1]=n,e[2]=c,e[3]=a,e[4]=i,e[5]=l,e[6]=u}else u=e[6];return u}function bi(t){const e=U.c(13),{lines:s,viewportXScale:i,viewportYScale:n,xValue:o,yValue:a}=t;let l;if(e[0]!==s||e[1]!==i||e[2]!==n||e[3]!==o||e[4]!==a){let c;e[6]!==i||e[7]!==o?(c=d=>i(o(d)),e[6]=i,e[7]=o,e[8]=c):c=e[8];let u;e[9]!==n||e[10]!==a?(u=d=>n(a(d)),e[9]=n,e[10]=a,e[11]=u):u=e[11];const m=Fs().x(c).y(u);let f;e[12]===Symbol.for("react.memo_cache_sentinel")?(f={pointerEvents:"auto"},e[12]=f):f=e[12],l=r.jsx("g",{style:f,children:s.map(d=>{const _=m(d.reports)||"";return r.jsx("path",{d:_,fill:"none",stroke:d.color,className:`coverage-line ${d.isActive?"coverage-line__selected":""} ${d.status===Q.FAILED||d.status===Q.FAILED_FATALLY?"coverage-line__failing":""}`,style:{cursor:d.url?"pointer":"default"}},`line-${d.url||"no-url"}`)})}),e[0]=s,e[1]=i,e[2]=n,e[3]=o,e[4]=a,e[5]=l}else l=e[5];return l}class Oe{constructor(e,s,i,n,o,a,l){this.nodeid=e,this.linear_status_counts=s,this.linear_elapsed_time=i,this.behaviors=n,this.fingerprints=o,this.worker_uuid=a,this.timestamp_monotonic=l}static fromReport(e,s){return new Oe(e,s.status_counts,s.elapsed_time,s.behaviors,s.fingerprints,s.worker_uuid,s.timestamp_monotonic)}}const Se=new Map;function ue(t,e){const s=U.c(11);let i;s[0]!==e||s[1]!==t?(i=()=>{const f=sessionStorage.getItem(t);return f===null?e:JSON.parse(f)},s[0]=e,s[1]=t,s[2]=i):i=s[2];const[n,o]=M.useState(i);let a,l;s[3]!==t?(a=()=>(Se.has(t)||Se.set(t,new Set),Se.get(t).add(o),()=>{Se.get(t).delete(o)}),l=[t],s[3]=t,s[4]=a,s[5]=l):(a=s[4],l=s[5]),M.useEffect(a,l);let c;s[6]!==t?(c=function(d){sessionStorage.setItem(t,JSON.stringify(d)),Se.get(t).forEach(_=>_(d))},s[6]=t,s[7]=c):c=s[7];const u=c;let m;return s[8]!==u||s[9]!==n?(m=[n,u],s[8]=u,s[9]=n,s[10]=m):m=s[10],m}const vi=10,ji=1e3;function Si(t,e){const s=[],i=e.reports;if(i.length<2)return s;const n=t.baseX.range()[1],o=t.baseY.range()[0],a=0,l=i.map(h=>({x:t.viewportX(t.xValue(h)),y:t.viewportY(t.yValue(h))})),c=[];for(let h=1;h<l.length;h++){const{x:p,y:g}=l[h-1],{x:v,y:w}=l[h],k=Math.min(p,v),j=Math.max(p,v),E=Math.min(g,w),A=Math.max(g,w);if(j<-a||k>n+a||A<-a||E>o+a)continue;const S=Math.sqrt((v-p)**2+(w-g)**2);S!==0&&c.push({x1:p,y1:g,x2:v,y2:w,length:S})}if(c.length===0)return s;const u=1e-4,m=[];for(const h of c){const p=Math.abs(h.y1-h.y2)<=u;if(m.length>0){const g=m[m.length-1],v=Math.abs(g.y1-g.y2)<=u;if(p&&v&&Math.abs((g.y1+g.y2)/2-(h.y1+h.y2)/2)<=u){const k=(g.y1+g.y2)/2,j=Math.min(g.x1,h.x1,g.x2,h.x2),E=Math.max(g.x1,h.x1,g.x2,h.x2);g.x1=j,g.x2=E,g.y1=k,g.y2=k,g.length=Math.abs(E-j);continue}}m.push({...h})}const f=m.reduce((h,p)=>h+p.length,0);if(f<=0)return s;function d(h,p){const g=s[s.length-1];if(!g){s.push({x:h,y:p,line:e});return}const v=h-g.x,w=p-g.y;Math.sqrt(v*v+w*w)>=ss/2&&s.push({x:h,y:p,line:e})}if(m.length>0){d(m[0].x1,m[0].y1);for(let h=0;h<m.length;h++){const p=m[h];d(p.x2,p.y2)}}const _=vi,x=Math.floor(f/_),y=Math.max(0,ji-s.length),b=Math.min(y,x);for(let h=1;h<=b;h++){const p=h*_;if(p>=f)break;let g=0;for(let v=0;v<m.length;v++){const w=m[v],k=g+w.length;if(p<=k||v===m.length-1){const j=w.length>0?(p-g)/w.length:0,E=w.x1+(w.x2-w.x1)*j,A=w.y1+(w.y2-w.y1)*j;E>=0&&E<=n&&A>=0&&A<=o&&d(E,A);break}g=k}}return s}function wi(t){const e=new Map;for(const[n,o]of t.entries())o.length!==0&&e.set(n,{start:o[0].timestamp_monotonic,end:o[o.length-1].timestamp_monotonic});const s=Array.from(e.keys()),i=new Map;for(const n of s)i.set(n,[]);for(let n=0;n<s.length;n++){const o=s[n],a=e.get(o);for(let l=n+1;l<s.length;l++){const c=s[l],u=e.get(c);a.start<=u.end&&u.start<=a.end&&(i.get(o).push(c),i.get(c).push(o))}}return i}function Ni(t,e){if(e.length<=1)return e;const s=wi(t),i=[];i.push(e[0]);let n=e[0];for(let o=1;o<e.length;o++){const a=n,l=e[o],c=n.worker_uuid,u=l.worker_uuid;(l.behaviors<a.behaviors||l.fingerprints<a.fingerprints)&&s.get(c).includes(u)||(n=l,i.push(l))}return i}const ki={x:0,y:0,scaleX:1};function $i({zoomState:t,bounds:e,baseX:s,baseY:i}){if(!e)return t;let n={...t};if(e.xMin!==void 0||e.xMax!==void 0){const o=s.range(),a=o[0],l=o[1],c=s.invert((a-n.x)/n.scaleX),u=s.invert((l-n.x)/n.scaleX);e.xMin!==void 0&&c<e.xMin&&(n.x=a-s(e.xMin)*n.scaleX),e.xMax!==void 0&&u>e.xMax&&(n.x=l-s(e.xMax)*n.scaleX)}if(e.yMin!==void 0||e.yMax!==void 0){const o=i.range(),a=o[1],l=o[0];e.yMin!==void 0&&i.invert(l-n.y)<e.yMin&&(n.y=l-i(e.yMin)),e.yMax!==void 0&&i.invert(a-n.y)>e.yMax&&(n.y=a-i(e.yMax))}return n}function Ri(t,e,s,i,n,o,a,l=ki,c){const u=h=>i==="time"?h.linear_elapsed_time:h.linear_status_counts.sum(),m=h=>n==="behaviors"?h.behaviors:h.fingerprints,f=(e==="log"?yt():De()).domain([0,Me(t.map(h=>u(h)))||1]).range([0,o]),d=(s==="log"?yt():De()).domain([0,Me(t.map(h=>m(h)))||0]).range([a,0]),_=$i({zoomState:l,bounds:c,baseX:f,baseY:d}),x=f.range(),y=f.copy().range([x[0]*_.scaleX+_.x,x[1]*_.scaleX+_.x]),b=d.copy().range([d.range()[0]+_.y,d.range()[1]+_.y]);return{xValue:u,yValue:m,baseX:f,baseY:d,viewportX:y,viewportY:b,constrainedTransform:_}}const Pe={x:0,y:0,scaleX:1};function Ci(t){const e=U.c(29),{minScale:s,maxScale:i,wheelSensitivity:n,containerRef:o,onZoomEnd:a,onDragEnd:l}=t,c=s===void 0?1:s,u=i===void 0?50:i,m=n===void 0?.0013:n,f=a===void 0?Mi:a,d=l===void 0?Ei:l,[_,x]=M.useState(Pe),y=M.useRef(!1);let b;e[0]===Symbol.for("react.memo_cache_sentinel")?(b={x:0,y:0},e[0]=b):b=e[0];const h=M.useRef(b),p=M.useRef(null),g=M.useRef(!1),v=M.useRef(null);let w;e[1]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{p.current&&(cancelAnimationFrame(p.current),p.current=null)},e[1]=w):w=e[1];const k=w;let j;e[2]===Symbol.for("react.memo_cache_sentinel")?(j=P=>{k(),x(P)},e[2]=j):j=e[2];const E=j;let A;e[3]!==f||e[4]!==_?(A=()=>{k();const P=_,X=performance.now(),I=He(P.x,Pe.x),Y=He(P.y,Pe.y),z=He(P.scaleX,Pe.scaleX),V=B=>{const H=B-X,q=Math.min(H/500,1),Z=1-Math.pow(1-q,3),K={x:I(Z),y:Y(Z),scaleX:z(Z)};x(K),q<1?p.current=requestAnimationFrame(V):(p.current=null,requestAnimationFrame(()=>f()))};p.current=requestAnimationFrame(V)},e[3]=f,e[4]=_,e[5]=A):A=e[5];const D=A;let S;e[6]!==o.current||e[7]!==u||e[8]!==c||e[9]!==f||e[10]!==_||e[11]!==m?(S=()=>{const P=o.current;if(!P)return;const X=I=>{k();const Y=P.getBoundingClientRect(),z=I.clientX-Y.left;if(Math.abs(I.deltaX)>Math.abs(I.deltaY))return;const V=1-I.deltaY*m,B=Math.max(c,Math.min(u,_.scaleX*V)),H=B!==_.scaleX;if(H||g.current){if(I.preventDefault(),I.stopPropagation(),H){g.current=!0;const q=B/_.scaleX,G={x:z-(z-_.x)*q,y:_.y,scaleX:B};x(G)}v.current&&clearTimeout(v.current),v.current=window.setTimeout(()=>{g.current=!1,f(),v.current=null},150)}};return P.addEventListener("wheel",X,{passive:!1}),()=>{P.removeEventListener("wheel",X)}},e[6]=o.current,e[7]=u,e[8]=c,e[9]=f,e[10]=_,e[11]=m,e[12]=S):S=e[12];let C;e[13]!==u||e[14]!==c||e[15]!==_||e[16]!==m?(C=[_,c,u,m,k],e[13]=u,e[14]=c,e[15]=_,e[16]=m,e[17]=C):C=e[17],M.useEffect(S,C);let R;e[18]!==d?(R=P=>{if(P.button!==0)return;k(),y.current=!0,h.current={x:P.clientX,y:P.clientY};const X=Y=>{if(!y.current)return;const z=Y.clientX-h.current.x,V=Y.clientY-h.current.y;x(B=>({x:B.x+z,y:B.y+V,scaleX:B.scaleX})),h.current={x:Y.clientX,y:Y.clientY}},I=()=>{y.current=!1,document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",I),d()};document.addEventListener("mousemove",X),document.addEventListener("mouseup",I)},e[18]=d,e[19]=R):R=e[19];const T=R;let L;e[20]!==D?(L=P=>{P.preventDefault(),D()},e[20]=D,e[21]=L):L=e[21];const N=L;let $,F;e[22]===Symbol.for("react.memo_cache_sentinel")?($=()=>()=>{k(),v.current&&clearTimeout(v.current)},F=[k],e[22]=$,e[23]=F):($=e[22],F=e[23]),M.useEffect($,F);let O;return e[24]!==N||e[25]!==T||e[26]!==D||e[27]!==_?(O={transform:_,onMouseDown:T,onDoubleClick:N,resetZoom:D,setTransform:E},e[24]=N,e[25]=T,e[26]=D,e[27]=_,e[28]=O):O=e[28],O}function Ei(){}function Mi(){}const ss=24,st=270,Xe={zoomIdentity:Vs,select:Xt,scaleLinear:De,scaleOrdinal:Bt,interpolateViridis:Bs,interpolateRgb:Xs,schemeCategory10:Os};function Ai(t,e,s,i){let n=[];if(e==="linearized")n=Array.from(t.entries()).sortKey(([o,a])=>o).map(([o,a])=>{let l=Ti(a,s);return l=Ni(a.reports_by_worker,l),{nodeid:o,url:`/tests/${encodeURIComponent(o)}`,reports:l,color:i(o),isActive:!1,status:a.status}});else if(e==="individual"){let o=function(u){if(a.length<=1)return Et(.5);const m=(u-l)/(c-l);return Et(m)};const a=[];for(const u of t.values())for(const m of u.reports_by_worker.values())m.length>0&&a.push(m[0].timestamp);const l=an(a)??0,c=Me(a)??0;for(const[u,m]of t.entries())for(const f of m.reports_by_worker.values())f.length>0&&n.push({nodeid:u,url:`/tests/${encodeURIComponent(u)}`,reports:f.map(d=>Oe.fromReport(u,d)),color:o(f[0].timestamp),isActive:!1,status:m.status})}else if(e==="latest")for(const[o,a]of t.entries()){const l=Me(Array.from(a.reports_by_worker.values()),c=>c[0].elapsed_time);l&&n.push({nodeid:o,url:`/tests/${encodeURIComponent(o)}`,reports:l.map(c=>Oe.fromReport(o,c)),color:i(o),isActive:!1,status:a.status})}return n}const Et=Xe.scaleLinear().domain([0,1]).range(["rgb(255, 198, 128)","rgb(240, 136, 62)","rgb(219, 109, 40)","rgb(189, 86, 29)","rgb(155, 66, 21)","rgb(118, 45, 10)","rgb(90, 30, 2)"]).interpolate(Xe.interpolateRgb);var ot=(t=>(t.TOGETHER="linearized",t.SEPARATE="individual",t.LATEST="latest",t))(ot||{});function Ti(t,e){const s=t.linear_status_counts(e),i=t.linear_elapsed_time(e),n=[];for(let o=0;o<s.length;o++){const a=t.linear_reports[o];n.push({nodeid:t.nodeid,linear_status_counts:s[o],linear_elapsed_time:i[o],behaviors:a.behaviors,fingerprints:a.fingerprints,worker_uuid:a.worker_uuid,timestamp_monotonic:a.timestamp_monotonic})}return n}function ns(t){const e=U.c(4),{value:s,onChange:i}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=[{value:"log",content:"Log"},{value:"linear",content:"Linear"}],e[0]=n):n=e[0];let o;return e[1]!==i||e[2]!==s?(o=r.jsx(ye,{value:s,onChange:i,options:n}),e[1]=i,e[2]=s,e[3]=o):o=e[3],o}function Li(){const t=U.c(23),[e,s]=ue("graph_scale_x","log"),[i,n]=ue("graph_axis_x","time");let o,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(o={display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},a={display:"flex",alignItems:"center",gap:"0.5rem"},t[0]=o,t[1]=a):(o=t[0],a=t[1]);const l=i==="inputs"?Ce:Ee;let c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c={fontSize:"0.9rem"},t[2]=c):c=t[2];let u;t[3]!==l?(u=r.jsx(W,{icon:l,style:c}),t[3]=l,t[4]=u):u=t[4];const m=i==="inputs"?"Inputs":"Time";let f;t[5]!==u||t[6]!==m?(f=r.jsxs("div",{style:a,children:[u,m]}),t[5]=u,t[6]=m,t[7]=f):f=t[7];let d;t[8]===Symbol.for("react.memo_cache_sentinel")?(d={display:"flex",alignItems:"center",gap:"0.5rem"},t[8]=d):d=t[8];let _;t[9]!==e||t[10]!==s?(_=r.jsx(ns,{value:e,onChange:s}),t[9]=e,t[10]=s,t[11]=_):_=t[11];let x;t[12]===Symbol.for("react.memo_cache_sentinel")?(x={value:"inputs",content:r.jsx(W,{icon:Ce})},t[12]=x):x=t[12];let y;t[13]===Symbol.for("react.memo_cache_sentinel")?(y=[x,{value:"time",content:r.jsx(W,{icon:Ee})}],t[13]=y):y=t[13];let b;t[14]!==i||t[15]!==n?(b=r.jsx(ye,{value:i,onChange:n,options:y}),t[14]=i,t[15]=n,t[16]=b):b=t[16];let h;t[17]!==b||t[18]!==_?(h=r.jsxs("div",{style:d,children:[_,b]}),t[17]=b,t[18]=_,t[19]=h):h=t[19];let p;return t[20]!==h||t[21]!==f?(p=r.jsxs("div",{className:"coverage-graph__label coverage-graph__label--x",style:o,children:[f,h]}),t[20]=h,t[21]=f,t[22]=p):p=t[22],p}function Pi(){const t=U.c(23),[e,s]=ue("graph_scale_y","linear"),[i,n]=ue("graph_axis_y","fingerprints");let o,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(o={display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",zIndex:1},a={display:"flex",alignItems:"center",gap:"0.5rem"},t[0]=o,t[1]=a):(o=t[0],a=t[1]);let l;t[2]!==e||t[3]!==s?(l=r.jsx(ns,{value:e,onChange:s}),t[2]=e,t[3]=s,t[4]=l):l=t[4];let c;t[5]===Symbol.for("react.memo_cache_sentinel")?(c={value:"behaviors",content:r.jsx(W,{icon:$e})},t[5]=c):c=t[5];let u;t[6]===Symbol.for("react.memo_cache_sentinel")?(u=[c,{value:"fingerprints",content:r.jsx(W,{icon:Re})}],t[6]=u):u=t[6];let m;t[7]!==i||t[8]!==n?(m=r.jsx(ye,{value:i,onChange:n,options:u}),t[7]=i,t[8]=n,t[9]=m):m=t[9];let f;t[10]!==l||t[11]!==m?(f=r.jsxs("div",{style:a,children:[l,m]}),t[10]=l,t[11]=m,t[12]=f):f=t[12];let d;t[13]===Symbol.for("react.memo_cache_sentinel")?(d={display:"flex",alignItems:"center",gap:"0.5rem"},t[13]=d):d=t[13];const _=i==="behaviors"?$e:Re;let x;t[14]===Symbol.for("react.memo_cache_sentinel")?(x={fontSize:"0.9rem"},t[14]=x):x=t[14];let y;t[15]!==_?(y=r.jsx(W,{icon:_,style:x}),t[15]=_,t[16]=y):y=t[16];const b=i==="behaviors"?"Behaviors":"Fingerprints";let h;t[17]!==y||t[18]!==b?(h=r.jsxs("div",{style:d,children:[y,b]}),t[17]=y,t[18]=b,t[19]=h):h=t[19];let p;return t[20]!==h||t[21]!==f?(p=r.jsxs("div",{className:"coverage-graph__label coverage-graph__label--y",style:o,children:[f,h]}),t[20]=h,t[21]=f,t[22]=p):p=t[22],p}const Mt={linearized:{content:r.jsxs(r.Fragment,{children:[r.jsx(W,{icon:it})," Together"]}),mobileContent:r.jsx(W,{icon:it})},individual:{content:r.jsxs(r.Fragment,{children:[r.jsx(W,{icon:xt})," Separate"]}),mobileContent:r.jsx(W,{icon:xt})},latest:{content:r.jsxs(r.Fragment,{children:[r.jsx(W,{icon:gt})," Latest"]}),mobileContent:r.jsx(W,{icon:gt})}},fe={top:5,right:5,bottom:25,left:40};function Ii({tests:t,filterString:e="",workers_after:s=null,viewSetting:i}){const n=M.useRef(null),o=M.useRef(null),[a,l]=ue("graph_scale_x","log"),[c,u]=ue("graph_scale_y","linear"),[m,f]=ue("graph_axis_x","time"),[d,_]=ue("graph_axis_y","fingerprints"),x=Lt();ut();const y=Ue(),[b,h]=M.useState(800),[p,g]=M.useState(null),v=M.useRef(null),w=M.useRef(null),k=Xe.scaleOrdinal(Xe.schemeCategory10).domain(Array.from(t.keys())),j=M.useMemo(()=>Ai(t,i,s,k),[t,i,s]);let E=j;e&&(E=j.filter(N=>{var $;return($=N.url)==null?void 0:$.toLowerCase().includes(e.toLowerCase())}));let A=null;E.forEach(N=>{N.isActive=!1,p!=null&&N.nodeid===p.line.nodeid&&(i==="linearized"||N.reports[0].worker_uuid===(p==null?void 0:p.line.reports[0].worker_uuid))&&(N.isActive=!0,A=N)}),M.useEffect(()=>{if(n.current){const N=new ResizeObserver($=>{for(const F of $)h(F.contentRect.width)});return N.observe(n.current),()=>N.disconnect()}},[]);const D=b-fe.left-fe.right,S=st-fe.top-fe.bottom,C=E.flatMap(N=>N.reports);function R(){const N=E.flatMap($=>Si(v.current,$));o.current=Us().x($=>$.x).y($=>$.y).addAll(N)}const T=Ci({minScale:1,maxScale:50,containerRef:n,onZoomEnd:R,onDragEnd:R}),L=Ri(C,a,c,m,d,D,S,T.transform,{yMin:0});return v.current=L,M.useEffect(()=>{R()},[E,a,c,m,d,D,S]),r.jsx("div",{ref:N=>{n.current!==N&&(n.current=N)},style:{position:"relative",width:"100%",height:`${st}px`,userSelect:"none",cursor:A?"pointer":"default"},onMouseDown:N=>{w.current={x:N.clientX,y:N.clientY},T.onMouseDown(N)},onDoubleClick:T.onDoubleClick,onClick:N=>{const $=w.current;w.current=null;const F=5;$&&(Math.abs(N.clientX-$.x)>F||Math.abs(N.clientY-$.y)>F)||A&&A.url&&Ht(N,A.url,x)},onMouseMove:N=>{const $=N.currentTarget.getBoundingClientRect(),F=N.clientX-$.left-fe.left,O=N.clientY-$.top-fe.top;if(!o.current)return;const P=o.current.find(F,O,ss)||null;if(P){const X=P.line.reports;let I=X[0],Y=1/0;X.forEach(V=>{const B=L.viewportX(L.xValue(V)),H=L.viewportY(L.yValue(V)),q=Math.sqrt((F-B)**2+(O-H)**2);q<Y&&(Y=q,I=V)});const z=r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[r.jsx("div",{style:{fontWeight:600,marginBottom:2},children:ft(I.nodeid)}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[r.jsx(W,{icon:$e}),r.jsx("span",{children:I.behaviors.toLocaleString()})]}),r.jsx("span",{children:"/"}),r.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[r.jsx(W,{icon:Re}),r.jsx("span",{children:I.fingerprints.toLocaleString()})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[r.jsx(W,{icon:Ce}),r.jsx("span",{children:I.linear_status_counts.sum().toLocaleString()})]}),r.jsx("span",{children:"/"}),r.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[r.jsx(W,{icon:Ee}),r.jsxs("span",{children:[I.linear_elapsed_time.toFixed(1),"s"]})]})]})]});y.showTooltip(z,N.clientX,N.clientY,"coverage-graph"),g({line:P.line,report:I})}else g(null),y.hideTooltip("coverage-graph")},onMouseLeave:()=>{g(null),y.hideTooltip("coverage-graph")},children:r.jsxs("svg",{className:"coverage-graph__svg",style:{position:"absolute",top:0,left:0,width:"100%",height:`${st}px`,pointerEvents:"none"},children:[r.jsx("defs",{children:r.jsx("clipPath",{id:"clip-content",children:r.jsx("rect",{y:-2,width:D,height:S+4})})}),r.jsxs("g",{transform:`translate(${fe.left}, ${fe.top})`,children:[r.jsxs("g",{clipPath:"url(#clip-content)",children:[r.jsx(bi,{lines:E,viewportXScale:L.viewportX,viewportYScale:L.viewportY,xValue:L.xValue,yValue:L.yValue,navigate:x}),p&&r.jsx("circle",{cx:L.viewportX(L.xValue(p.report)),cy:L.viewportY(L.yValue(p.report)),r:5,fill:p.line.color,stroke:"#fff",strokeWidth:1.5})]}),r.jsx(Ct,{baseScale:L.baseX,viewportScale:L.viewportX,orientation:"bottom",transform:`translate(0, ${L.baseY.range()[0]})`,isLogScale:a==="log",zoomState:L.constrainedTransform}),r.jsx(Ct,{baseScale:L.baseY,viewportScale:L.viewportY,orientation:"left",isLogScale:c==="log",zoomState:L.constrainedTransform})]})]})})}function Di(){const t=U.c(2);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=["rgb(255, 198, 128)","rgb(240, 136, 62)","rgb(219, 109, 40)","rgb(189, 86, 29)","rgb(155, 66, 21)","rgb(118, 45, 10)","rgb(90, 30, 2)"],t[0]=e):e=t[0];const s=e;let i;return t[1]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsxs("div",{className:"coverage-graph__color-legend",children:[r.jsx("span",{children:"Older"}),r.jsx("div",{style:{display:"flex",gap:"2px"},children:s.map(Fi)}),r.jsx("span",{children:"Newer"})]}),t[1]=i):i=t[1],i}function Fi(t,e){return r.jsx("div",{className:"coverage-graph__color-legend__square",style:{backgroundColor:t}},e)}function is(t){const e=U.c(38),{tests:s,filterString:i,workers_after:n,workerViews:o,workerViewSetting:a}=t,l=i===void 0?"":i,c=n===void 0?null:n;let u;e[0]!==o?(u=o===void 0?["linearized","individual","latest"]:o,e[0]=o,e[1]=u):u=e[1];const m=u;let[f,d]=ue(a,"linearized");const x=ee(Array.from(s.values()).flatMap(Xi)).size==1;x&&(f="linearized");let y;e[2]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx("div",{className:"card__header",style:{marginBottom:"1rem"},children:"Coverage"}),e[2]=y):y=e[2];const b=f==="individual"?"space-between":"flex-end",h=f==="individual"?"center":"default";let p;e[3]!==b||e[4]!==h?(p={display:"flex",justifyContent:b,alignItems:h,marginBottom:"1rem"},e[3]=b,e[4]=h,e[5]=p):p=e[5];let g;e[6]!==f?(g=f==="individual"&&r.jsx(Di,{}),e[6]=f,e[7]=g):g=e[7];const v=f,w=d;let k;e[8]!==m?(k=m.map(Oi),e[8]=m,e[9]=k):k=e[9];let j;e[10]!==x||e[11]!==d||e[12]!==k||e[13]!==f?(j=r.jsx(ye,{value:v,onChange:w,options:k,disabled:x}),e[10]=x,e[11]=d,e[12]=k,e[13]=f,e[14]=j):j=e[14];let E;e[15]!==x?(E=x&&r.jsx("span",{className:"tooltip__text",children:"Switching display mode requires multiple workers"}),e[15]=x,e[16]=E):E=e[16];let A;e[17]!==j||e[18]!==E?(A=r.jsxs("span",{className:"tooltip",children:[j,E]}),e[17]=j,e[18]=E,e[19]=A):A=e[19];let D;e[20]!==A||e[21]!==p||e[22]!==g?(D=r.jsxs("div",{style:p,children:[g,A]}),e[20]=A,e[21]=p,e[22]=g,e[23]=D):D=e[23];let S,C;e[24]===Symbol.for("react.memo_cache_sentinel")?(S={marginRight:"15px",flex:1,height:"auto"},C=r.jsx(Pi,{}),e[24]=S,e[25]=C):(S=e[24],C=e[25]);let R;e[26]!==l||e[27]!==s||e[28]!==f||e[29]!==c?(R=r.jsx(Ii,{tests:s,viewSetting:f,workers_after:c,filterString:l}),e[26]=l,e[27]=s,e[28]=f,e[29]=c,e[30]=R):R=e[30];let T,L;e[31]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx("div",{}),L=r.jsx(Li,{}),e[31]=T,e[32]=L):(T=e[31],L=e[32]);let N;e[33]!==R?(N=r.jsx("div",{className:"coverage-graph__container",children:r.jsxs("div",{className:"coverage-graph__grid",style:S,children:[C,R,T,L]})}),e[33]=R,e[34]=N):N=e[34];let $;return e[35]!==D||e[36]!==N?($=r.jsxs("div",{className:"card",children:[y,D,N]}),e[35]=D,e[36]=N,e[37]=$):$=e[37],$}function Oi(t){return{value:t,content:Mt[t].content,mobileContent:Mt[t].mobileContent}}function Xi(t){return Array.from(t.reports_by_worker.values())}const xe={[Q.FAILED_FATALLY]:"Failed fatally",[Q.FAILED]:"Failed",[Q.SHRINKING]:"Shrinking",[Q.RUNNING]:"Running",[Q.SKIPPED_DYNAMICALLY]:"Skipped dynamically",[Q.WAITING]:"Waiting"};function lt(t){const e=U.c(3),{status:s}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={textAlign:"center"},e[0]=i):i=e[0];let n;return e[1]!==s?(n=r.jsx("span",{style:i,children:s===Q.FAILED_FATALLY?r.jsx("span",{className:"pill pill__failure",children:xe[s]}):s===Q.FAILED?r.jsx("span",{className:"pill pill__failure",children:xe[s]}):s===Q.SHRINKING?r.jsx("span",{className:"pill pill__warning",children:xe[s]}):s===Q.RUNNING?r.jsx("span",{className:"pill pill__success",children:xe[s]}):r.jsx("span",{className:"pill pill__neutral",children:xe[s]})}),e[1]=s,e[2]=n):n=e[2],n}function ce(t){const e=U.c(5),{content:s,tooltip:i}=t;let n;e[0]!==i?(n=r.jsx("div",{className:"tooltip__text",children:i}),e[0]=i,e[1]=n):n=e[1];let o;return e[2]!==s||e[3]!==n?(o=r.jsxs("span",{className:"tooltip tooltip--underline",children:[s,n]}),e[2]=s,e[3]=n,e[4]=o):o=e[4],o}function rs(t){const e=Math.floor(t/3600),s=Math.floor(t%3600/60),i=Math.floor(t%60);return`${e>0?`${e}:${s.toString().padStart(2,"0")}`:s}:${i.toString().padStart(2,"0")}`}function os(t){const e=t.ninputs(null),s=t.elapsed_time(null);return s===0?null:e/s}function Bi(t){return we(parseFloat(t.toPrecision(3)))}function Vi(t){return(t*100).toFixed(0)}function we(t){if(!Number.isFinite(t))return String(t);const e=t<0?"-":"",s=Math.abs(t);if(s<1e3)return`${e}${s.toLocaleString()}`;const i=["k","M","B"],n=Math.min(Math.floor(Math.log10(s)/3),i.length),o=1e3**n,a=s/o,l=a<100?1:0,c=a.toFixed(l);return`${e}${c}${i[n-1]}`}function at(t){if(t.linear_reports.length===0)return{inputs:"",behaviors:"",fingerprints:"",executions:"",inputsSinceBranch:"",timeSpent:"",stability:""};const e=os(t);return{inputs:we(t.ninputs(null)),behaviors:we(t.behaviors),fingerprints:we(t.fingerprints),executions:e===null?"":`${Bi(e)}/s`,inputsSinceBranch:t.since_new_behavior?we(t.since_new_behavior):"",timeSpent:rs(t.elapsed_time(null)),stability:t.stability===null?"":t.stability==1?r.jsx(ce,{content:r.jsx(W,{icon:It}),tooltip:"100% stability"}):`${Vi(t.stability)}%`}}Ae.registerLanguage("python",Jt);function Ui(t){const e=U.c(3),{failure:s}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={textAlign:"center"},e[0]=i):i=e[0];let n;return e[1]!==s.state?(n=r.jsx("span",{style:i,children:s.state==="shrunk"?r.jsx("span",{className:"pill pill__neutral",children:"Fully shrunk"}):s.state==="unshrunk"?r.jsx("span",{className:"pill pill__neutral",children:"Still shrinking..."}):r.jsx(r.Fragment,{})}),e[1]=s.state,e[2]=n):n=e[2],n}function Yi(t){const e=U.c(22),{failure:s}=t;let i,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={display:"flex",alignItems:"center",gap:"0.7rem",marginBottom:"1rem"},n=r.jsx("div",{className:"failure__title",children:"Failure"}),e[0]=i,e[1]=n):(i=e[0],n=e[1]);let o;e[2]!==s?(o=r.jsxs("div",{style:i,children:[n,r.jsx(Ui,{failure:s})]}),e[2]=s,e[3]=o):o=e[3];let a;e[4]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("div",{className:"failure__item__subtitle",children:"Failing input"}),e[4]=a):a=e[4];let l;e[5]!==s.observation.representation?(l=r.jsx("pre",{children:r.jsx("code",{className:"language-python",children:s.observation.representation})}),e[5]=s.observation.representation,e[6]=l):l=e[6];let c;e[7]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx("div",{className:"failure__item__subtitle",children:"Traceback"}),e[7]=c):c=e[7];let u;e[8]!==s.observation.metadata?(u=s.observation.metadata.get("traceback"),e[8]=s.observation.metadata,e[9]=u):u=e[9];let m;e[10]!==u?(m=r.jsx("pre",{children:r.jsx("code",{className:"language-python",children:u})}),e[10]=u,e[11]=m):m=e[11];let f;e[12]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("div",{className:"failure__item__subtitle",children:"Reproduction"}),e[12]=f):f=e[12];const d=s.observation.metadata.get("reproduction_decorator")+`
def ${ft(s.observation.property)}(...): ...`;let _;e[13]!==d?(_=r.jsx("pre",{children:r.jsx("code",{className:"language-python",children:d})}),e[13]=d,e[14]=_):_=e[14];let x;e[15]!==_||e[16]!==l||e[17]!==m?(x=r.jsxs("div",{className:"failure__item",children:[a,l,c,m,f,_]}),e[15]=_,e[16]=l,e[17]=m,e[18]=x):x=e[18];let y;return e[19]!==x||e[20]!==o?(y=r.jsxs("div",{className:"card",children:[o,x]}),e[19]=x,e[20]=o,e[21]=y):y=e[21],y}function Wi(t){const e=U.c(5),{failure:s}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("div",{className:"failure__title",children:"Fatal failure"}),e[0]=i):i=e[0];let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("div",{className:"failure__item__subtitle",children:"Traceback"}),e[1]=n):n=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o={whiteSpace:"pre-wrap"},e[2]=o):o=e[2];let a;return e[3]!==s.traceback?(a=r.jsxs("div",{className:"card",children:[i,r.jsxs("div",{className:"failure__item",children:[n,r.jsx("pre",{children:r.jsx("code",{className:"language-python",style:o,children:s.traceback})})]})]}),e[3]=s.traceback,e[4]=a):a=e[4],a}function zi(){const t=U.c(55),{nodeid:e}=ds(),{tests:s}=ht(e),i=M.useRef(null),[n,o]=M.useState(null);let a,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{Qt().then(I=>{o(I)})},l=[],t[0]=a,t[1]=l):(a=t[0],l=t[1]),M.useEffect(a,l);let c;if(t[2]!==e||t[3]!==s){const I=s.get(e);c=I?new Fe(I.database_key,I.nodeid,I.rolling_observations,I.corpus_observations,I.failures,I.fatal_failure,I.reports_by_worker,I.stability):null,t[2]=e,t[3]=s,t[4]=c}else c=t[4];const u=c;let m,f;if(t[5]!==u?(m=()=>{u&&Kt(i)},f=[u],t[5]=u,t[6]=m,t[7]=f):(m=t[6],f=t[7]),M.useEffect(m,f),!e||!u){let I;return t[8]===Symbol.for("react.memo_cache_sentinel")?(I=r.jsx("div",{children:"Test not found"}),t[8]=I):I=t[8],I}let d;t[9]!==u?(d=at(u),t[9]=u,t[10]=d):d=t[10];const _=d;let x;t[11]===Symbol.for("react.memo_cache_sentinel")?(x={content:r.jsx(ce,{content:r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:Ce})}),tooltip:"Number of inputs"})},t[11]=x):x=t[11];let y;t[12]===Symbol.for("react.memo_cache_sentinel")?(y={content:r.jsx(ce,{content:r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:$e})}),tooltip:"Number of behaviors (typically branches) found"})},t[12]=y):y=t[12];let b;t[13]===Symbol.for("react.memo_cache_sentinel")?(b={content:r.jsx(ce,{content:r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:Re})}),tooltip:"Number of fingerprints (sets of behaviors) found"})},t[13]=b):b=t[13];let h;t[14]===Symbol.for("react.memo_cache_sentinel")?(h={content:r.jsx(ce,{content:r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:Dt})}),tooltip:"Inputs per second"})},t[14]=h):h=t[14];let p;t[15]===Symbol.for("react.memo_cache_sentinel")?(p={content:r.jsx(ce,{content:r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:Ft})}),tooltip:"Number of inputs since a new behavior"})},t[15]=p):p=t[15];let g;t[16]===Symbol.for("react.memo_cache_sentinel")?(g={content:r.jsx(ce,{content:r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:Ee})}),tooltip:"Total time spent running"})},t[16]=g):g=t[16];let v;t[17]===Symbol.for("react.memo_cache_sentinel")?(v=[x,y,b,h,p,g,{content:r.jsx(ce,{content:r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:Ot})}),tooltip:"Coverage stability (percentage of inputs with deterministic coverage when replayed)"})}],t[17]=v):v=t[17];const w=v;let k;t[18]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsxs(_e,{to:"/",className:"back-link",children:[r.jsx(W,{icon:Ts})," All tests"]}),t[18]=k):k=t[18];let j,E;t[19]===Symbol.for("react.memo_cache_sentinel")?(j={display:"flex",alignItems:"center",gap:"0.7rem"},E={wordBreak:"break-all",fontSize:"1.5rem",fontWeight:"bold"},t[19]=j,t[20]=E):(j=t[19],E=t[20]);let A;t[21]!==e?(A=r.jsx("span",{style:E,children:e}),t[21]=e,t[22]=A):A=t[22];let D;t[23]!==u.status?(D=r.jsx(lt,{status:u.status}),t[23]=u.status,t[24]=D):D=t[24];let S;t[25]!==A||t[26]!==D?(S=r.jsxs("div",{style:j,children:[A,D]}),t[25]=A,t[26]=D,t[27]=S):S=t[27];let C;t[28]===Symbol.for("react.memo_cache_sentinel")?(C={paddingTop:"1rem",paddingBottom:"1rem"},t[28]=C):C=t[28];let R;t[29]!==_?(R=r.jsx("div",{style:C,children:r.jsx(_t,{headers:w,data:[_],row:Hi})}),t[29]=_,t[30]=R):R=t[30];let T;t[31]!==S||t[32]!==R?(T=r.jsxs("div",{className:"card",children:[S,R]}),t[31]=S,t[32]=R,t[33]=T):T=t[33];let L;t[34]!==e||t[35]!==u?(L=new Map([[e,u]]),t[34]=e,t[35]=u,t[36]=L):L=t[36];let N;t[37]!==L?(N=r.jsx(is,{tests:L,workerViewSetting:"graph_worker_view_test"}),t[37]=L,t[38]=N):N=t[38];let $;t[39]!==u.normalFailures?($=u.normalFailures.map(Ki),t[39]=u.normalFailures,t[40]=$):$=t[40];let F;t[41]!==u.fatal_failure?(F=u.fatal_failure&&r.jsx(Wi,{failure:u.fatal_failure}),t[41]=u.fatal_failure,t[42]=F):F=t[42];let O;t[43]!==u?(O=r.jsx(Bn,{test:u}),t[43]=u,t[44]=O):O=t[44];let P;t[45]!==e||t[46]!==n?(P=(n==null?void 0:n.includes(e))&&r.jsx("div",{className:"card",children:r.jsx(mt,{title:"Patches",defaultState:"closed",headerClass:"card__header",children:r.jsx(ts,{nodeid:e})})}),t[45]=e,t[46]=n,t[47]=P):P=t[47];let X;return t[48]!==T||t[49]!==N||t[50]!==$||t[51]!==F||t[52]!==O||t[53]!==P?(X=r.jsxs("div",{ref:i,children:[k,T,N,$,F,O,P]}),t[48]=T,t[49]=N,t[50]=$,t[51]=F,t[52]=O,t[53]=P,t[54]=X):X=t[54],X}function Ki(t){return r.jsx(Yi,{failure:t})}function Hi(t){return[r.jsx("div",{style:{fontVariantNumeric:"tabular-nums"},children:t.inputs}),r.jsx("div",{style:{fontVariantNumeric:"tabular-nums"},children:t.behaviors}),r.jsx("div",{style:{fontVariantNumeric:"tabular-nums"},children:t.fingerprints}),r.jsx("div",{style:{fontVariantNumeric:"tabular-nums"},children:t.executions}),r.jsx("div",{style:{fontVariantNumeric:"tabular-nums"},children:t.inputsSinceBranch}),r.jsx("div",{style:{fontVariantNumeric:"tabular-nums"},children:t.timeSpent}),r.jsx("div",{style:{fontVariantNumeric:"tabular-nums"},children:t.stability})]}function de(t){const e=U.c(5),{icon:s,tooltip:i}=t;let n;e[0]!==s?(n=r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:s})}),e[0]=s,e[1]=n):n=e[1];let o;return e[2]!==n||e[3]!==i?(o=r.jsx(ce,{content:n,tooltip:i}),e[2]=n,e[3]=i,e[4]=o):o=e[4],o}function ge(t){const e=U.c(5),{icon:s,value:i}=t;let n;e[0]!==i?(n=r.jsx("span",{className:"table__inline-statistic__value",children:i}),e[0]=i,e[1]=n):n=e[1];let o;return e[2]!==s||e[3]!==n?(o=r.jsxs("div",{className:"table__inline-statistic",children:[s,n]}),e[2]=s,e[3]=n,e[4]=o):o=e[4],o}function Gi(t){const e=U.c(22),{tests:s,onFilterChange:i}=t;let n,o;e[0]!==s?(n=Array.from(s).sortKey(ar).map(lr),o=Gt(n.map(or)),e[0]=s,e[1]=n,e[2]=o):(n=e[1],o=e[2]);const a=o;let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(de,{icon:Ce,tooltip:"Number of inputs"}),e[3]=l):l=e[3];const c=l;let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(de,{icon:$e,tooltip:"Number of behaviors (typically branches) found"}),e[4]=u):u=e[4];const m=u;let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(de,{icon:Re,tooltip:"Number of fingerprints (sets of behaviors) found"}),e[5]=f):f=e[5];const d=f;let _;e[6]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx(de,{icon:Dt,tooltip:"Inputs per second"}),e[6]=_):_=e[6];const x=_;let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(de,{icon:Ft,tooltip:"Number of inputs since a new behavior"}),e[7]=y):y=e[7];const b=y;let h;e[8]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(de,{icon:Ee,tooltip:"Total time spent running"}),e[8]=h):h=e[8];const p=h;let g;e[9]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(de,{icon:Ot,tooltip:"Coverage stability (percentage of inputs with deterministic coverage when replayed)"}),e[9]=g):g=e[9];const v=g;let w;e[10]===Symbol.for("react.memo_cache_sentinel")?(w=[{content:"Test",sortKey:rr},{content:"Status",sortKey:ir,align:"center"},{content:c,align:"right",sortKey:nr},{content:m,align:"right",sortKey:sr},{content:d,align:"right",sortKey:tr},{content:x,align:"right",sortKey:er},{content:b,align:"right",sortKey:Qi},{content:p,align:"right",sortKey:Zi},{content:v,align:"right",sortKey:Ji}],e[10]=w):w=e[10];const k=w;let j;e[11]!==a.length?(j=L=>{const N=at(L),$=L.nodeid.slice(a.length);return[r.jsx(_e,{to:`/tests/${encodeURIComponent(L.nodeid)}`,className:"test__link",style:{wordBreak:"break-all"},children:$}),r.jsx("div",{style:{textAlign:"center"},children:r.jsx(lt,{status:L.status})}),r.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:N.inputs}),r.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:N.behaviors}),r.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:N.fingerprints}),r.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:N.executions}),r.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:N.inputsSinceBranch}),r.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:N.timeSpent}),r.jsx("div",{style:{textAlign:"center",fontVariantNumeric:"tabular-nums"},children:N.stability})]},e[11]=a.length,e[12]=j):j=e[12];const E=j;let A;e[13]!==a.length?(A=function(N){const $=at(N),F=N.nodeid.slice(a.length);return r.jsxs("div",{className:"table__mobile-row",children:[r.jsxs("div",{className:"table__mobile-row__header",children:[r.jsx(_e,{to:`/tests/${encodeURIComponent(N.nodeid)}`,className:"test__link",style:{wordBreak:"break-all"},children:F}),r.jsx(lt,{status:N.status})]}),r.jsxs("div",{className:"table__mobile-row__statistics",children:[r.jsx(ge,{icon:c,value:$.inputs}),r.jsx(ge,{icon:m,value:$.behaviors}),r.jsx(ge,{icon:x,value:$.executions}),r.jsx(ge,{icon:b,value:$.inputsSinceBranch}),r.jsx(ge,{icon:p,value:$.timeSpent}),r.jsx(ge,{icon:v,value:$.stability})]})]})},e[13]=a.length,e[14]=A):A=e[14];const D=A;let S;e[15]===Symbol.for("react.memo_cache_sentinel")?(S=function(N){return[N.nodeid,xe[N.status]]},e[15]=S):S=e[15];const C=S;let R;e[16]===Symbol.for("react.memo_cache_sentinel")?(R=r.jsx("div",{className:"card__header",children:"Tests"}),e[16]=R):R=e[16];let T;return e[17]!==D||e[18]!==i||e[19]!==E||e[20]!==n?(T=r.jsxs("div",{className:"card",children:[R,r.jsx(_t,{headers:k,data:n,row:E,mobileRow:D,getKey:qi,filterStrings:C,onFilterChange:i,perPage:50})]}),e[17]=D,e[18]=i,e[19]=E,e[20]=n,e[21]=T):T=e[21],T}function qi(t){return t.database_key??void 0}function Ji(t){return t.stability??0}function Zi(t){return t.elapsed_time(null)}function Qi(t){return t.since_new_behavior??0}function er(t){return os(t)??-1}function tr(t){return t.fingerprints}function sr(t){return t.behaviors}function nr(t){return t.ninputs(null)}function ir(t){return t.status}function rr(t){return t.nodeid}function or(t){return t.nodeid}function lr(t){const[,e]=t;return e}function ar(t){const[e,s]=t,i=s.ninputs(null);return[s.status,i!=null?-i:-1,e]}function cr(){const t=U.c(9),{tests:e}=ht(),[s,i]=M.useState("");let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=[ot.TOGETHER,ot.LATEST],t[0]=n):n=t[0];let o;t[1]!==s||t[2]!==e?(o=r.jsx(is,{tests:e,filterString:s,workerViews:n,workerViewSetting:"graph_worker_view_tests"}),t[1]=s,t[2]=e,t[3]=o):o=t[3];let a;t[4]!==e?(a=r.jsx(Gi,{tests:e,onFilterChange:i}),t[4]=e,t[5]=a):a=t[5];let l;return t[6]!==o||t[7]!==a?(l=r.jsxs("div",{className:"dashboard",children:[o,a]}),t[6]=o,t[7]=a,t[8]=l):l=t[8],l}function ur(t){const e=U.c(43),{min:s,max:i,value:n,onChange:o,step:a}=t,l=a===void 0?1:a,[c,u]=M.useState(null),m=M.useRef(null);console.assert(s<=i,`min: ${s} max: ${i}`);const[f,d]=n,_=i-s,x=_===0?0:(f-s)/_*100,y=_===0?100:(d-s)/_*100,b=x<50?1:2,h=y<50?2:1;let p;e[0]!==i||e[1]!==s||e[2]!==_||e[3]!==l?(p=B=>{if(!m.current)return s;const H=m.current.getBoundingClientRect(),q=Math.max(0,Math.min(100,(B-H.left)/H.width*100)),Z=s+q/100*_,K=Math.round(Z/l)*l;return Math.max(s,Math.min(i,K))},e[0]=i,e[1]=s,e[2]=_,e[3]=l,e[4]=p):p=e[4];const g=p;let v;e[5]===Symbol.for("react.memo_cache_sentinel")?(v=B=>H=>{H.preventDefault(),u(B)},e[5]=v):v=e[5];const w=v;let k;e[6]!==c||e[7]!==g||e[8]!==d||e[9]!==f||e[10]!==o?(k=B=>{if(!c)return;const H=g(B.clientX);o(c==="min"?[Math.min(H,d),d]:[f,Math.max(H,f)])},e[6]=c,e[7]=g,e[8]=d,e[9]=f,e[10]=o,e[11]=k):k=e[11];const j=k;let E;e[12]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{u(null)},e[12]=E):E=e[12];const A=E;let D;e[13]!==c||e[14]!==g||e[15]!==d||e[16]!==f||e[17]!==o?(D=B=>{if(c)return;const H=g(B.clientX),q=Math.abs(H-f),Z=Math.abs(H-d);q<Z?(o([Math.min(H,d),d]),u("min")):(o([f,Math.max(H,f)]),u("max"))},e[13]=c,e[14]=g,e[15]=d,e[16]=f,e[17]=o,e[18]=D):D=e[18];const S=D;let C,R;e[19]!==c||e[20]!==j?(C=()=>c?(document.addEventListener("mousemove",j),document.addEventListener("mouseup",A),()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",A)}):fr,R=[c,j,A],e[19]=c,e[20]=j,e[21]=C,e[22]=R):(C=e[21],R=e[22]),M.useEffect(C,R);const T=`${x}%`,L=`${y-x}%`;let N;e[23]!==L||e[24]!==T?(N=r.jsx("div",{className:"range-slider__range",style:{left:T,width:L}}),e[23]=L,e[24]=T,e[25]=N):N=e[25];const $=`${x}%`;let F;e[26]!==$||e[27]!==b?(F={left:$,zIndex:b},e[26]=$,e[27]=b,e[28]=F):F=e[28];let O;e[29]===Symbol.for("react.memo_cache_sentinel")?(O=w("min"),e[29]=O):O=e[29];let P;e[30]!==F?(P=r.jsx("div",{className:"range-slider__thumb range-slider__thumb--min",style:F,onMouseDown:O}),e[30]=F,e[31]=P):P=e[31];const X=`${y}%`;let I;e[32]!==X||e[33]!==h?(I={left:X,zIndex:h},e[32]=X,e[33]=h,e[34]=I):I=e[34];let Y;e[35]===Symbol.for("react.memo_cache_sentinel")?(Y=w("max"),e[35]=Y):Y=e[35];let z;e[36]!==I?(z=r.jsx("div",{className:"range-slider__thumb range-slider__thumb--max",style:I,onMouseDown:Y}),e[36]=I,e[37]=z):z=e[37];let V;return e[38]!==S||e[39]!==N||e[40]!==P||e[41]!==z?(V=r.jsx("div",{className:"range-slider",children:r.jsx("div",{className:"range-slider__container",children:r.jsxs("div",{ref:m,className:"range-slider__track",onMouseDown:S,children:[N,P,z]})})}),e[38]=S,e[39]=N,e[40]=P,e[41]=z,e[42]=V):V=e[42],V}function fr(){}class mr{constructor(e,s){this.uuid=e,this.segments=s}visibleSegments(e){return this.segments.filter(s=>s.end>=e[0]&&s.start<=e[1])}}const nt=[{label:"Latest",duration:null},{label:"1 hour",duration:1*60*60},{label:"1 day",duration:24*60*60},{label:"7 days",duration:7*24*60*60},{label:"1 month",duration:30*24*60*60},{label:"3 months",duration:90*24*60*60}];function Be(t){return new Date(t*1e3).toLocaleString()}const dr=5*60;function hr(t){if(console.assert(t.every((n,o)=>o===0||n.start>=t[o-1].start)),t.length==0)return[];let e=[],s=t[0].start,i=t[0].end;for(const n of t)n.start>i+dr&&(e.push([s,i]),s=n.start),i=Math.max(i,n.end);return e.push([s,i]),e}function _r(t){let e=0;for(let o=0;o<t.length;o++)e=(e<<5)-e+t.charCodeAt(o)&4294967295;const s=Math.abs(e)%360,i=45+Math.abs(e>>8)%30,n=45+Math.abs(e>>16)%20;return`hsl(${s}, ${i}%, ${n}%)`}function Ie(t){const e=U.c(7),{label:s,value:i}=t;let n;e[0]!==s?(n=r.jsx("span",{className:"workers__worker__details__label",children:s}),e[0]=s,e[1]=n):n=e[1];let o;e[2]!==i?(o=r.jsx("span",{className:"workers__worker__details__value",children:i}),e[2]=i,e[3]=o):o=e[3];let a;return e[4]!==n||e[5]!==o?(a=r.jsxs("div",{className:"workers__worker__details__item",children:[n,o]}),e[4]=n,e[5]=o,e[6]=a):a=e[6],a}const pr=t=>{const e=U.c(34),{worker:s,range:i,expandedWorkers:n,onWorkerClick:o,segmentStyle:a,navigate:l,showTooltip:c,hideTooltip:u,moveTooltip:m}=t,f=s.uuid,d=`workers__worker${n.has(s.uuid)?" workers__worker--expanded":""}`;let _;e[0]!==o||e[1]!==s.uuid?(_=()=>o(s.uuid),e[0]=o,e[1]=s.uuid,e[2]=_):_=e[2];let x;e[3]!==u?(x=()=>u("workers"),e[3]=u,e[4]=x):x=e[4];let y;e[5]!==u?(y=()=>u("workers"),e[5]=u,e[6]=y):y=e[6];let b;if(e[7]!==u||e[8]!==m||e[9]!==l||e[10]!==i||e[11]!==a||e[12]!==c||e[13]!==s){let v;e[15]!==u||e[16]!==m||e[17]!==l||e[18]!==a||e[19]!==c?(v=(w,k)=>r.jsx("div",{className:"workers__timeline__segment",style:a(w),onClick:j=>{Ht(j,`/tests/${encodeURIComponent(w.nodeid)}`,l),j.stopPropagation()},onMouseEnter:j=>c(ft(w.nodeid),j.clientX,j.clientY,"workers"),onMouseLeave:()=>u("workers"),onMouseMove:j=>m(j.clientX,j.clientY,"workers")},k),e[15]=u,e[16]=m,e[17]=l,e[18]=a,e[19]=c,e[20]=v):v=e[20],b=s.visibleSegments(i).map(v),e[7]=u,e[8]=m,e[9]=l,e[10]=i,e[11]=a,e[12]=c,e[13]=s,e[14]=b}else b=e[14];let h;e[21]!==y||e[22]!==b?(h=r.jsx("div",{className:"workers__worker__bar",onMouseLeave:y,children:b}),e[21]=y,e[22]=b,e[23]=h):h=e[23];let p;e[24]!==n||e[25]!==s?(p=n.has(s.uuid)&&r.jsx(gr,{worker:s}),e[24]=n,e[25]=s,e[26]=p):p=e[26];let g;return e[27]!==d||e[28]!==_||e[29]!==x||e[30]!==h||e[31]!==p||e[32]!==s.uuid?(g=r.jsxs("div",{className:d,onClick:_,onMouseLeave:x,children:[h,p]},f),e[27]=d,e[28]=_,e[29]=x,e[30]=h,e[31]=p,e[32]=s.uuid,e[33]=g):g=e[33],g},gr=t=>{const e=U.c(19),{worker:s}=t;let i;e[0]!==s.uuid?(i=r.jsx(Ie,{label:"Worker UUID",value:s.uuid}),e[0]=s.uuid,e[1]=i):i=e[1];const n=s.segments[s.segments.length-1].end-s.segments[0].start;let o;e[2]!==n?(o=rs(n),e[2]=n,e[3]=o):o=e[3];let a;e[4]!==o?(a=r.jsx(Ie,{label:"Lifetime",value:o}),e[4]=o,e[5]=a):a=e[5];let l;e[6]!==s.segments[0].start?(l=Be(s.segments[0].start),e[6]=s.segments[0].start,e[7]=l):l=e[7];let c;e[8]!==l?(c=r.jsx(Ie,{label:"Started",value:l}),e[8]=l,e[9]=c):c=e[9];const u=s.segments[s.segments.length-1];let m;e[10]!==u.end?(m=Be(u.end),e[10]=u.end,e[11]=m):m=e[11];let f;e[12]!==m?(f=r.jsx(Ie,{label:"Last seen",value:m}),e[12]=m,e[13]=f):f=e[13];let d;return e[14]!==i||e[15]!==a||e[16]!==c||e[17]!==f?(d=r.jsx("div",{className:"workers__worker__details",children:r.jsxs("div",{className:"workers__worker__details__grid",children:[i,a,c,f]})}),e[14]=i,e[15]=a,e[16]=c,e[17]=f,e[18]=d):d=e[18],d};function xr(){const t=U.c(28),{tests:e}=ht(),s=Lt(),{showTooltip:i,hideTooltip:n,moveTooltip:o}=Ue();let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Set,t[0]=a):a=t[0];const[l,c]=M.useState(a),[u,m]=M.useState(nt[0]),[f,d]=M.useState(null),[_,x]=M.useState(!1),y=function(G){d(G),x((G==null?void 0:G[1])==g)},b=Ls(Array.from(e.values()).map(wr).flat().sortKey(Sr)),h=new Map;b.forEach(K=>{const G=[];h.set(K,G),Array.from(e.values()).forEach(J=>{if(!J.reports_by_worker.has(K))return;const te=J.reports_by_worker.get(K);G.push(...te.map(se=>({timestamp_monotonic:se.timestamp_monotonic,nodeid:J.nodeid})))}),G.sortKey(jr)});let p=1/0,g=-1/0;const v=[];b.forEach(K=>{const G=h.get(K),J=[];let te=null;G.forEach((se,le)=>{p=Math.min(p,se.timestamp_monotonic),g=Math.max(g,se.timestamp_monotonic),!te||te.nodeid!==se.nodeid?(te&&J.push(te),te={nodeid:se.nodeid,start:se.timestamp_monotonic,end:se.timestamp_monotonic}):te.end=se.timestamp_monotonic,le===G.length-1&&te&&J.push(te)}),v.push(new mr(K,J))}),v.sortKey(vr);const w=v.flatMap(br).sortKey(yr),k=hr(w),j=g-p;let E;t[1]!==j?(E=K=>K.duration!==null&&K.duration>=j,t[1]=j,t[2]=E):E=t[2];const A=nt.findIndex(E),S=function(){if(u.duration===null){const se=k[k.length-1];return k.length>0?[se[0],se[1]]:[p,g]}const G=[Math.max(p,g-u.duration),g];let J=null,te=null;for(const se of v){const le=se.visibleSegments(G);le.length!==0&&((J===null||le[0].start<J)&&(J=le[0].start),(te===null||le[le.length-1].end>te)&&(te=le[le.length-1].end))}return[J??G[0],te??G[1]]}(),C=[...f??S];_&&f&&(C[1]=g);let R;t[3]!==y?(R=()=>{y(null)},t[3]=y,t[4]=R):R=t[4];let T;t[5]!==u?(T=[u],t[5]=u,t[6]=T):T=t[6],M.useEffect(R,T);const[L,N]=C,$=N-L,F=K=>{let G,J;return $===0?(G=0,J=100):(G=(K.start-L)/$*100,J=(K.end-K.start)/$*100),J=Math.max(J,.1),{left:`${G}%`,width:`${J}%`,backgroundColor:_r(K.nodeid)}},O=K=>{c(G=>{const J=new Set(G);return J.has(K)?J.delete(K):J.add(K),J})};let P;t[7]===Symbol.for("react.memo_cache_sentinel")?(P=r.jsx("div",{className:"card__header",children:"Workers "}),t[7]=P):P=t[7];let X;t[8]===Symbol.for("react.memo_cache_sentinel")?(X=r.jsxs("div",{className:"card__text",children:[r.jsx("div",{className:"card__text__paragraph",children:"This page shows the history of your workers, and what tests they have been fuzzing."}),r.jsx("div",{className:"card__text__paragraph",children:'Roughly speaking, "one worker" = "one CPU core".'})]}),t[8]=X):X=t[8];let I;t[9]!==A||t[10]!==u.label||t[11]!==y?(I=nt.map((K,G)=>{const J=G<=A;return r.jsx("div",{className:`workers__durations__button ${u.label===K.label?"workers__durations__button--active":""} ${J?"":"workers__durations__button--disabled"}`,onClick:()=>{J&&(m(K),y(null))},children:K.label},G)}),t[9]=A,t[10]=u.label,t[11]=y,t[12]=I):I=t[12];let Y;t[13]!==I?(Y=r.jsx("div",{className:"workers__durations",children:I}),t[13]=I,t[14]=Y):Y=t[14];let z;t[15]!==y?(z=K=>y(K),t[15]=y,t[16]=z):z=t[16];let V;t[17]!==L?(V=Be(L),t[17]=L,t[18]=V):V=t[18];let B;t[19]!==V?(B=r.jsx("span",{className:"workers__timeline-header__label",children:V}),t[19]=V,t[20]=B):B=t[20];let H;t[21]!==N?(H=Be(N),t[21]=N,t[22]=H):H=t[22];let q;t[23]!==H?(q=r.jsx("span",{className:"workers__timeline-header__label",children:H}),t[23]=H,t[24]=q):q=t[24];let Z;return t[25]!==B||t[26]!==q?(Z=r.jsxs("div",{className:"workers__timeline-header",children:[B,q]}),t[25]=B,t[26]=q,t[27]=Z):Z=t[27],r.jsxs("div",{className:"card",children:[P,r.jsxs("div",{className:"card__body",children:[X,r.jsxs("div",{className:"workers",children:[r.jsxs("div",{className:"workers__controls",children:[Y,r.jsx(ur,{min:S[0],max:S[1],value:C,onChange:z,step:(S[1]-S[0])/1e3})]}),Z,v.map(K=>K.visibleSegments(C).length>0&&r.jsx(pr,{worker:K,range:C,expandedWorkers:l,onWorkerClick:O,segmentStyle:F,navigate:s,showTooltip:i,hideTooltip:n,moveTooltip:o},K.uuid))]})]})]})}function yr(t){return t.start}function br(t){return t.segments}function vr(t){return t.segments[0].start}function jr(t){return t.timestamp_monotonic}function Sr(t){return t}function wr(t){return Array.from(t.reports_by_worker.keys())}function Nr(){const t=U.c(7),e=hs;let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(Zn,{}),t[0]=s):s=t[0];let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(me,{path:"/",element:r.jsx(cr,{})}),t[1]=i):i=t[1];let n;t[2]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx(me,{path:"/patches",element:r.jsx(pi,{})}),t[2]=n):n=t[2];let o;t[3]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(me,{path:"/collected",element:r.jsx(ri,{})}),t[3]=o):o=t[3];let a;t[4]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(me,{path:"/workers",element:r.jsx(xr,{})}),t[4]=a):a=t[4];let l;t[5]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(me,{path:"/tests/:nodeid",element:r.jsx(zi,{})}),t[5]=l):l=t[5];let c;return t[6]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx(e,{children:r.jsx(Zs,{children:r.jsx(Kn,{children:r.jsx(rn,{children:r.jsx(_s,{children:r.jsxs(me,{element:s,children:[i,n,o,a,l,r.jsx(me,{path:"*",element:r.jsx(mi,{})})]})})})})})}),t[6]=c):c=t[6],c}Ks.createRoot(document.getElementById("app")).render(r.jsx(Tt.StrictMode,{children:r.jsx(Nr,{})}));
//# sourceMappingURL=index-BhGL7Vtw.js.map
