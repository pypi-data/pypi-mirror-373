[package]
name = "zpack"
description = "A fast, configurable package manager which builds programs from source"
version = "0.1.0"
edition = "2024"
readme = "README.md"

[features]
cheap_errors = []
mpi = ["dep:mpi"]

[dependencies]
anyhow = { version = "1.0.99" }
ariadne = { version = "0.5.1", features = ["auto-color"] }
chumsky = { version = "0.10.1", features = ["lexical-numbers", "memoization", "serde"] }
clap = { version = "4.5.46", features = ["deprecated", "derive", "cargo", "env", "unicode", "wrap_help", "string"] }
clap_complete = { version = "4.5.57", features = ["unstable-dynamic"] }
config-rs = "0.1.3"
itertools = "0.14.0"
mpi = { version = "0.8.0", optional=true, features = ["user-operations", "derive", "complex"] }
pyo3 = { version = "0.26", features = ["macros"] }
saphyr = "0.0.6"
syntect = { version = "5.2.0", features = ["default-fancy"] }
tempfile = "3.21.0"
tracing = "0.1.41"
tracing-subscriber = "0.3.19"

[dev-dependencies]
criterion = { version = "0.7.0", features = ["html_reports", "real_blackbox"] }

[[bench]]
name = "version_parser"
harness = false

[profile.release]
panic = "abort"
codegen-units = 1
lto = true
opt-level = 3
strip = true
debug = false
debug-assertions = false

[profile.release.package."*"]
codegen-units = 1
opt-level = 3
strip = true
debug = false
debug-assertions = false

[profile.profile]
inherits = "release"
debug = true
