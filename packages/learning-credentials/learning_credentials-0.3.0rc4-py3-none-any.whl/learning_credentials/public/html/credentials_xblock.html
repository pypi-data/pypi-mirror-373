<div class="credentials-block">
    {% if is_author_mode %}
        <p>The Studio view of this XBlock is not supported yet. Please preview the XBlock in the LMS.</p>
    {% else %}
        <h3>Check Your Certificate Eligibility Status</h3>
        <ul class="credentials-list">
            {% if credentials %}
                {% for credential_type, credential in credentials.items %}
                    <li class="credential">
                        <strong>Type:</strong> {{ credential_type }}
                        {% if credential.download_url %}
                            <p class="credential-status">Congratulations on finishing strong!</p>
                            <strong>Download Link:</strong> <a href="{{ credential.download_url }}">Download Certificate</a>
                        {% elif credential.status == credential.Status.ERROR %}
                            <p class="credential-status">Something went wrong. Please contact us via the Help page for assistance.</p>
                        {% endif %}
                        <button class="btn-brand generate-credential" data-credential-type="{{ credential_type }}" disabled>
                            Certificate Claimed
                        </button>
                        <div id="message-area-{{ credential_type }}"></div>
                    </li>
                {% endfor %}
            {% endif %}

            {% if eligible_types %}
                {% for credential_type, is_eligible in eligible_types.items %}
                    {% if not credentials or credential_type not in credentials %}
                        <li class="credential">
                            <strong>Type:</strong> {{ credential_type }}
                            {% if is_eligible %}
                                <p class="credential-status">Congratulations! You have earned this certificate. Please claim it below.</p>
                                <button class="btn-brand generate-credential" data-credential-type="{{ credential_type }}">
                                    Claim Certificate
                                </button>
                            {% else %}
                                <p class="certificate-status">You are not yet eligible for this certificate.</p>
                                <button class="btn-brand generate-certificate" data-certificate-type="{{ credential_type }}" disabled>
                                    Claim Certificate
                                </button>
                            {% endif %}
                            <div id="message-area-{{ credential_type }}"></div>
                        </li>
                    {% endif %}
                {% endfor %}
            {% endif %}
        </ul>
    {% endif %}
</div>
