version = 2
amqp_uri = "amqp://guest:guest@rabbitmq:5672/"
# db_uri = "sqlite+aiosqlite:///cattle_grid.db"
db_uri = "postgresql+asyncpg://postgres:pass@cattle_grid_db"
# enable_reporting = true
enable_reporting = false
processor_in_app = true

[gateway]
enable = true
enable_authentication = true

[gateway.admin]
enable_reset = true
enable = true

[manage]
enable = true
exchange = "manage"

[frontend]
base_urls = ["http://abel", "http://banach", "http://rss", "http://localhost"]


[[extensions]]
module = "cattle_grid.extensions.examples.recipients"

[[extensions]]
module = "cattle_grid.extensions.examples.webfinger_lookup"
lookup_order = 2
config = { protocol = "http" }

[[extensions]]
module = "cattle_grid.extensions.examples.cache"
lookup_order = 4
# config = { connection_url = "redis://cattle_grid_redis" }
config = { connection_url = ":memory:" }

[[extensions]]
module = "cattle_grid.extensions.examples.simple_storage"
api_prefix = "/simple_storage"

config = { prefix = "/simple_storage/" }

[[extensions]]
module = "muck_out.extension"


[[extensions]]
module = "cattle_grid.extensions.examples.simple_register"
api_prefix = "/simple_register"

[[extensions.config.registration_types]]
name = "dev"
permissions = ["dev"]
extra_parameters = ["fediverse"]
