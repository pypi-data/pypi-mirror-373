# FastDatasets ğŸš€

![FastDatasets](fastdatasets.png)

[![GitHub Stars](https://img.shields.io/github/stars/ZhuLinsen/FastDatasets?style=social)](https://github.com/ZhuLinsen/FastDatasets/stargazers)
[![License](https://img.shields.io/badge/license-Apache%202.0-blue.svg)](LICENSE)
[![Hugging Face Spaces](https://img.shields.io/badge/ğŸ¤—%20Hugging%20Face-Spaces-blue)](https://huggingface.co/spaces/mumu157/FastDatasets)
[![Python](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)

ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºä¸ºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åˆ›å»ºé«˜è´¨é‡çš„è®­ç»ƒæ•°æ®é›† | [Switch to English](README_en.md)

## ğŸ¯ åœ¨çº¿ä½“éªŒ

**ğŸš€ ç«‹å³ä½“éªŒ FastDatasetsï¼Œæ— éœ€å®‰è£…ï¼**

[![åœ¨ Hugging Face Spaces ä¸Šè¯•ç”¨](https://img.shields.io/badge/ğŸ¤—%20è¯•ç”¨%20Demo-å¿«é€Ÿä½“éªŒ-orange?style=for-the-badge)](https://huggingface.co/spaces/mumu157/FastDatasets)

ä¸Šä¼ ä½ çš„æ–‡æ¡£ï¼Œä¸€é”®ç”Ÿæˆ Alpaca æ ¼å¼è®­ç»ƒæ•°æ®é›† - å®Œå…¨å…è´¹ï¼Œæ— éœ€é…ç½®ç¯å¢ƒï¼

| ä½¿ç”¨æ–¹å¼ | é€‚ç”¨åœºæ™¯ | ç‰¹ç‚¹ |
|---------|---------|------|
| ğŸ¤— **Spaces ä½“éªŒç‰ˆ** | å¿«é€Ÿè¯•ç”¨ã€åŠŸèƒ½æ¼”ç¤º | é›¶é…ç½®ã€å³å¼€å³ç”¨ã€ä»…ä¾›ä½“éªŒ |
| ğŸ’» **æœ¬åœ°å®Œæ•´ç‰ˆ** | ç”Ÿäº§ç¯å¢ƒã€å®é™…åº”ç”¨ | æ— é™åˆ¶ã€æ‰¹é‡å¤„ç†ã€å®Œæ•´åŠŸèƒ½ |

## ä¸»è¦åŠŸèƒ½

### 1. åŸºäºè‡ªç”±æ–‡æ¡£ç”Ÿæˆæ•°æ®é›†
- **æ™ºèƒ½æ–‡æ¡£å¤„ç†**ï¼šæ”¯æŒå¤šç§æ ¼å¼æ–‡æ¡£çš„æ™ºèƒ½åˆ†å‰²
- **é—®é¢˜ç”Ÿæˆ**ï¼šåŸºäºæ–‡æ¡£å†…å®¹è‡ªåŠ¨ç”Ÿæˆç›¸å…³é—®é¢˜
- **ç­”æ¡ˆç”Ÿæˆ**ï¼šä½¿ç”¨ LLM ç”Ÿæˆé«˜è´¨é‡ç­”æ¡ˆ
- **å¼‚æ­¥å¤„ç†**ï¼šæ”¯æŒå¤§è§„æ¨¡æ–‡æ¡£çš„å¼‚æ­¥å¤„ç†
- **å¤šç§å¯¼å‡ºæ ¼å¼**ï¼šæ”¯æŒå¤šç§æ•°æ®é›†æ ¼å¼å¯¼å‡ºï¼ˆAlpacaã€ShareGPTç­‰ï¼‰
- **ç›´æ¥SFTå°±ç»ªè¾“å‡º**ï¼šç”Ÿæˆé€‚ç”¨äºç›‘ç£å¾®è°ƒçš„æ•°æ®é›†

### 2. æ•°æ®è’¸é¦ä¸ä¼˜åŒ–
- **çŸ¥è¯†è’¸é¦**ï¼šä»å¤§æ¨¡å‹ä¸­æå–çŸ¥è¯†åˆ°è®­ç»ƒæ•°æ®é›†
- **æŒ‡ä»¤æ‰©å¢**ï¼šè‡ªåŠ¨ç”ŸæˆæŒ‡ä»¤å˜ä½“ï¼Œæ‰©å……è®­ç»ƒæ•°æ®
- **è´¨é‡ä¼˜åŒ–**ï¼šä½¿ç”¨ LLM ä¼˜åŒ–å’Œæå‡æ•°æ®è´¨é‡
- **å¤šæ ¼å¼æ”¯æŒ**ï¼šæ”¯æŒä»å¤šç§æ ¼å¼çš„æ•°æ®é›†è¿›è¡Œè’¸é¦


## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- ä¾èµ–åŒ…ï¼šè§ `requirements.txt`

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/ZhuLinsen/FastDatasets.git
cd FastDatasets

# åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¯é€‰ï¼‰
conda create -n fast_datasets python=3.10
conda activate fast_datasets

# å®‰è£…ä¾èµ–
pip install -e .

# åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶
cp .env.example .env
# ä½¿ç”¨ç¼–è¾‘å™¨ä¿®æ”¹.envæ–‡ä»¶ï¼Œé…ç½®å¤§æ¨¡å‹APIç­‰å¿…è¦ä¿¡æ¯
```

### ä½¿ç”¨ç¤ºä¾‹

1. é¦–å…ˆé…ç½®æ‚¨çš„ LLM
```bash
# åˆ›å»ºå¹¶ç¼–è¾‘.envæ–‡ä»¶ï¼Œä».env.exampleå¤åˆ¶å¹¶ä¿®æ”¹
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶å¹¶é…ç½®æ‚¨çš„å¤§æ¨¡å‹API
# LLM_API_KEY=your_api_key_here
# LLM_API_BASE=https://api.deepseek.com/v1 (æˆ–å…¶ä»–æ¨¡å‹APIåœ°å€)

# ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æµ‹è¯•LLMè¿æ¥å’Œèƒ½åŠ›
python scripts/test_llm.py
```

2. ä»æ–‡æ¡£ç”Ÿæˆæ•°æ®é›†
```bash
# ä½¿ç”¨æµ‹è¯•æ–‡æ¡£ç”Ÿæˆæ•°æ®é›†
python scripts/dataset_generator.py tests/test.txt -o ./output

# å¤„ç†è‡ªå®šä¹‰æ–‡æ¡£
python scripts/dataset_generator.py è·¯å¾„/åˆ°/ä½ çš„æ–‡æ¡£.pdf -o ./è¾“å‡ºç›®å½•

# å¤„ç†æ•´ä¸ªç›®å½•ä¸‹çš„æ–‡æ¡£
python scripts/dataset_generator.py è·¯å¾„/åˆ°/æ–‡æ¡£ç›®å½•/ -o ./è¾“å‡ºç›®å½•
```

3. ä½¿ç”¨çŸ¥è¯†è’¸é¦åˆ›å»ºè®­ç»ƒæ•°æ®é›†
```bash
# ä»Huggingfaceæ•°æ®é›†æå–é—®é¢˜å¹¶ç”Ÿæˆé«˜è´¨é‡å›ç­”
python scripts/distill_dataset.py --mode distill --dataset_name open-r1/s1K-1.1 --sample_size 10

# ä½¿ç”¨é«˜è´¨é‡æ ·æœ¬ç”Ÿæˆå˜ä½“å¹¶è¿›è¡ŒçŸ¥è¯†è’¸é¦(å¯é€‰)
python scripts/distill_dataset.py --mode augment --high_quality_file data/high_quality_samples.json --num_aug 3
```

æ›´å¤šè¯¦ç»†ç”¨æ³•ï¼Œè¯·å‚è€ƒï¼š[çŸ¥è¯†è’¸é¦æŒ‡å—](docs/knowledge_distillation.md) | [æ–‡æ¡£å¤„ç†ä¸æ•°æ®é›†ç”Ÿæˆ](docs/custom_data_conversion.md)

### æ”¯æŒçš„æ–‡æ¡£æ ¼å¼

- PDF (*.pdf)
- Word (*.docx)
- Markdown (*.md)
- çº¯æ–‡æœ¬ (*.txt)
- å…¶ä»–ä¸»æµæ ¼å¼æ–‡æ¡£

## è¾“å‡ºç»“æ„

### æ–‡æ¡£å¤„ç†è¾“å‡º
å¤„ç†å®Œæˆåï¼Œåœ¨æŒ‡å®šçš„è¾“å‡ºç›®å½•ä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

- `chunks.json`: æ–‡æ¡£åˆ‡åˆ†åçš„æ–‡æœ¬å—
- `questions.json`: ç”Ÿæˆçš„é—®é¢˜
- `answers.json`: ç”Ÿæˆçš„ç­”æ¡ˆ
- `optimized.json`: ä¼˜åŒ–åçš„é—®ç­”å¯¹
- `dataset-alpaca.json`: Alpaca æ ¼å¼çš„æ•°æ®é›†
- `dataset-sharegpt.json`: ShareGPT æ ¼å¼çš„æ•°æ®é›†ï¼ˆå¦‚æœé…ç½®äº†æ­¤è¾“å‡ºæ ¼å¼ï¼‰

### çŸ¥è¯†è’¸é¦è¾“å‡º
çŸ¥è¯†è’¸é¦è¿‡ç¨‹ä¼šåœ¨outputç›®å½•ä¸‹åˆ›å»ºå¸¦æ—¶é—´æˆ³çš„å­ç›®å½•ï¼Œå¹¶ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

- `distilled.json`: è’¸é¦åçš„åŸå§‹æ•°æ®
- `distilled-alpaca.json`: Alpaca æ ¼å¼çš„è’¸é¦æ•°æ®
- `distilled-sharegpt.json`: ShareGPT æ ¼å¼çš„è’¸é¦æ•°æ®

## é«˜çº§ç”¨æ³•

### Web ç•Œé¢ä½¿ç”¨

å¯åŠ¨ Web ç•Œé¢ï¼Œæä¾›å¯è§†åŒ–çš„æ–‡æ¡£å¤„ç†å’Œæ•°æ®é›†ç”ŸæˆåŠŸèƒ½ï¼š

```bash
# è¿›å…¥ web ç›®å½•
cd web

# å¯åŠ¨ Web åº”ç”¨
python web_app.py
```

é»˜è®¤åœ°å€ï¼šhttp://localhost:7860

#### Web ç•Œé¢åŠŸèƒ½

1. **æ–‡ä»¶ä¸Šä¼ **ï¼šæ”¯æŒæ‹–æ‹½æˆ–ç‚¹å‡»ä¸Šä¼ å¤šç§æ ¼å¼çš„æ–‡æ¡£
   - æ”¯æŒ PDFã€Wordã€Markdownã€çº¯æ–‡æœ¬ç­‰æ ¼å¼
   - å¯åŒæ—¶ä¸Šä¼ å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰¹é‡å¤„ç†

2. **å‚æ•°é…ç½®**ï¼š
   - **æ–‡æœ¬åˆ†å—è®¾ç½®**ï¼šé…ç½®æœ€å°/æœ€å¤§åˆ†å—é•¿åº¦
   - **è¾“å‡ºæ ¼å¼é€‰æ‹©**ï¼šæ”¯æŒ Alpacaã€ShareGPT ç­‰æ ¼å¼
   - **LLM é…ç½®**ï¼šè®¾ç½® API Keyã€Base URLã€æ¨¡å‹åç§°
   - **å¹¶å‘æ§åˆ¶**ï¼šè°ƒæ•´ LLM å’Œæ–‡ä»¶å¤„ç†çš„å¹¶å‘æ•°
   - **é«˜çº§é€‰é¡¹**ï¼šå¯ç”¨æ€ç»´é“¾ï¼ˆCoTï¼‰ã€è®¾ç½®æ¯å—é—®é¢˜æ•°é‡

3. **å®æ—¶å¤„ç†ç›‘æ§**ï¼š
   - æ˜¾ç¤ºå¤„ç†è¿›åº¦å’Œå½“å‰çŠ¶æ€
   - å®æ—¶æ›´æ–°å¤„ç†æ—¥å¿—
   - æ˜¾ç¤ºå·²å¤„ç†æ–‡ä»¶æ•°é‡å’Œå‰©ä½™æ—¶é—´

4. **ç»“æœç®¡ç†**ï¼š
   - æŸ¥çœ‹ç”Ÿæˆçš„é—®ç­”å¯¹æ•°é‡å’Œè´¨é‡
   - ä¸‹è½½ç”Ÿæˆçš„æ•°æ®é›†æ–‡ä»¶
   - æ”¯æŒå¤šç§æ ¼å¼çš„æ•°æ®é›†å¯¼å‡º

#### ä½¿ç”¨æ­¥éª¤

1. **é…ç½®ç¯å¢ƒ**ï¼šç¡®ä¿å·²æ­£ç¡®é…ç½® `.env` æ–‡ä»¶ä¸­çš„ LLM API ä¿¡æ¯
2. **å¯åŠ¨æœåŠ¡**ï¼šè¿è¡Œ `python web_app.py` å¯åŠ¨ Web ç•Œé¢
3. **ä¸Šä¼ æ–‡ä»¶**ï¼šåœ¨ç•Œé¢ä¸­ä¸Šä¼ éœ€è¦å¤„ç†çš„æ–‡æ¡£
4. **é…ç½®å‚æ•°**ï¼šæ ¹æ®éœ€è¦è°ƒæ•´å¤„ç†å‚æ•°
5. **å¼€å§‹å¤„ç†**ï¼šç‚¹å‡»å¼€å§‹å¤„ç†æŒ‰é’®ï¼Œå®æ—¶ç›‘æ§è¿›åº¦
6. **ä¸‹è½½ç»“æœ**ï¼šå¤„ç†å®Œæˆåä¸‹è½½ç”Ÿæˆçš„æ•°æ®é›†

### æ•…éšœæ’é™¤

1. **å¤„ç†é€Ÿåº¦æ…¢**ï¼šå¢åŠ  MAX_LLM_CONCURRENCY å€¼ï¼Œæˆ–å‡å°‘ LLM_MAX_TOKENS
2. **å†…å­˜ä¸è¶³**ï¼šå‡å°å¤„ç†çš„æ–‡æ¡£æ•°é‡æˆ–æ–‡æ¡£å¤§å°
3. **API è¶…æ—¶**ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œæˆ–å‡å°‘ MAX_LLM_CONCURRENCY

## è®¸å¯è¯
[Apache 2.0](LICENSE)

## é€šè¿‡ PyPI å®‰è£…ä¸ä½¿ç”¨

### å®‰è£…

```bash
pip install fastdatasets
```

æˆ–å®‰è£…æœ€æ–°å¼€å‘ç‰ˆï¼š

```bash
pip install git+https://github.com/ZhuLinsen/FastDatasets.git@main
```

### é…ç½® LLMï¼ˆç¯å¢ƒå˜é‡ï¼‰

```bash
export LLM_API_KEY="sk-..."
export LLM_API_BASE="https://api.example.com/v1"
export LLM_MODEL="your-model"
```

### å‘½ä»¤è¡Œä½¿ç”¨ï¼ˆCLIï¼‰

```bash
# ä»æ–‡ä»¶/ç›®å½•ç”Ÿæˆæ•°æ®é›†
fastdatasets generate ./data/sample.txt -o ./output

# å¤šæ ¼å¼å¯¼å‡ºä¸ JSONL è¾“å‡º
fastdatasets generate ./docs -o ./output -f alpaca,sharegpt --file-format jsonl
```

### Python æ–¹å¼

```python
from fastdatasets import DocumentProcessor, DatasetBuilder, Config
import asyncio

cfg = Config()  # ä¹Ÿå¯ç”¨ç¯å¢ƒå˜é‡è¦†ç›–
processor = DocumentProcessor()
chunks = processor.process_document("./data/sample.txt")

builder = DatasetBuilder()
dataset = asyncio.run(builder.build_dataset(chunks))
builder.export_dataset(dataset, output_dir="./output", formats=["alpaca"], file_format="json")
```

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=ZhuLinsen/FastDatasets&type=Date)](https://www.star-history.com/#ZhuLinsen/FastDatasets&Date)

