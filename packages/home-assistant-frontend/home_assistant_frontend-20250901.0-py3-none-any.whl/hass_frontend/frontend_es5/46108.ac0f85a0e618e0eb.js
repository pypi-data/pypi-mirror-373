"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["46108"],{55815:function(t,e,n){n.d(e,{Eu:function(){return r},hZ:function(){return s},o9:function(){return u}});var i=n(28105),a=n(45657);const o=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function r(t){return o[t%o.length]}function s(t,e){const n=e.getPropertyValue(`--graph-color-${t+1}`)||r(t);return(0,a.Rq)(n)}const u=(0,i.Z)(t=>o.map((e,n)=>s(n,t)),(t,e)=>t[0].getPropertyValue("--graph-color-1")===e[0].getPropertyValue("--graph-color-1"))},34394:function(t,e,n){n.d(e,{I:function(){return a},k:function(){return i}});n(26847),n(67886),n(65451),n(46015),n(38334),n(94880),n(75643),n(29761),n(27530);const i=new Set(["primary","accent","disabled","red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","light-grey","grey","dark-grey","blue-grey","black","white"]);function a(t){return i.has(t)?`var(--${t}-color)`:t}},40142:function(t,e,n){n.a(t,async function(t,i){try{n.d(e,{D_:function(){return Z},NC:function(){return y},Nh:function(){return p},U8:function(){return D},WB:function(){return d},mn:function(){return l},p6:function(){return c},ud:function(){return g},yQ:function(){return w}});n(81738),n(29981);var a=n(62229),o=n(28105),r=n(38763),s=n(34743),u=t([a,s]);[a,s]=u.then?(await u)():u;(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",month:"long",day:"numeric",timeZone:(0,s.f)(t.time_zone,e)}));const c=(t,e,n)=>m(e,n.time_zone).format(t),m=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",timeZone:(0,s.f)(t.time_zone,e)})),l=(t,e,n)=>f(e,n.time_zone).format(t),f=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"short",day:"numeric",timeZone:(0,s.f)(t.time_zone,e)})),d=(t,e,n)=>{var i,a,o,s;const u=h(e,n.time_zone);if(e.date_format===r.t6.language||e.date_format===r.t6.system)return u.format(t);const c=u.formatToParts(t),m=null===(i=c.find(t=>"literal"===t.type))||void 0===i?void 0:i.value,l=null===(a=c.find(t=>"day"===t.type))||void 0===a?void 0:a.value,f=null===(o=c.find(t=>"month"===t.type))||void 0===o?void 0:o.value,d=null===(s=c.find(t=>"year"===t.type))||void 0===s?void 0:s.value,g=c[c.length-1];let _="literal"===(null==g?void 0:g.type)?null==g?void 0:g.value:"";"bg"===e.language&&e.date_format===r.t6.YMD&&(_="");return{[r.t6.DMY]:`${l}${m}${f}${m}${d}${_}`,[r.t6.MDY]:`${f}${m}${l}${m}${d}${_}`,[r.t6.YMD]:`${d}${m}${f}${m}${l}${_}`}[e.date_format]},h=(0,o.Z)((t,e)=>{const n=t.date_format===r.t6.system?void 0:t.language;return t.date_format===r.t6.language||(t.date_format,r.t6.system),new Intl.DateTimeFormat(n,{year:"numeric",month:"numeric",day:"numeric",timeZone:(0,s.f)(t.time_zone,e)})}),g=(t,e,n)=>_(e,n.time_zone).format(t),_=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{day:"numeric",month:"short",timeZone:(0,s.f)(t.time_zone,e)})),y=(t,e,n)=>b(e,n.time_zone).format(t),b=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{month:"long",year:"numeric",timeZone:(0,s.f)(t.time_zone,e)})),p=(t,e,n)=>v(e,n.time_zone).format(t),v=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{month:"long",timeZone:(0,s.f)(t.time_zone,e)})),w=(t,e,n)=>z(e,n.time_zone).format(t),z=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",timeZone:(0,s.f)(t.time_zone,e)})),Z=(t,e,n)=>$(e,n.time_zone).format(t),$=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",timeZone:(0,s.f)(t.time_zone,e)})),D=(t,e,n)=>O(e,n.time_zone).format(t),O=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"short",timeZone:(0,s.f)(t.time_zone,e)}));i()}catch(c){i(c)}})},74266:function(t,e,n){n.a(t,async function(t,i){try{n.d(e,{DG:function(){return d},E8:function(){return b},Fu:function(){return y},NR:function(){return v},o0:function(){return l},yD:function(){return g}});var a=n(62229),o=n(28105),r=n(40142),s=n(45691),u=n(34743),c=n(23648),m=t([a,u,r,s]);[a,u,r,s]=m.then?(await m)():m;const l=(t,e,n)=>f(e,n.time_zone).format(t),f=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",hour:(0,c.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,c.y)(t)?"h12":"h23",timeZone:(0,u.f)(t.time_zone,e)})),d=((0,o.Z)(()=>new Intl.DateTimeFormat(void 0,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})),(t,e,n)=>h(e,n.time_zone).format(t)),h=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"short",day:"numeric",hour:(0,c.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,c.y)(t)?"h12":"h23",timeZone:(0,u.f)(t.time_zone,e)})),g=(t,e,n)=>_(e,n.time_zone).format(t),_=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{month:"short",day:"numeric",hour:(0,c.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,c.y)(t)?"h12":"h23",timeZone:(0,u.f)(t.time_zone,e)})),y=(t,e,n)=>(new Date).getFullYear()===t.getFullYear()?g(t,e,n):d(t,e,n),b=(t,e,n)=>p(e,n.time_zone).format(t),p=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",hour:(0,c.y)(t)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,c.y)(t)?"h12":"h23",timeZone:(0,u.f)(t.time_zone,e)})),v=(t,e,n)=>`${(0,r.WB)(t,e,n)}, ${(0,s.mr)(t,e,n)}`;i()}catch(l){i(l)}})},45691:function(t,e,n){n.a(t,async function(t,i){try{n.d(e,{Vu:function(){return l},Zs:function(){return g},mr:function(){return c},xO:function(){return d}});var a=n(62229),o=n(28105),r=n(34743),s=n(23648),u=t([a,r]);[a,r]=u.then?(await u)():u;const c=(t,e,n)=>m(e,n.time_zone).format(t),m=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{hour:"numeric",minute:"2-digit",hourCycle:(0,s.y)(t)?"h12":"h23",timeZone:(0,r.f)(t.time_zone,e)})),l=(t,e,n)=>f(e,n.time_zone).format(t),f=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{hour:(0,s.y)(t)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,s.y)(t)?"h12":"h23",timeZone:(0,r.f)(t.time_zone,e)})),d=(t,e,n)=>h(e,n.time_zone).format(t),h=(0,o.Z)((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",hour:(0,s.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,s.y)(t)?"h12":"h23",timeZone:(0,r.f)(t.time_zone,e)})),g=(t,e,n)=>_(e,n.time_zone).format(t),_=(0,o.Z)((t,e)=>new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"2-digit",hour12:!1,timeZone:(0,r.f)(t.time_zone,e)}));i()}catch(c){i(c)}})},34743:function(t,e,n){n.a(t,async function(t,i){try{n.d(e,{f:function(){return f}});var a,o,r,s=n(62229),u=n(38763),c=t([s]);s=(c.then?(await c)():c)[0];const m=null===(a=Intl.DateTimeFormat)||void 0===a||null===(o=(r=a.call(Intl)).resolvedOptions)||void 0===o?void 0:o.call(r).timeZone,l=null!=m?m:"UTC",f=(t,e)=>t===u.c_.local&&m?l:e;i()}catch(m){i(m)}})},23648:function(t,e,n){n.d(e,{y:function(){return o}});n(39710),n(56389);var i=n(28105),a=n(38763);const o=(0,i.Z)(t=>{if(t.time_format===a.zt.language||t.time_format===a.zt.system){const e=t.time_format===a.zt.language?t.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(e).includes("10")}return t.time_format===a.zt.am_pm})},10388:function(t,e,n){n.a(t,async function(t,i){try{n.d(e,{c:function(){return g},computeStateDisplay:function(){return h}});n(39710),n(87799),n(56389);var a=n(16230),o=n(38763),r=n(93836),s=n(40142),u=n(74266),c=n(45691),m=n(28598),l=n(27417),f=n(44272),d=t([r,m,s,c,u]);[r,m,s,c,u]=d.then?(await d)():d;const h=(t,e,n,i,a,o,r)=>{const s=null==o?void 0:o[e.entity_id];return g(t,n,i,a,s,e.entity_id,e.attributes,void 0!==r?r:e.state)},g=(t,e,n,i,d,h,g,_)=>{if(_===a.lz||_===a.nZ)return t(`state.default.${_}`);const y=(0,f.M)(h),b="counter"===y||"number"===y||"input_number"===y;if((0,m.sJ)(g,"sensor"===y?n:[])||b){if("duration"===g.device_class&&g.unit_of_measurement&&r.a_.includes(g.unit_of_measurement))try{return(0,r.LU)(e,_,g.unit_of_measurement,null==d?void 0:d.display_precision)}catch(p){}if("monetary"===g.device_class)try{return(0,m.uf)(_,e,Object.assign({style:"currency",currency:g.unit_of_measurement,minimumFractionDigits:2},(0,m.l4)({state:_,attributes:g},d)))}catch(p){}const n=(0,m.uf)(_,e,(0,m.l4)({state:_,attributes:g},d)),i=(null==d?void 0:d.translation_key)&&t(`component.${d.platform}.entity.${y}.${d.translation_key}.unit_of_measurement`)||g.unit_of_measurement;return i?`${n}${(0,l.L)(i,e)}${i}`:n}if(["date","input_datetime","time"].includes(y))try{const t=_.split(" ");if(2===t.length)return(0,u.o0)(new Date(t.join("T")),Object.assign(Object.assign({},e),{},{time_zone:o.c_.local}),i);if(1===t.length){if(_.includes("-"))return(0,s.p6)(new Date(`${_}T00:00`),Object.assign(Object.assign({},e),{},{time_zone:o.c_.local}),i);if(_.includes(":")){const t=new Date;return(0,c.mr)(new Date(`${t.toISOString().split("T")[0]}T${_}`),Object.assign(Object.assign({},e),{},{time_zone:o.c_.local}),i)}}return _}catch(v){return _}if(["ai_task","button","conversation","event","image","input_button","notify","scene","stt","tag","tts","wake_word","datetime"].includes(y)||"sensor"===y&&"timestamp"===g.device_class)try{return(0,u.o0)(new Date(_),e,i)}catch(p){return _}return(null==d?void 0:d.translation_key)&&t(`component.${d.platform}.entity.${y}.${d.translation_key}.state.${_}`)||g.device_class&&t(`component.${y}.entity_component.${g.device_class}.state.${_}`)||t(`component.${y}.entity_component._.state.${_}`)||_};i()}catch(h){i(h)}})},89166:function(t,e,n){n.a(t,async function(t,i){try{n.d(e,{Nu:function(){return $},V3:function(){return T},Vk:function(){return f},YA:function(){return Z},xS:function(){return h},zP:function(){return O}});n(39710),n(26847),n(2394),n(18574),n(73042),n(81738),n(94814),n(29981),n(22960),n(6989),n(72489),n(87799),n(56303),n(67886),n(65451),n(46015),n(38334),n(94880),n(75643),n(29761),n(56389),n(27530);var a=n(44272),o=n(10388),r=n(15459),s=t([o]);o=(s.then?(await s)():s)[0];const u=["climate","humidifier","water_heater"],c=["climate","humidifier","input_datetime","water_heater","person","device_tracker"],m=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],l=(t,e)=>!t.states[e]||c.includes((0,a.M)(e)),f=(t,e,n,i,a)=>{const o={type:"history/stream",entity_ids:a,start_time:n.toISOString(),end_time:i.toISOString(),minimal_response:!0,no_attributes:!a.some(e=>l(t,e))},r=new d(t);return t.connection.subscribeMessage(t=>e(r.processMessage(t)),o)};class d{processMessage(t){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=t.states,this.combinedHistory;if(!Object.keys(t.states).length)return this.combinedHistory;const e=this.hoursToShow?((new Date).getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,n={};for(const i of Object.keys(this.combinedHistory))n[i]=[];for(const i of Object.keys(t.states))n[i]=[];for(const i of Object.keys(n)){if(i in this.combinedHistory&&i in t.states){const e=this.combinedHistory[i],a=e[e.length-1];n[i]=e.concat(t.states[i]),t.states[i][0].lu<a.lu&&(n[i]=n[i].sort((t,e)=>t.lu-e.lu))}else i in this.combinedHistory?n[i]=this.combinedHistory[i]:n[i]=t.states[i];if(e&&i in this.combinedHistory){const t=n[i].filter(t=>t.lu<e);if(!t.length)continue;if(n[i]=n[i].filter(t=>t.lu>=e),n[i].length&&n[i][0].lu===e)continue;const a=t[t.length-1];a.lu=e,n[i].unshift(a)}}return this.combinedHistory=n,this.combinedHistory}constructor(t,e){this.hass=t,this.hoursToShow=e,this.combinedHistory={}}}const h=(t,e,n,i,a,o=!0,r=!0)=>{const s={type:"history/stream",entity_ids:i,start_time:new Date((new Date).getTime()-3600*n*1e3).toISOString(),minimal_response:o,significant_changes_only:r,no_attributes:null!=a?a:!i.some(e=>l(t,e))},u=new d(t,n);return t.connection.subscribeMessage(t=>e(u.processMessage(t)),s)},g=(t,e)=>t.state===e.state&&(!t.attributes||!e.attributes||m.every(n=>t.attributes[n]===e.attributes[n])),_=(t,e,n,i,a,s,u)=>{const c=[],m=s[0];for(const r of s){if(c.length>0&&r.s===c[c.length-1].state)continue;const s={};null!=u&&u.attributes.device_class&&(s.device_class=null==u?void 0:u.attributes.device_class),c.push({state_localize:(0,o.c)(t,e,[],n,i[a],a,Object.assign(Object.assign({},r.a||m.a),s),r.s),state:r.s,last_changed:1e3*(r.lc?r.lc:r.lu)})}return{name:(0,r.a)(a,(null==u?void 0:u.attributes)||m.a),entity_id:a,data:c}},y=(t,e,n,i)=>{const o=[];return Object.keys(n).forEach(t=>{const e=n[t],s=e[0],c=(0,a.M)(t),l=[];for(const n of e){let t;if(u.includes(c)){t={state:n.s,last_changed:1e3*n.lu,attributes:{}};for(const e of m)e in n.a&&(t.attributes[e]=n.a[e])}else t={state:n.s,last_changed:1e3*(n.lc?n.lc:n.lu),attributes:{}};l.length>1&&g(t,l[l.length-1])&&g(t,l[l.length-2])||l.push(t)}const f=t in i?i[t].attributes:"friendly_name"in s.a?s.a:void 0;o.push({domain:c,name:(0,r.a)(t,f||{}),entity_id:t,states:l})}),{unit:t,device_class:e,identifier:Object.keys(n).join(""),data:o}},b=["counter","input_number","number"],p=t=>b.includes(t),v=t=>"unit_of_measurement"in t||"state_class"in t,w=(t,e)=>null!=t.attributes.device_class&&e.includes(t.attributes.device_class),z=" ",Z=(t,e,n,i,a=!1)=>{const o={};n.forEach(t=>{t in e&&(o[t]=e[t])});const r={};Object.entries(o).forEach(([t,e])=>{const n=e.map(t=>({s:null!=t.mean?t.mean.toString():t.state.toString(),lc:t.start/1e3,a:{},lu:t.start/1e3}));r[t]=n});const s=$(t,r,[],t.localize,i,a,!0);return((null==s?void 0:s.line)||[]).forEach(t=>{t.data.forEach(t=>{t.statistics=t.states,t.states=[]})}),s},$=(t,e,n,i,o,r=!1,s=!1)=>{const u={},c=[],m={};if(new Set([...n,...Object.keys(e)]).forEach(n=>{n in e?m[n]=e[n]:t.states[n]&&(m[n]=[{s:t.states[n].state,a:t.states[n].attributes,lu:new Date(t.states[n].last_updated).getTime()/1e3}])}),!m)return{line:[],timeline:[]};Object.keys(m).forEach(e=>{var n;const l=m[e];if(0===l.length)return;const f=(0,a.M)(e),d=e in t.states?t.states[e]:void 0,h=d||p(f)?void 0:l.find(t=>t.a&&v(t.a));let g;g=O(f,d,h,o,s)?(null==d?void 0:d.attributes.unit_of_measurement)||(null==h?void 0:h.a.unit_of_measurement)||z:{zone:i("ui.dialogs.more_info_control.zone.graph_unit"),climate:t.config.unit_system.temperature,humidifier:"%",water_heater:t.config.unit_system.temperature}[f];const y={climate:"temperature",humidifier:"humidity",water_heater:"temperature"}[f]||(null===(n=(null==d?void 0:d.attributes)||(null==h?void 0:h.a))||void 0===n?void 0:n.device_class),b=D(g,y,r);g?b&&b in u&&e in u[b]?u[b][e].push(...l):b&&(b in u||(u[b]={}),u[b][e]=l):c.push(_(i,t.locale,t.config,t.entities,e,l,d))});return{line:Object.keys(u).map(e=>{const n=e.split("_"),i=n[0],a=n.slice(1).join("_")||void 0;return y(i,a,u[e],t.states)}),timeline:c}},D=(t,e,n)=>n?`${t}_${e||""}`:t,O=(t,e,n,i,a=!1)=>a||p(t)||null!=e&&v(e.attributes)||null!=e&&"sensor"===t&&w(e,i)||null!=n,T=(t,e,n=!0)=>{if(!e)return t;const i=Object.assign(Object.assign({},t),{},{line:[]}),a={};for(const u of t.line){const t=D(u.unit,u.device_class,n);t&&(a[t]={historyItem:u})}for(const u of e.line){var o,r;if(u.unit===z)u.unit=null!==(o=null===(r=t.line.find(t=>t.identifier===u.identifier))||void 0===r?void 0:r.unit)&&void 0!==o?o:z;const e=D(u.unit,u.device_class,n);e&&(e in a?a[e].ltsItem=u:a[e]={ltsItem:u})}for(const{historyItem:u,ltsItem:c}of Object.values(a)){if(!u||!c){i.line.push(u||c);continue}const t=Object.assign(Object.assign({},u),{},{data:[]}),e=new Set([...u.data.map(t=>t.entity_id),...c.data.map(t=>t.entity_id)]);for(const n of e){var s;const e=u.data.find(t=>t.entity_id===n),i=c.data.find(t=>t.entity_id===n);if(!e||!i){t.data.push(e||i);continue}const a=(null===(s=e.states[0])||void 0===s?void 0:s.last_changed)||i.statistics[i.statistics.length-1].last_changed+1,o=[];for(const t of i.statistics){if(t.last_changed>=a)break;o.push(t)}t.data.push(0===o.length?e:Object.assign(Object.assign({},e),{},{statistics:o}))}i.line.push(t)}return i};i()}catch(u){i(u)}})}}]);
//# sourceMappingURL=46108.ac0f85a0e618e0eb.js.map