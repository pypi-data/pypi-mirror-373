export const __webpack_ids__=["74747"];export const __webpack_modules__={68135:function(e,t,i){i.a(e,async function(e,o){try{i.d(t,{G:()=>c});var a=i(62229),n=i(28105),r=i(43890),s=e([a,r]);[a,r]=s.then?(await s)():s;const l=(0,n.Z)(e=>new Intl.RelativeTimeFormat(e.language,{numeric:"auto"})),c=(e,t,i,o=!0)=>{const a=(0,r.W)(e,i,t);return o?l(t).format(a.value,a.unit):Intl.NumberFormat(t.language,{style:"unit",unit:a.unit,unitDisplay:"long"}).format(Math.abs(a.value))};o()}catch(e){o(e)}})},16037:function(e,t,i){i.d(t,{V:()=>a});var o=i(53049);const a=(e,t)=>(e=>{switch(e){case"de":case"lb":return!0;default:return!1}})(t)?(0,o.f)(e):e.toLocaleLowerCase(t)},43890:function(e,t,i){i.a(e,async function(e,o){try{i.d(t,{W:()=>h});var a=i(7722),n=i(66233),r=i(58104),s=i(34302);const l=1e3,c=60,d=60*c;function h(e,t=Date.now(),i,o={}){const h={...u,...o||{}},p=(+e-+t)/l;if(Math.abs(p)<h.second)return{value:Math.round(p),unit:"second"};const g=p/c;if(Math.abs(g)<h.minute)return{value:Math.round(g),unit:"minute"};const _=p/d;if(Math.abs(_)<h.hour)return{value:Math.round(_),unit:"hour"};const m=new Date(e),y=new Date(t);m.setHours(0,0,0,0),y.setHours(0,0,0,0);const f=(0,a.j)(m,y);if(0===f)return{value:Math.round(_),unit:"hour"};if(Math.abs(f)<h.day)return{value:f,unit:"day"};const b=(0,s.Bt)(i),v=(0,n.z)(m,{weekStartsOn:b}),w=(0,n.z)(y,{weekStartsOn:b}),$=(0,r.p)(v,w);if(0===$)return{value:f,unit:"day"};if(Math.abs($)<h.week)return{value:$,unit:"week"};const x=m.getFullYear()-y.getFullYear(),P=12*x+m.getMonth()-y.getMonth();return 0===P?{value:$,unit:"week"}:Math.abs(P)<h.month||0===x?{value:P,unit:"month"}:{value:Math.round(x),unit:"year"}}const u={second:45,minute:45,hour:22,day:5,week:4,month:11};o()}catch(p){o(p)}})},40645:function(e,t,i){i.d(t,{P:()=>o});const o=(e,t,i=!0,o=!0)=>{let a,n=0;const r=(...r)=>{const s=()=>{n=!1===i?0:Date.now(),a=void 0,e(...r)},l=Date.now();n||!1!==i||(n=l);const c=t-(l-n);c<=0||c>t?(a&&(clearTimeout(a),a=void 0),n=l,e(...r)):a||!1===o||(a=window.setTimeout(s,c))};return r.cancel=()=>{clearTimeout(a),a=void 0,n=0},r}},8685:function(e,t,i){var o=i(73742),a=i(59048),n=i(26292),r=i(31733),s=i(25191);i(82601);class l extends a.oi{render(){const e=this.label;return a.dy` <div class="badge ${(0,r.$)({"icon-only":this.iconOnly})}" role="${(0,s.o)("button"===this.type?"button":void 0)}" tabindex="${(0,s.o)("button"===this.type?"0":void 0)}"> <ha-ripple .disabled="${"button"!==this.type}"></ha-ripple> <slot name="icon"></slot> ${this.iconOnly?a.Ld:a.dy`<span class="info"> ${e?a.dy`<span class="label">${e}</span>`:a.Ld} <span class="content"><slot></slot></span> </span>`} </div> `}constructor(...e){super(...e),this.type="badge",this.iconOnly=!1}}l.styles=a.iv`:host{--badge-color:var(--secondary-text-color);-webkit-tap-highlight-color:transparent}.badge{position:relative;--ha-ripple-color:var(--badge-color);--ha-ripple-hover-opacity:0.04;--ha-ripple-pressed-opacity:0.12;transition:box-shadow 180ms ease-in-out,border-color 180ms ease-in-out;display:flex;flex-direction:row;align-items:center;justify-content:center;gap:8px;height:var(--ha-badge-size,36px);min-width:var(--ha-badge-size,36px);padding:0px 12px;box-sizing:border-box;width:auto;border-radius:var(--ha-badge-border-radius,calc(var(--ha-badge-size,36px)/ 2));background:var(--ha-card-background,var(--card-background-color,#fff));-webkit-backdrop-filter:var(--ha-card-backdrop-filter,none);backdrop-filter:var(--ha-card-backdrop-filter,none);border-width:var(--ha-card-border-width,1px);box-shadow:var(--ha-card-box-shadow,none);border-style:solid;border-color:var(--ha-card-border-color,var(--divider-color,#e0e0e0))}.badge:focus-visible{--shadow-default:var(--ha-card-box-shadow, 0 0 0 0 transparent);--shadow-focus:0 0 0 1px var(--badge-color);border-color:var(--badge-color);box-shadow:var(--shadow-default),var(--shadow-focus)}[role=button]{cursor:pointer}[role=button]:focus{outline:0}.info{display:flex;flex-direction:column;align-items:flex-start;padding-inline-start:initial;text-align:center}.label{font-size:var(--ha-font-size-xs);font-style:normal;font-weight:var(--ha-font-weight-medium);line-height:10px;letter-spacing:.1px;color:var(--secondary-text-color)}.content{font-size:var(--ha-badge-font-size, var(--ha-font-size-s));font-style:normal;font-weight:var(--ha-font-weight-medium);line-height:var(--ha-line-height-condensed);letter-spacing:.1px;color:var(--primary-text-color)}::slotted([slot=icon]){--mdc-icon-size:var(--ha-badge-icon-size, 18px);color:var(--badge-color);line-height:0;margin-left:-4px;margin-right:0;margin-inline-start:-4px;margin-inline-end:0}::slotted(img[slot=icon]){width:30px;height:30px;border-radius:50%;object-fit:cover;overflow:hidden;margin-left:-10px;margin-right:0;margin-inline-start:-10px;margin-inline-end:0}.badge.icon-only{padding:0}.badge.icon-only ::slotted([slot=icon]){margin-left:0;margin-right:0;margin-inline-start:0;margin-inline-end:0}`,(0,o.__decorate)([(0,n.Cb)()],l.prototype,"type",void 0),(0,o.__decorate)([(0,n.Cb)()],l.prototype,"label",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean,attribute:"icon-only"})],l.prototype,"iconOnly",void 0),l=(0,o.__decorate)([(0,n.Mo)("ha-badge")],l)},70233:function(e,t,i){i.a(e,async function(e,o){try{i.d(t,{Fb:()=>b,Gt:()=>v,Og:()=>u,PG:()=>f,kh:()=>d,l:()=>_,oA:()=>h,tm:()=>m,uq:()=>g});var a=i(37528),n=i(44272),r=i(45064),s=i(43563),l=i(89166),c=e([l]);l=(c.then?(await c)():c)[0];const d=["camera","configurator"],h=["scene","automation"],u=["script"],p=["alarm_control_panel","cover","climate","conversation","fan","humidifier","input_boolean","light","lock","siren","script","switch","valve","water_heater","weather"],g=["update"],_=["alarm_control_panel","automation","camera","climate","configurator","conversation","counter","cover","date","datetime","fan","group","humidifier","image","input_boolean","input_datetime","lawn_mower","light","lock","media_player","person","remote","script","scene","siren","sun","switch","time","timer","update","vacuum","valve","water_heater","weather"],m=["input_number","input_select","input_text","number","scene","select","text","update","event"],y=["camera","configurator"],f=(e,t)=>(0,a.p)(e,"history")&&!y.includes((0,n.M)(t)),b=(e,t,i=[])=>{if(!(0,a.p)(e,"logbook"))return!1;const o=e.states[t];if(!o)return!1;const r=(0,n.M)(t);return!(s.jV.includes(r)&&(0,l.zP)(r,o,void 0,i)||y.includes(r))},v=e=>{const t=(0,n.M)(e.entity_id);if("group"===t){const t=(0,r.W)(e);return null!=t&&"group"!==t&&p.includes(t)}return p.includes(t)};o()}catch(e){o(e)}})},11799:function(e,t,i){i.d(t,{F:()=>a});var o=i(39884);const a=(e,t)=>new Promise(a=>{const n=t.closeDialog,r=t.logInHereAction;(0,o.B)(e,"show-dialog",{dialogTag:"dialog-cloud-already-connected",dialogImport:()=>Promise.all([i.e("75696"),i.e("76782"),i.e("33068")]).then(i.bind(i,44447)),dialogParams:{...t,closeDialog:()=>{n?.(),a(!1)},logInHereAction:()=>{r?.(),a(!0)}}})})},25874:function(e,t,i){i.a(e,async function(e,t){try{i(64510);var o=i(73742),a=i(59048),n=i(26292),r=i(39884),s=i(78206),l=(i(12942),i(31138),i(72953)),c=(i(56161),i(37492),i(95814)),d=i(31307),h=i(60164),u=i(9565),p=i(11799),g=i(52668),_=e([s,l,h]);[s,l,h]=_.then?(await _)():_;class m extends a.oi{render(){return this.cardLess?this._renderLoginForm():a.dy` <ha-card outlined .header="${this.localize(`ui.panel.${this.translationKeyPanel}.login.sign_in`)}"> ${this._renderLoginForm()} </ha-card> `}_renderLoginForm(){return a.dy` <div class="card-content login-form"> ${this._error?a.dy`<ha-alert alert-type="error">${this._error}</ha-alert>`:a.Ld} <ha-textfield .label="${this.localize(`ui.panel.${this.translationKeyPanel}.login.email`)}" id="email" name="username" type="email" autocomplete="username" required .value="${this.email??""}" @keydown="${this._keyDown}" .disabled="${this._inProgress}" .validationMessage="${this.localize(`ui.panel.${this.translationKeyPanel}.login.email_error_msg`)}"></ha-textfield> <ha-password-field id="password" name="password" .label="${this.localize(`ui.panel.${this.translationKeyPanel}.login.password`)}" autocomplete="current-password" required minlength="8" @keydown="${this._keyDown}" .disabled="${this._inProgress}" .validationMessage="${this.localize(`ui.panel.${this.translationKeyPanel}.login.password_error_msg`)}"></ha-password-field> </div> <div class="card-actions"> <ha-button appearance="plain" .disabled="${this._inProgress}" @click="${this._handleForgotPassword}"> ${this.localize(`ui.panel.${this.translationKeyPanel}.login.forgot_password`)} </ha-button> <ha-progress-button @click="${this._handleLogin}" .progress="${this._inProgress}">${this.localize(`ui.panel.${this.translationKeyPanel}.login.sign_in`)}</ha-progress-button> </div> `}_keyDown(e){"Enter"===e.key&&this._handleLogin()}async _handleLogin(){if(!this._inProgress){if(!this.emailField.reportValidity())return void this.emailField.focus();if(!this._passwordField.reportValidity())return void this._passwordField.focus();this._inProgress=!0,this._login(this.emailField.value,this._passwordField.value,this.checkConnection)}}_handleForgotPassword(){(0,r.B)(this,"cloud-forgot-password")}static get styles(){return[c.Qx,a.iv`ha-card{overflow:hidden}ha-card .card-header{margin-bottom:-8px}.card-actions{display:flex;justify-content:space-between;align-items:center}.login-form{display:flex;flex-direction:column}`]}constructor(...e){super(...e),this.checkConnection=!1,this.translationKeyPanel="config.cloud",this.cardLess=!1,this._inProgress=!1,this._handleCloudLoginError=async(e,t,i,o)=>{const a=e&&e.body&&e.body.code;if("mfarequired"===a){const e=await(0,h.showPromptDialog)(this,{title:this.localize(`ui.panel.${this.translationKeyPanel}.login.totp_code_prompt_title`),inputLabel:this.localize(`ui.panel.${this.translationKeyPanel}.login.totp_code`),inputType:"text",defaultValue:"",confirmText:this.localize(`ui.panel.${this.translationKeyPanel}.login.submit`),dismissText:this.localize(`ui.panel.${this.translationKeyPanel}.login.cancel`)});if(null!==e&&""!==e)return this._login(t,i,o,e),"continue"}if("alreadyconnectederror"===a){const o=await(0,p.F)(this,{details:JSON.parse(e.body.message)});return o&&this._login(t,i,!1),o?"continue":"cancel"}if("PasswordChangeRequired"===a)return(0,h.showAlertDialog)(this,{title:this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_password_change_required`)}),"password-change";if("usernotfound"!==a||t===t.toLowerCase())switch(a){case"UserNotConfirmed":return this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_email_confirm_necessary`);case"mfarequired":return this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_mfa_code_required`);case"mfaexpiredornotstarted":return this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_mfa_expired_or_not_started`);case"invalidtotpcode":return this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_totp_code_invalid`);default:return e&&e.body&&e.body.message?e.body.message:"Unknown error"}else this._login(t.toLowerCase(),i,o)},this._login=async(e,t,i,o)=>{if(!t&&!o)throw new Error("Password or code required");try{if(this.hass){const a=await(0,d._Y)({hass:this.hass,email:e,...o?{code:o}:{password:t},check_connection:i});a.cloud_pipeline&&await(0,h.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.cloud.login.cloud_pipeline_title"),text:this.hass.localize("ui.panel.config.cloud.login.cloud_pipeline_text"),confirmText:this.hass.localize("ui.common.yes"),dismissText:this.hass.localize("ui.common.no")})&&(0,u.GV)(this.hass,a.cloud_pipeline)}else await(0,g.ao)({email:e,...o?{code:o}:{password:t}});this.email="",(0,r.B)(this,"ha-refresh-cloud-status")}catch(o){const a=await this._handleCloudLoginError(o,e,t,i);if("cancel"===a)return this._inProgress=!1,this.email="",void(this._passwordField.value="");if("password-change"===a)return void this._handleForgotPassword();"continue"!==a&&(this._inProgress=!1,this._error=a)}}}}(0,o.__decorate)([(0,n.Cb)({attribute:!1})],m.prototype,"hass",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean,attribute:"check-connection"})],m.prototype,"checkConnection",void 0),(0,o.__decorate)([(0,n.Cb)()],m.prototype,"email",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:!1})],m.prototype,"localize",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:"translation-key-panel"})],m.prototype,"translationKeyPanel",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean,attribute:"card-less"})],m.prototype,"cardLess",void 0),(0,o.__decorate)([(0,n.IO)("#email",!0)],m.prototype,"emailField",void 0),(0,o.__decorate)([(0,n.IO)("#password",!0)],m.prototype,"_passwordField",void 0),(0,o.__decorate)([(0,n.SB)()],m.prototype,"_error",void 0),(0,o.__decorate)([(0,n.SB)()],m.prototype,"_inProgress",void 0),m=(0,o.__decorate)([(0,n.Mo)("cloud-login")],m),t()}catch(e){t(e)}})},91593:function(e,t,i){i.a(e,async function(e,o){try{i.d(t,{K1:()=>M,ak:()=>k,fp:()=>C,g5:()=>z});var a=i(73742),n=i(59048),r=i(26292),s=i(31733),l=i(36180),c=i(28105),d=i(34394),h=i(45657),u=i(44272),p=i(6219),g=i(15459),_=i(28350),m=i(87409),y=(i(8685),i(82601),i(73048)),f=(i(993),i(36925)),b=i(76815),v=i(45063),w=i(88887),$=i(37807),x=e([y]);y=(x.then?(await x)():x)[0];const P="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",k=["minimal","standard","complete"],z={type:"entity",show_name:!1,show_state:!0,show_icon:!0},C=e=>{const t={...e};return e.display_type&&(void 0===e.show_name&&"complete"===e.display_type&&(t.show_name=!0),void 0===e.show_state&&"minimal"===e.display_type&&(t.show_state=!1),delete t.display_type),t};class M extends n.oi{static async getConfigElement(){return await Promise.all([i.e("16367"),i.e("75663"),i.e("49170"),i.e("85727")]).then(i.bind(i,26250)),document.createElement("hui-entity-badge-editor")}static getStubConfig(e,t,i){return{type:"entity",entity:(0,v.j)(e,1,t,i,["sensor","light","switch"])[0]||""}}setConfig(e){this._config={...z,...C(e)}}get hasAction(){return!this._config?.tap_action||(0,$._)(this._config?.tap_action)||(0,$._)(this._config?.hold_action)||(0,$._)(this._config?.double_tap_action)}_getImageUrl(e){const t=e.attributes.entity_picture_local||e.attributes.entity_picture;if(!t)return;let i=this.hass.hassUrl(t);return"camera"===(0,p.N)(e)&&(i=(0,f.Ch)(i,32,32)),i}render(){if(!this._config||!this.hass)return n.Ld;const e=this._config.entity,t=e?this.hass.states[e]:void 0;if(!t)return n.dy` <ha-badge .label="${e}" class="error"> <ha-svg-icon slot="icon" .hass="${this.hass}" .path="${P}"></ha-svg-icon> ${this.hass.localize("ui.badge.entity.not_found")} </ha-badge> `;const i=(0,_.v)(t),o={"--badge-color":this._computeStateColor(t,this._config.color)},a=n.dy` <state-display .stateObj="${t}" .hass="${this.hass}" .content="${this._config.state_content}" .name="${this._config.name}"> </state-display> `,r=this._config.name||(0,g.C)(t),c=this._config.show_state,d=this._config.show_name,h=this._config.show_icon,u=this._config.show_entity_picture?this._getImageUrl(t):void 0,p=c&&d?r:void 0,m=c?a:d?r:void 0;return n.dy` <ha-badge .type="${this.hasAction?"button":"badge"}" @action="${this._handleAction}" .actionHandler="${(0,b.K)({hasHold:(0,$._)(this._config.hold_action),hasDoubleClick:(0,$._)(this._config.double_tap_action)})}" .label="${p}" .iconOnly="${!m}" style="${(0,l.V)(o)}" class="${(0,s.$)({active:i})}"> ${h?u?n.dy`<img slot="icon" src="${u}" aria-hidden>`:n.dy` <ha-state-icon slot="icon" .hass="${this.hass}" .stateObj="${t}" .icon="${this._config.icon}"></ha-state-icon> `:n.Ld} ${m} </ha-badge> `}_handleAction(e){(0,w.G)(this,this.hass,this._config,e.detail.action)}constructor(...e){super(...e),this._computeStateColor=(0,c.Z)((e,t)=>{if(t)return(0,_.v)(e)?(0,d.I)(t):void 0;if("light"===(0,u.M)(e.entity_id)&&e.attributes.rgb_color){const t=(0,h.DM)(e.attributes.rgb_color);return t[1]<.4&&(t[1]<.1?t[2]=225:t[1]=.4),(0,h.CO)((0,h.XG)(t))}return(0,m.Hh)(e)})}}M.styles=n.iv`ha-badge{--badge-color:var(--state-inactive-color)}ha-badge.error{--badge-color:var(--red-color)}ha-badge.active{--badge-color:var(--primary-color)}`,(0,a.__decorate)([(0,r.Cb)({attribute:!1})],M.prototype,"hass",void 0),(0,a.__decorate)([(0,r.SB)()],M.prototype,"_config",void 0),M=(0,a.__decorate)([(0,r.Mo)("hui-entity-badge")],M),o()}catch(e){o(e)}})}};
//# sourceMappingURL=74747.8c917b6291ae72f4.js.map