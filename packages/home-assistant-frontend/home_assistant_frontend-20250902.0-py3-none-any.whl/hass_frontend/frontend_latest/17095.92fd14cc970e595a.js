export const __webpack_ids__=["17095"];export const __webpack_modules__={87578:function(e,t,i){i.d(t,{x:()=>r});const r=(e,t)=>e.substring(0,t.length)===t},11398:function(e,t,i){var r=i(73742),a=i(59048),o=i(26292),s=i(95814);i(993);class n extends a.oi{render(){return a.dy` <div class="timeline-start"> ${this.label?"":a.dy` <ha-svg-icon .path="${this.icon||"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}"></ha-svg-icon> `} ${this.lastItem?"":a.dy`<div class="line"></div>`} </div> <div class="content"> <slot></slot> ${this.moreItems?a.dy` <div> ${this._showMore||1===this.moreItems.length?this.moreItems:a.dy` <button class="link" @click="${this._handleShowMore}"> Show ${this.moreItems.length} more items </button> `} </div> `:""} </div> `}_handleShowMore(){this._showMore=!0}static get styles(){return[a.iv`:host{display:flex;flex-direction:row}:host(:not([lastItem])){min-height:50px}:host([label]){margin-top:-8px;font-style:italic;color:var(--timeline-label-color,var(--secondary-text-color))}.timeline-start{display:flex;flex-direction:column;align-items:center;margin-right:8px;margin-inline-end:8px;margin-inline-start:initial;width:24px}:host([not-enabled]) ha-svg-icon{opacity:.5}ha-svg-icon{color:var(--timeline-ball-color,var(--timeline-color,var(--secondary-text-color)));border-radius:50%}:host([raised]) ha-svg-icon{transform:scale(1.3)}.line{flex:1;width:2px;background-color:var(--timeline-line-color,var(--timeline-color,var(--secondary-text-color)));margin:4px 0}.content{margin-top:2px}:host(:not([lastItem])) .content{padding-bottom:16px}:host([label]) .content{margin-top:0;padding-top:6px}`,s.k1]}constructor(...e){super(...e),this.label=!1,this.raised=!1,this.notEnabled=!1,this.lastItem=!1,this._showMore=!1}}(0,r.__decorate)([(0,o.Cb)({type:Boolean,reflect:!0})],n.prototype,"label",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean,reflect:!0})],n.prototype,"raised",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:"not-enabled",reflect:!0,type:Boolean})],n.prototype,"notEnabled",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:"last-item",type:Boolean})],n.prototype,"lastItem",void 0),(0,r.__decorate)([(0,o.Cb)({type:String})],n.prototype,"icon",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:!1})],n.prototype,"moreItems",void 0),(0,r.__decorate)([(0,o.SB)()],n.prototype,"_showMore",void 0),n=(0,r.__decorate)([(0,o.Mo)("ha-timeline")],n)},28228:function(e,t,i){var r=i(73742),a=i(24110),o=i(59048),s=i(26292);i(21352),i(48017);class n extends o.oi{render(){return o.dy` <ha-code-editor .value="${(0,a.dump)(this.trace.blueprint_inputs||"").trimRight()}" read-only dir="ltr"></ha-code-editor> `}}(0,r.__decorate)([(0,s.Cb)({attribute:!1})],n.prototype,"hass",void 0),(0,r.__decorate)([(0,s.Cb)({attribute:!1})],n.prototype,"trace",void 0),n=(0,r.__decorate)([(0,s.Mo)("ha-trace-blueprint-config")],n)},12838:function(e,t,i){var r=i(73742),a=i(24110),o=i(59048),s=i(26292);i(21352),i(48017);class n extends o.oi{render(){return o.dy` <ha-code-editor .value="${(0,a.dump)(this.trace.config).trimRight()}" read-only dir="ltr"></ha-code-editor> `}static get styles(){return[o.iv``]}}(0,r.__decorate)([(0,s.Cb)({attribute:!1})],n.prototype,"hass",void 0),(0,r.__decorate)([(0,s.Cb)({attribute:!1})],n.prototype,"trace",void 0),n=(0,r.__decorate)([(0,s.Mo)("ha-trace-config")],n)},64261:function(e,t,i){i.a(e,async function(e,t){try{var r=i(73742),a=i(59048),o=i(26292),s=(i(3930),i(63583)),n=e([s]);s=(n.then?(await n)():n)[0];class c extends a.oi{render(){return this.logbookEntries.length?a.dy` <ha-logbook-renderer relative-time .hass="${this.hass}" .entries="${this.logbookEntries}" .narrow="${this.narrow}"></ha-logbook-renderer> <hat-logbook-note .hass="${this.hass}" .domain="${this.trace.domain}"></hat-logbook-note> `:a.dy`<div class="padded-box"> No Logbook entries found for this step. </div>`}static get styles(){return[a.iv`.padded-box{padding:16px}`]}constructor(...e){super(...e),this.narrow=!1}}(0,r.__decorate)([(0,o.Cb)({attribute:!1})],c.prototype,"hass",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean,reflect:!0})],c.prototype,"narrow",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:!1})],c.prototype,"trace",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:!1})],c.prototype,"logbookEntries",void 0),c=(0,r.__decorate)([(0,o.Mo)("ha-trace-logbook")],c),t()}catch(e){t(e)}})},98326:function(e,t,i){i.a(e,async function(e,t){try{i(2394),i(81738),i(6989);var r=i(73742),a=i(24110),o=i(72644),s=i(59048),n=i(26292),c=i(31733),h=i(74266),d=(i(21352),i(48017),i(3930),i(59715)),l=i(63583),p=i(19666),g=i(18973),u=i(97133),_=i(21756),b=e([l,_,g,h]);[l,_,g,h]=b.then?(await b)():b;const m=["step_config","changed_variables","logbook"];class v extends s.oi{render(){return s.dy` <div class="padded-box trace-info"> ${this._renderSelectedTraceInfo()} </div> <div class="tabs top"> ${m.map(e=>s.dy` <button .view="${e}" class="${(0,c.$)({active:this._view===e})}" @click="${this._showTab}"> ${this.hass.localize(`ui.panel.config.automation.trace.tabs.${e}`)} </button> `)} </div> ${"step_config"===this._view?this._renderSelectedConfig():"changed_variables"===this._view?this._renderChangedVars():this._renderLogbook()} `}_renderSelectedTraceInfo(){const e=this.trace.trace;if(!this.selected?.path)return this.hass.localize("ui.panel.config.automation.trace.path.choose");const t=this.selected.path.split("/");if("default"===t[t.length-1]){const i=e[t.slice(0,t.length-1).join("/")];if(i&&"default"===i[0]?.result?.choice)return this.hass.localize("ui.panel.config.automation.trace.path.default_action_executed")}if(!(this.selected.path in e))return this.hass.localize("ui.panel.config.automation.trace.path.no_further_execution");const i=[];let r=!1;for(const o of Object.keys(this.trace.trace)){if(r){if(o in this.renderedNodes)break}else{if(o!==this.selected.path)continue;r=!0}const n=e[o],c=o.substring(this.selected.path.length+1).split("/");let d=this.selected.config;for(const e of c)["undefined","string"].includes(typeof d[e])||(d=d[e]);i.push(n.map((e,i)=>{const{path:r,timestamp:c,result:l,error:p,changed_variables:u,...b}=e;if(!1===l?.enabled)return s.dy`${this.hass.localize("ui.panel.config.automation.trace.path.disabled_step")}`;const m=this.selected.type;return s.dy` ${o===this.selected.path?d.alias?s.dy`<h2>${d.alias}</h2>`:"trigger"===m?s.dy`<h2> ${(0,g.R)(d,this.hass,this._entityReg)} </h2>`:"condition"===m?s.dy`<h2> ${(0,g.m)(d,this.hass,this._entityReg)} </h2>`:"action"===m?s.dy`<h2> ${(0,_.Q)(this.hass,this._entityReg,this._labelReg,this._floorReg,d)} </h2>`:"chooseOption"===m?s.dy`<h2> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.option",{number:t[t.length-1]})} </h2>`:s.Ld:s.dy`<h2> ${o.substring(this.selected.path.length+1)} </h2>`} ${1===n.length?s.Ld:s.dy`<h3> ${this.hass.localize("ui.panel.config.automation.trace.path.iteration",{number:i+1})} </h3>`} ${o.substring(this.selected.path.length+1).includes("condition")?s.dy`[${(0,g.m)(d,this.hass,this._entityReg)}]<br>`:s.Ld} ${this.hass.localize("ui.panel.config.automation.trace.path.executed",{time:(0,h.E8)(new Date(c),this.hass.locale,this.hass.config)})} <br> ${p?s.dy`<div class="error"> ${this.hass.localize("ui.panel.config.automation.trace.path.error",{error:p})} </div>`:s.Ld} ${l?s.dy`${this.hass.localize("ui.panel.config.automation.trace.path.result")} <pre>${(0,a.dump)(l)}</pre>`:s.Ld} ${0===Object.keys(b).length?s.Ld:s.dy`<pre>${(0,a.dump)(b)}</pre>`} ${d.entity_id&&o.substring(this.selected.path.length+1).includes("entity_id")?s.dy`<pre>entity: ${d.entity_id}</pre>`:s.Ld} `}))}return i}_renderSelectedConfig(){if(!this.selected?.path)return s.Ld;const e=(0,d.nV)(this.trace.config,this.selected.path);return e?s.dy`<ha-code-editor .value="${(0,a.dump)(e).trimEnd()}" read-only dir="ltr"></ha-code-editor>`:this.hass.localize("ui.panel.config.automation.trace.path.unable_to_find_config")}_renderChangedVars(){const e=this.trace.trace[this.selected.path];return void 0===e?s.dy`<div class="padded-box"> ${this.hass.localize("ui.panel.config.automation.trace.path.step_not_executed")} </div>`:s.dy` <div class="padded-box"> ${e.map((t,i)=>s.dy` ${e.length>1?s.dy`<p> ${this.hass.localize("ui.panel.config.automation.trace.path.iteration",{number:i+1})} </p>`:""} ${0===Object.keys(t.changed_variables||{}).length?this.hass.localize("ui.panel.config.automation.trace.path.no_variables_changed"):s.dy`<pre>${(0,a.dump)(t.changed_variables).trimEnd()}</pre>`} `)} </div> `}_renderLogbook(){const e=this.trace.trace,t=e[this.selected.path],i=Object.keys(this.trackedNodes),r=i.indexOf(this.selected.path);if(-1===r)return s.dy`<div class="padded-box"> ${this.hass.localize("ui.panel.config.automation.trace.path.step_not_executed")} </div>`;let a;if(r===i.length-1){const e=new Date(t[0].timestamp),i=this.logbookEntries.findIndex(t=>new Date(1e3*t.when)>=e);a=-1===i?[]:this.logbookEntries.slice(i)}else{const o=e[i[r+1]],s=new Date(t[0].timestamp),n=new Date(o[0].timestamp);a=[];for(const e of this.logbookEntries||[]){const t=new Date(1e3*e.when);if(t>=s){if(!(t<n))break;a.push(e)}}}return a.length?s.dy` <ha-logbook-renderer relative-time .hass="${this.hass}" .entries="${a}" .narrow="${this.narrow}"></ha-logbook-renderer> <hat-logbook-note .hass="${this.hass}" .domain="${this.trace.domain}"></hat-logbook-note> `:s.dy`<div class="padded-box"> ${this.hass.localize("ui.panel.config.automation.trace.path.no_logbook_entries")} </div>`}_showTab(e){this._view=e.target.view}static get styles(){return[p.b,s.iv`.padded-box{margin:16px}:host(:not([narrow])) .trace-info{min-height:250px}pre{margin:0}.error{color:var(--error-color)}`]}constructor(...e){super(...e),this.narrow=!1,this.renderedNodes={},this._view="step_config"}}(0,r.__decorate)([(0,n.Cb)({attribute:!1})],v.prototype,"hass",void 0),(0,r.__decorate)([(0,n.Cb)({type:Boolean,reflect:!0})],v.prototype,"narrow",void 0),(0,r.__decorate)([(0,n.Cb)({attribute:!1})],v.prototype,"trace",void 0),(0,r.__decorate)([(0,n.Cb)({attribute:!1})],v.prototype,"logbookEntries",void 0),(0,r.__decorate)([(0,n.Cb)({attribute:!1})],v.prototype,"selected",void 0),(0,r.__decorate)([(0,n.Cb)({attribute:!1})],v.prototype,"renderedNodes",void 0),(0,r.__decorate)([(0,n.Cb)({attribute:!1})],v.prototype,"trackedNodes",void 0),(0,r.__decorate)([(0,n.SB)()],v.prototype,"_view",void 0),(0,r.__decorate)([(0,n.SB)(),(0,o.F_)({context:u.we,subscribe:!0})],v.prototype,"_entityReg",void 0),(0,r.__decorate)([(0,n.SB)(),(0,o.F_)({context:u.TD,subscribe:!0})],v.prototype,"_labelReg",void 0),(0,r.__decorate)([(0,n.SB)(),(0,o.F_)({context:u.WC,subscribe:!0})],v.prototype,"_floorReg",void 0),v=(0,r.__decorate)([(0,n.Mo)("ha-trace-path-details")],v),t()}catch(e){t(e)}})},51525:function(e,t,i){i.a(e,async function(e,t){try{var r=i(73742),a=i(59048),o=i(26292),s=(i(3930),i(30687)),n=e([s]);s=(n.then?(await n)():n)[0];class c extends a.oi{render(){return a.dy` <hat-trace-timeline .hass="${this.hass}" .trace="${this.trace}" .logbookEntries="${this.logbookEntries}" .selectedPath="${this.selected.path}" allow-pick> </hat-trace-timeline> <hat-logbook-note .hass="${this.hass}" .domain="${this.trace.domain}"></hat-logbook-note> `}static get styles(){return[a.iv`:host{display:block;padding:16px}`]}}(0,r.__decorate)([(0,o.Cb)({attribute:!1})],c.prototype,"hass",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:!1})],c.prototype,"trace",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:!1})],c.prototype,"logbookEntries",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:!1})],c.prototype,"selected",void 0),c=(0,r.__decorate)([(0,o.Mo)("ha-trace-timeline")],c),t()}catch(e){t(e)}})},77449:function(e,t,i){i(2394),i(81738),i(22960),i(6989);var r=i(73742),a=i(59048),o=i(26292),s=i(31733),n=i(28996);class c extends a.oi{_updateBranches(e){let t=0;const i=[],r=[];e.target.assignedElements().forEach(e=>{const a=e.clientWidth,o=e.clientHeight;r.push({x:a/2+t,height:o,start:e.hasAttribute("graph-start"),end:e.hasAttribute("graph-end"),track:e.hasAttribute("track")}),t+=a,i.push(o)}),this._totalWidth=t,this._maxHeight=Math.max(...i),this._branches=r.sort((e,t)=>e.track&&!t.track?1:e.track&&t.track?0:-1)}render(){return a.dy` <slot name="head"></slot> ${this.start?a.Ld:a.dy` <svg id="top" width="${this._totalWidth}"> ${this._branches.map(e=>e.start?"":a.YP` <path class="${(0,s.$)({track:e.track})}" d="
                      M ${this._totalWidth/2} 0
                      L ${e.x} ${n.Qs}
                      "/> `)} </svg> `} <div id="branches"> <svg id="lines" width="${this._totalWidth}" height="${this._maxHeight}"> ${this._branches.map(e=>e.end?"":a.YP` <path class="${(0,s.$)({track:e.track})}" d="
                        M ${e.x} ${e.height}
                        v ${this._maxHeight-e.height}
                        "/> `)} </svg> <slot @slotchange="${this._updateBranches}"></slot> </div> ${this.short?a.Ld:a.dy` <svg id="bottom" width="${this._totalWidth}"> ${this._branches.map(e=>e.end?"":a.YP` <path class="${(0,s.$)({track:e.track})}" d="
                      M ${e.x} 0
                      V ${n.N_}
                      L ${this._totalWidth/2} ${n.Qs+n.N_}
                      "/> `)} </svg> `} `}constructor(...e){super(...e),this.disabled=!1,this.selected=!1,this.start=!1,this.short=!1,this._branches=[],this._totalWidth=0,this._maxHeight=0}}c.styles=a.iv`:host{position:relative;display:flex;flex-direction:column;align-items:center}:host(:focus){outline:0}#branches{position:relative;display:flex;flex-direction:row;align-items:start}::slotted(*){z-index:1}::slotted([slot=head]){margin-bottom:calc(var(--hat-graph-branch-height)/ -2)}#lines{position:absolute}#top{height:var(--hat-graph-branch-height)}#bottom{height:calc(var(--hat-graph-branch-height) + var(--hat-graph-spacing))}path{stroke:var(--stroke-clr);stroke-width:2;fill:none}path.track{stroke:var(--track-clr)}:host([disabled]) path{stroke:var(--disabled-clr)}`,(0,r.__decorate)([(0,o.Cb)({type:Boolean,reflect:!0})],c.prototype,"disabled",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean})],c.prototype,"selected",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean})],c.prototype,"start",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean})],c.prototype,"short",void 0),(0,r.__decorate)([(0,o.SB)()],c.prototype,"_branches",void 0),c=(0,r.__decorate)([(0,o.Mo)("hat-graph-branch")],c)},28996:function(e,t,i){i.d(t,{N_:()=>r,Qs:()=>o,TB:()=>a});const r=10,a=30,o=20},80497:function(e,t,i){var r=i(73742),a=i(59048),o=i(26292),s=i(59719),n=i(28996);class c extends a.oi{updated(e){e.has("noFocus")&&(this.hasAttribute("tabindex")||this.noFocus?void 0!==e.get("noFocus")&&this.noFocus&&this.removeAttribute("tabindex"):this.setAttribute("tabindex","0"))}render(){const e=n.TB+(this.graphStart?2:n.N_+1),t=n.N_+n.TB;return a.dy` <svg class="${s.G?"safari":""}" width="${t}px" height="${e}px" viewBox="-${Math.ceil(t/2)} -${this.graphStart?Math.ceil(e/2):Math.ceil((n.TB+2*n.N_)/2)} ${t} ${e}"> ${this.graphStart?a.Ld:a.YP` <path class="connector" d="
              M 0 ${-n.N_-n.TB/2}
              L 0 0
            " line-caps="round"/> `} <g class="node"> <circle cx="0" cy="0" r="${n.TB/2}"/> ${this.error?a.YP` <g class="error"> <circle cx="-12" cy="${-n.TB/2}" r="8"></circle> <path transform="translate(-18 -21) scale(.5)" class="exclamation" d="${"M10 3H14V14H10V3M10 21V17H14V21H10Z"}/"> </path></g> `:a.Ld} ${this.badge?a.YP` <g class="number"> <circle cx="12" cy="${-n.TB/2}" r="8"></circle> <text x="12" y="${-n.TB/2}" text-anchor="middle" alignment-baseline="middle">${this.badge>9?"9+":this.badge}</text> </g> `:a.Ld} <g style="pointer-events:none" transform="translate(-12 -12)"> ${this.iconPath?a.YP`<path class="icon" d="${this.iconPath}/"></path>`:a.YP`<foreignObject><span class="icon"><slot name="icon"></slot></span></foreignObject>`} </g> </g> </svg> `}constructor(...e){super(...e),this.disabled=!1,this.error=!1,this.notEnabled=!1,this.graphStart=!1,this.noFocus=!1}}c.styles=a.iv`:host{display:flex;flex-direction:column;min-width:calc(var(--hat-graph-node-size) + var(--hat-graph-spacing));height:calc(var(--hat-graph-node-size) + var(--hat-graph-spacing) + 1px)}:host([graph-start]){height:calc(var(--hat-graph-node-size) + 2px)}:host([track]){--stroke-clr:var(--track-clr);--icon-clr:var(--default-icon-clr)}:host([active]) circle{--stroke-clr:var(--active-clr);--icon-clr:var(--default-icon-clr)}:host(:focus){outline:0}:host(:hover) circle{--stroke-clr:var(--hover-clr);--icon-clr:var(--default-icon-clr)}:host([not-enabled]) circle{--stroke-clr:var(--disabled-clr)}:host([not-enabled][active]) circle{--stroke-clr:var(--disabled-active-clr)}:host([not-enabled]:hover) circle{--stroke-clr:var(--disabled-hover-clr)}svg:not(.safari){width:100%;height:100%}circle,path.connector{stroke:var(--stroke-clr);stroke-width:2;fill:none}circle{fill:var(--background-clr);stroke:var(--circle-clr,var(--stroke-clr))}.error circle{fill:var(--error-color);stroke:none;stroke-width:0}.error .exclamation{fill:var(--text-primary-color)}.number circle{fill:var(--track-clr);stroke:none;stroke-width:0}.number text{font-size:var(--ha-font-size-xs);fill:var(--text-primary-color)}path.icon{fill:var(--icon-clr)}foreignObject{width:24px;height:24px}.icon{color:var(--icon-clr)}`,(0,r.__decorate)([(0,o.Cb)({attribute:!1})],c.prototype,"iconPath",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean,reflect:!0})],c.prototype,"disabled",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean})],c.prototype,"error",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:"not-enabled",reflect:!0,type:Boolean})],c.prototype,"notEnabled",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:"graph-start",reflect:!0,type:Boolean})],c.prototype,"graphStart",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean,attribute:"nofocus"})],c.prototype,"noFocus",void 0),(0,r.__decorate)([(0,o.Cb)({reflect:!0,type:Number})],c.prototype,"badge",void 0),c=(0,r.__decorate)([(0,o.Mo)("hat-graph-node")],c)},59192:function(e,t,i){var r=i(73742),a=i(59048),o=i(26292),s=i(28996);class n extends a.oi{render(){return a.dy` <svg viewBox="-${s.N_/2} 0 10 ${s.N_+s.TB+1}"> <path d="
              M 0 ${s.N_+s.TB+1}
              V 0
            " line-caps="round"/> } </svg> `}constructor(...e){super(...e),this.disabled=!1}}n.styles=a.iv`:host{display:flex;flex-direction:column;align-items:center}svg{width:var(--hat-graph-spacing);height:calc(var(--hat-graph-spacing) + var(--hat-graph-node-size) + 1px)}:host([track]){--stroke-clr:var(--track-clr)}:host-context([disabled]){--stroke-clr:var(--disabled-clr)}path{stroke:var(--stroke-clr);stroke-width:2;fill:none}`,(0,r.__decorate)([(0,o.Cb)({reflect:!0,type:Boolean})],n.prototype,"disabled",void 0),n=(0,r.__decorate)([(0,o.Mo)("hat-graph-spacer")],n)},3930:function(e,t,i){var r=i(73742),a=i(59048),o=i(26292);class s extends a.oi{render(){return"script"===this.domain?this.hass.localize("ui.panel.config.automation.trace.messages.not_all_entries_are_related_script_note"):this.hass.localize("ui.panel.config.automation.trace.messages.not_all_entries_are_related_automation_note")}constructor(...e){super(...e),this.domain="automation"}}s.styles=a.iv`:host{display:block;text-align:center;font-style:italic;padding:16px;margin-top:8px}`,(0,r.__decorate)([(0,o.Cb)({attribute:!1})],s.prototype,"hass",void 0),(0,r.__decorate)([(0,o.Cb)()],s.prototype,"domain",void 0),s=(0,r.__decorate)([(0,o.Mo)("hat-logbook-note")],s)},86662:function(e,t,i){i.a(e,async function(e,t){try{i(81738),i(29981),i(6989),i(72489);var r=i(73742),a=i(59048),o=i(26292),s=i(45332),n=i(39884),c=i(10142),h=i(66095),d=(i(48017),i(26552)),l=(i(77449),i(28996)),p=(i(80497),i(59192),i(31264)),g=e([d]);d=(g.then?(await g)():g)[0];const u="M4 2A2 2 0 0 0 2 4V12H4V8H6V12H8V4A2 2 0 0 0 6 2H4M4 4H6V6H4M22 15.5V14A2 2 0 0 0 20 12H16V22H20A2 2 0 0 0 22 20V18.5A1.54 1.54 0 0 0 20.5 17A1.54 1.54 0 0 0 22 15.5M20 20H18V18H20V20M20 16H18V14H20M5.79 21.61L4.21 20.39L18.21 2.39L19.79 3.61Z",_="M11,5H8L12,1L16,5H13V9.43C12.25,9.89 11.58,10.46 11,11.12V5M22,11L18,7V10C14.39,9.85 11.31,12.57 11,16.17C9.44,16.72 8.62,18.44 9.17,20C9.72,21.56 11.44,22.38 13,21.83C14.56,21.27 15.38,19.56 14.83,18C14.53,17.14 13.85,16.47 13,16.17C13.47,12.17 17.47,11.97 17.95,11.97V14.97L22,11M10.63,11.59C9.3,10.57 7.67,10 6,10V7L2,11L6,15V12C7.34,12.03 8.63,12.5 9.64,13.4C9.89,12.76 10.22,12.15 10.63,11.59Z",b="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",m="M21 13H14.4L19.1 17.7L17.7 19.1L13 14.4V21H11V14.3L6.3 19L4.9 17.6L9.4 13H3V11H9.6L4.9 6.3L6.3 4.9L11 9.6V3H13V9.4L17.6 4.8L19 6.3L14.3 11H21V13Z",v="M19.59,7L12,14.59L6.41,9H11V7H3V15H5V10.41L12,17.41L21,8.41",y="M20,5.41L18.59,4L7,15.59V9H5V19H15V17H8.41",$="M14,4L16.29,6.29L13.41,9.17L14.83,10.59L17.71,7.71L20,10V4M10,4H4V10L6.29,7.71L11,12.41V20H13V11.59L7.71,6.29",f="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z",x="M19,19H5V5H15V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V11H19M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z",k="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",C="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",L="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",w="M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z",V="M15,4V6H18V18H15V20H20V4M4,4V20H9V18H6V6H9V4H4Z",N="M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z",H="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",M="M12,5A2,2 0 0,1 14,7C14,7.24 13.96,7.47 13.88,7.69C17.95,8.5 21,11.91 21,16H3C3,11.91 6.05,8.5 10.12,7.69C10.04,7.47 10,7.24 10,7A2,2 0 0,1 12,5M22,19H2V17H22V19Z",I="M16,4.5V7H5V9H16V11.5L19.5,8M16,12.5V15H5V17H16V19.5L19.5,16";class E extends a.oi{_selectNode(e,t,i){return()=>{(0,n.B)(this,"graph-node-selected",{config:e,path:t,type:i})}}_renderTrigger(e,t){const i=`trigger/${t}`,r=this.trace&&i in this.trace.trace;return this.renderedNodes[i]={config:e,path:i,type:"trigger"},r&&(this.trackedNodes[i]=this.renderedNodes[i]),a.dy` <hat-graph-node graph-start ?track="${r}" @focus="${this._selectNode(e,i,"trigger")}" ?active="${this.selected===i}" .iconPath="${m}" .notEnabled="${"enabled"in e&&!1===e.enabled}" .error="${this.trace.trace[i]?.some(e=>e.error)}" tabindex="${r?"0":"-1"}"></hat-graph-node> `}_renderCondition(e,t){const i=`condition/${t}`;return this.renderedNodes[i]={config:e,path:i,type:"condition"},this.trace&&i in this.trace.trace&&(this.trackedNodes[i]=this.renderedNodes[i]),this._renderConditionNode(e,i)}_renderActionNode(e,t,i=!1,r=!1){const a=Object.keys(this._typeRenderers).find(t=>t in e)||"other";return this.renderedNodes[t]={config:e,path:t,type:"action"},this.trace&&t in this.trace.trace&&(this.trackedNodes[t]=this.renderedNodes[t]),this._typeRenderers[a].bind(this)(e,t,i,r)}_renderChooseNode(e,t,i=!1,r=!1){const o=this.trace.trace[t],n=o?o.map(e=>void 0===e.result||"default"===e.result.choice?"default":e.result.choice):[],c=n.includes("default");return a.dy` <hat-graph-branch tabindex="${void 0===o?"-1":"0"}" @focus="${this._selectNode(e,t,"action")}" ?track="${void 0!==o}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}"> <hat-graph-node .graphStart="${i}" .iconPath="${_}" ?track="${void 0!==o}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}" .error="${this.trace.trace[t]?.some(e=>e.error)}" slot="head" nofocus></hat-graph-node> ${e.choose?(0,s.r)(e.choose)?.map((i,c)=>{const h=`${t}/choose/${c}`,d=n.includes(c);return this.renderedNodes[h]={config:i,path:h,type:"chooseOption"},d&&(this.trackedNodes[h]=this.renderedNodes[h]),a.dy` <div class="graph-container" ?track="${d}"> <hat-graph-node .iconPath="${!o||d?x:f}" @focus="${this._selectNode(i,h,"chooseOption")}" ?track="${d}" ?active="${this.selected===h}" .notEnabled="${r||!1===e.enabled}"></hat-graph-node> ${null!==i.sequence?(0,s.r)(i.sequence).map((t,i)=>this._renderActionNode(t,`${h}/sequence/${i}`,!1,r||!1===e.enabled)):""} </div> `}):""} <div ?track="${c}"> <hat-graph-spacer ?track="${c}"></hat-graph-spacer> ${null!==e.default?(0,s.r)(e.default)?.map((i,a)=>this._renderActionNode(i,`${t}/default/${a}`,!1,r||!1===e.enabled)):""} </div> </hat-graph-branch> `}_renderIfNode(e,t,i=!1,r=!1){const o=this.trace.trace[t];let n=!1,c=!1;for(const e of o||[])if(n||"then"!==e.result?.choice||(n=!0),(c||"else"!==e.result?.choice)&&e.result||(c=!0),c&&n)break;return a.dy` <hat-graph-branch tabindex="${void 0===o?"-1":"0"}" @focus="${this._selectNode(e,t,"action")}" ?track="${void 0!==o}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}"> <hat-graph-node .graphStart="${i}" .iconPath="${$}" ?track="${void 0!==o}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}" slot="head" nofocus></hat-graph-node> ${e.else?a.dy`<div class="graph-container" ?track="${c}"> <hat-graph-node .iconPath="${v}" ?track="${c}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}" nofocus></hat-graph-node>${(0,s.r)(e.else).map((i,a)=>this._renderActionNode(i,`${t}/else/${a}`,!1,r||!1===e.enabled))} </div>`:a.dy`<hat-graph-spacer ?track="${c}"></hat-graph-spacer>`} <div class="graph-container" ?track="${n}"> <hat-graph-node .iconPath="${y}" ?track="${n}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}" nofocus></hat-graph-node> ${(0,s.r)(e.then??[]).map((i,a)=>this._renderActionNode(i,`${t}/then/${a}`,!1,r||!1===e.enabled))} </div> </hat-graph-branch> `}_renderConditionNode(e,t,i=!1,r=!1){const o=this.trace.trace[t];let s=!1,n=!1,c=!1;if(o)for(const e of o)if(e.result&&(s=!0,e.result.result?n=!0:c=!0),n&&c)break;return a.dy` <hat-graph-branch @focus="${this._selectNode(e,t,"condition")}" ?track="${s}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}" tabindex="${void 0===o?"-1":"0"}" short> <hat-graph-node .graphStart="${i}" slot="head" ?track="${s}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}" .iconPath="${u}" nofocus></hat-graph-node> <div style="${`width: ${l.TB+l.N_}px;`}" graph-start graph-end></div> <div ?track="${n}"></div> <hat-graph-node .iconPath="${L}" nofocus ?track="${c}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}"></hat-graph-node> </hat-graph-branch> `}_renderRepeatNode(e,t,i=!1,r=!1){const o=this.trace.trace[t],n=this.trace?.trace[`${t}/repeat/sequence/0`]?.length;return a.dy` <hat-graph-branch tabindex="${void 0===o?"-1":"0"}" @focus="${this._selectNode(e,t,"action")}" ?track="${t in this.trace.trace}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}"> <hat-graph-node .graphStart="${i}" .iconPath="${H}" ?track="${t in this.trace.trace}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}" slot="head" nofocus></hat-graph-node> <hat-graph-node .iconPath="${b}" ?track="${n>1}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}" nofocus .badge="${n>1?n:void 0}"></hat-graph-node> <div ?track="${o}"> ${(0,s.r)(e.repeat.sequence).map((i,a)=>this._renderActionNode(i,`${t}/repeat/sequence/${a}`,!1,r||!1===e.enabled))} </div> </hat-graph-branch> `}_renderServiceNode(e,t,i=!1,r=!1){return a.dy` <hat-graph-node .graphStart="${i}" .iconPath="${e.action?void 0:M}" @focus="${this._selectNode(e,t,"action")}" ?track="${t in this.trace.trace}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}" .error="${this.trace.trace[t]?.some(e=>e.error)}" tabindex="${this.trace&&t in this.trace.trace?"0":"-1"}"> ${e.action?a.dy`<ha-service-icon slot="icon" .hass="${this.hass}" .service="${e.action}"></ha-service-icon>`:a.Ld} </hat-graph-node> `}_renderWaitNode(e,t,i=!1,r=!1){return a.dy` <hat-graph-node .graphStart="${i}" .iconPath="${w}" @focus="${this._selectNode(e,t,"action")}" ?track="${t in this.trace.trace}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}" .error="${this.trace.trace[t]?.some(e=>e.error)}" tabindex="${this.trace&&t in this.trace.trace?"0":"-1"}"></hat-graph-node> `}_renderSequenceNode(e,t,i=!1,r=!1){const o=this.trace.trace[t];return a.dy` <hat-graph-branch tabindex="${void 0===o?"-1":"0"}" @focus="${this._selectNode(e,t,"action")}" ?track="${t in this.trace.trace}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}"> <div class="graph-container" ?track="${t in this.trace.trace}"> <hat-graph-node .graphStart="${i}" .iconPath="${N}" ?track="${t in this.trace.trace}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}" slot="head" nofocus></hat-graph-node> ${(0,s.r)(e.sequence).map((i,a)=>this._renderActionNode(i,`${t}/sequence/${a}`,!1,r||!1===e.enabled))} </div> </hat-graph-branch> `}_renderParallelNode(e,t,i=!1,r=!1){const o=this.trace.trace[t];return a.dy` <hat-graph-branch tabindex="${void 0===o?"-1":"0"}" @focus="${this._selectNode(e,t,"action")}" ?track="${t in this.trace.trace}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}"> <hat-graph-node .graphStart="${i}" .iconPath="${I}" ?track="${t in this.trace.trace}" ?active="${this.selected===t}" .notEnabled="${r||!1===e.enabled}" slot="head" nofocus></hat-graph-node> ${(0,s.r)(e.parallel).map((i,o)=>"sequence"in i?a.dy`<div ?track="${t in this.trace.trace}"> ${(0,s.r)(i.sequence).map((i,a)=>this._renderActionNode(i,`${t}/parallel/${o}/sequence/${a}`,!1,r||!1===e.enabled))} </div>`:this._renderActionNode(i,`${t}/parallel/${o}/sequence/0`,!1,r||!1===e.enabled))} </hat-graph-branch> `}_renderOtherNode(e,t,i=!1,r=!1){return a.dy` <hat-graph-node .graphStart="${i}" .iconPath="${p.du[(0,h.Pw)(e)]||V}" @focus="${this._selectNode(e,t,"action")}" ?track="${t in this.trace.trace}" ?active="${this.selected===t}" .error="${this.trace.trace[t]?.some(e=>e.error)}" .notEnabled="${r||!1===e.enabled}"></hat-graph-node> `}render(){const e="triggers"in this.trace.config?"triggers":"trigger",t="conditions"in this.trace.config?"conditions":"condition",i="actions"in this.trace.config?"actions":"action",r=Object.keys(this.trackedNodes),o=e in this.trace.config?(0,c.Kc)((0,s.r)(this.trace.config[e])).map((e,t)=>this._renderTrigger(e,t)):void 0;try{return a.dy` <div class="parent graph-container"> ${o?a.dy`<hat-graph-branch start .short="${o.length<2}"> ${o} </hat-graph-branch>`:""} ${t in this.trace.config?a.dy`${(0,s.r)(this.trace.config[t])?.map((e,t)=>this._renderCondition(e,t))}`:""} ${i in this.trace.config?a.dy`${(0,s.r)(this.trace.config[i]).map((e,t)=>this._renderActionNode(e,`action/${t}`))}`:""} ${"sequence"in this.trace.config?a.dy`${(0,s.r)(this.trace.config.sequence).map((e,t)=>this._renderActionNode(e,`sequence/${t}`,0===t))}`:""} </div> <div class="actions"> <ha-icon-button .disabled="${0===r.length||r[0]===this.selected}" @click="${this._previousTrackedNode}" .path="${C}"></ha-icon-button> <ha-icon-button .disabled="${0===r.length||r[r.length-1]===this.selected}" @click="${this._nextTrackedNode}" .path="${k}"></ha-icon-button> </div> `}catch(e){return a.dy` <div class="error"> Error rendering graph. Please download trace and share with the developers. </div> `}}willUpdate(e){super.willUpdate(e),e.has("trace")&&(this.renderedNodes={},this.trackedNodes={})}updated(e){if(super.updated(e),e.has("trace")){if(!this.selected||!(this.selected in this.trackedNodes)){const e=this.trackedNodes[Object.keys(this.trackedNodes)[0]];e&&(0,n.B)(this,"graph-node-selected",e)}if(this.trace){const e=Object.keys(this.trace.trace),t=Object.keys(this.renderedNodes).sort((t,i)=>e.indexOf(t)-e.indexOf(i)),i={},r={};for(const e of t)r[e]=this.renderedNodes[e],e in this.trackedNodes&&(i[e]=this.trackedNodes[e]);this.renderedNodes=r,this.trackedNodes=i}}}_previousTrackedNode(){const e=Object.keys(this.trackedNodes),t=e.indexOf(this.selected)-1;t>=0&&(0,n.B)(this,"graph-node-selected",this.trackedNodes[e[t]])}_nextTrackedNode(){const e=Object.keys(this.trackedNodes),t=e.indexOf(this.selected)+1;t<e.length&&(0,n.B)(this,"graph-node-selected",this.trackedNodes[e[t]])}static get styles(){return a.iv`:host{display:flex;--stroke-clr:var(--stroke-color, var(--secondary-text-color));--active-clr:var(--active-color, var(--primary-color));--track-clr:var(--track-color, var(--accent-color));--hover-clr:var(--hover-color, var(--primary-color));--disabled-clr:var(--disabled-color, var(--disabled-text-color));--disabled-active-clr:rgba(var(--rgb-primary-color), 0.5);--disabled-hover-clr:rgba(var(--rgb-primary-color), 0.7);--default-trigger-color:3,169,244;--rgb-trigger-color:var(--trigger-color, var(--default-trigger-color));--background-clr:var(--background-color, white);--default-icon-clr:var(--icon-color, black);--icon-clr:var(--stroke-clr);--hat-graph-spacing:${l.N_}px;--hat-graph-node-size:${l.TB}px;--hat-graph-branch-height:${l.Qs}px}.graph-container{display:flex;flex-direction:column;align-items:center}.actions{display:flex;flex-direction:column}.parent{margin-left:8px;margin-top:16px}.error{padding:16px;max-width:300px}`}constructor(...e){super(...e),this.renderedNodes={},this.trackedNodes={},this._typeRenderers={condition:this._renderConditionNode,and:this._renderConditionNode,or:this._renderConditionNode,not:this._renderConditionNode,service:this._renderServiceNode,wait_template:this._renderWaitNode,wait_for_trigger:this._renderWaitNode,repeat:this._renderRepeatNode,choose:this._renderChooseNode,if:this._renderIfNode,sequence:this._renderSequenceNode,parallel:this._renderParallelNode,other:this._renderOtherNode}}}(0,r.__decorate)([(0,o.Cb)({attribute:!1})],E.prototype,"trace",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:!1})],E.prototype,"selected",void 0),E=(0,r.__decorate)([(0,o.Mo)("hat-script-graph")],E),t()}catch(e){t(e)}})},30687:function(e,t,i){i.a(e,async function(e,t){try{i(2394),i(81738),i(22960);var r=i(73742),a=i(72644),o=i(59048),s=i(26292),n=i(25191),c=i(74266),h=i(68135),d=i(39884),l=i(20933),p=i(97133),g=i(66095),u=i(21756),_=i(59715),b=(i(11398),e([h,u,c]));[h,u,c]=b.then?(await b)():b;const m="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",v="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",y="M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",$="M13,2.03V2.05L13,4.05C17.39,4.59 20.5,8.58 19.96,12.97C19.5,16.61 16.64,19.5 13,19.93V21.93C18.5,21.38 22.5,16.5 21.95,11C21.5,6.25 17.73,2.5 13,2.03M11,2.06C9.05,2.25 7.19,3 5.67,4.26L7.1,5.74C8.22,4.84 9.57,4.26 11,4.06V2.06M4.26,5.67C3,7.19 2.25,9.04 2.05,11H4.05C4.24,9.58 4.8,8.23 5.69,7.1L4.26,5.67M2.06,13C2.26,14.96 3.03,16.81 4.27,18.33L5.69,16.9C4.81,15.77 4.24,14.42 4.06,13H2.06M7.1,18.37L5.67,19.74C7.18,21 9.04,21.79 11,22V20C9.58,19.82 8.23,19.25 7.1,18.37M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z",f="M13,2.03V2.05L13,4.05C17.39,4.59 20.5,8.58 19.96,12.97C19.5,16.61 16.64,19.5 13,19.93V21.93C18.5,21.38 22.5,16.5 21.95,11C21.5,6.25 17.73,2.5 13,2.03M11,2.06C9.05,2.25 7.19,3 5.67,4.26L7.1,5.74C8.22,4.84 9.57,4.26 11,4.06V2.06M4.26,5.67C3,7.19 2.25,9.04 2.05,11H4.05C4.24,9.58 4.8,8.23 5.69,7.1L4.26,5.67M2.06,13C2.26,14.96 3.03,16.81 4.27,18.33L5.69,16.9C4.81,15.77 4.24,14.42 4.06,13H2.06M7.1,18.37L5.67,19.74C7.18,21 9.04,21.79 11,22V20C9.58,19.82 8.23,19.25 7.1,18.37M16.82,15.19L12.71,11.08C13.12,10.04 12.89,8.82 12.03,7.97C11.13,7.06 9.78,6.88 8.69,7.38L10.63,9.32L9.28,10.68L7.29,8.73C6.75,9.82 7,11.17 7.88,12.08C8.74,12.94 9.96,13.16 11,12.76L15.11,16.86C15.29,17.05 15.56,17.05 15.74,16.86L16.78,15.83C17,15.65 17,15.33 16.82,15.19Z",x="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z",k=2,C=1e3,L=(e,t)=>Math.abs(t.getTime()-e.getTime())>C;class w{setLastReportedTime(e){this.lastReportedTime=e}renderTime(e,t){this.entries.push(o.dy` <ha-timeline label> ${(0,h.G)(e,this.hass.locale,t,!1)} later </ha-timeline> `),this.lastReportedTime=t}maybeRenderTime(e){return L(e,this.lastReportedTime)?(this.renderTime(this.lastReportedTime,e),!0):(this.lastReportedTime=e,!1)}constructor(e,t,i){this.hass=e,this.entries=t,this.lastReportedTime=new Date(i.timestamp.start)}}class V{get curItem(){return this.logbookEntries[this.curIndex]}get hasNext(){return this.curIndex<this.logbookEntries.length}maybeRenderItem(){const e=this.curItem;this.curIndex++;const t=new Date(1e3*e.when);if(0===this.pendingItems.length)return void this.pendingItems.push([t,e]);const i=this.pendingItems[this.pendingItems.length-1][0];L(i,t)&&(this._renderLogbookEntries(),this.timeTracker.renderTime(i,t)),this.pendingItems.push([t,e])}flush(){this.pendingItems.length>0&&this._renderLogbookEntries()}_renderLogbookEntries(){this.timeTracker.maybeRenderTime(this.pendingItems[0][0]);const e=[];let t,i;for(t=0;t<Math.min(this.pendingItems.length,k);t++)e.push(this._renderLogbookEntryHelper(this.pendingItems[t][1]));if(t<this.pendingItems.length)for(i=[];t<this.pendingItems.length;t++)i.push(this._renderLogbookEntryHelper(this.pendingItems[t][1]));this.entries.push(o.dy` <ha-timeline .icon="${y}" .moreItems="${i}"> ${e} </ha-timeline> `),this.timeTracker.setLastReportedTime(this.pendingItems[this.pendingItems.length-1][0]),this.pendingItems=[]}_renderLogbookEntryHelper(e){return o.dy`${e.name} (${e.entity_id}) ${e.message||`turned ${e.state}`}<br>`}constructor(e,t,i){this.entries=e,this.timeTracker=t,this.logbookEntries=i,this.pendingItems=[],this.curIndex=i.length>0&&"automation"===i[0].domain?1:0}}class N{get curItem(){return this._getItem(this.curIndex)}get hasNext(){return this.curIndex<this.keys.length}renderItem(){this.curIndex=this._renderItem(this.curIndex)}_getItem(e){return this.trace.trace[this.keys[e]]}_renderItem(e,t,i){const r=this._getItem(e);if(i){let i=0;return r.forEach(r=>{i=this._renderIteration(e,r,t)}),i}return this._renderIteration(e,r[0],t)}_renderIteration(e,t,i){if((0,_.Zm)(t.path))return this._handleTrigger(e,t);const r=new Date(t.timestamp);for(;this.logbookRenderer.hasNext&&new Date(1e3*this.logbookRenderer.curItem.when)<r;)this.logbookRenderer.maybeRenderItem();this.logbookRenderer.flush(),this.timeTracker.maybeRenderTime(r);const a=t.path;let o;try{o=(0,_.nV)(this.trace.config,a)}catch(t){return this._renderEntry(a,this.hass.localize("ui.panel.config.automation.trace.messages.path_error",{path:a})),e+1}const s=a.split("/");if(!(2===s.length)&&!i)return this._renderEntry(a,a.replace(/\//g," ")),e+1;if(i||(i=(0,g.Pw)(o)),"choose"===i)return this._handleChoose(e);if("repeat"===i)return this._handleRepeat(e);if("if"===i)return this._handleIf(e);if("sequence"===i)return this._handleSequence(e);if("parallel"===i)return this._handleParallel(e);this._renderEntry(a,(0,u.Q)(this.hass,this.entityReg,this.labelReg,this.floorReg,o,i),void 0,!1===o.enabled);let n=e+1;for(;n<this.keys.length&&this.keys[n].split("/").length!==s.length;n++);return n}_handleTrigger(e,t){return this._renderEntry(t.path,this.hass.localize("ui.panel.config.automation.trace.messages.triggered_by",{triggeredBy:t.changed_variables.trigger?.alias?"alias":"other",alias:t.changed_variables.trigger?.alias,triggeredPath:"trigger"===t.path?"manual":"trigger",trigger:this.trace.trigger,time:(0,c.E8)(new Date(t.timestamp),this.hass.locale,this.hass.config)}),v),e+1}_handleChoose(e){const t=this.keys[e],i=t.split("/").length,r=this._getItem(e)[0],a="default"===r.result?.choice,o=this._getDataFromPath(this.keys[e]),s=!1===o.enabled,n=o.alias||this.hass.localize("ui.panel.config.automation.trace.messages.choose");if(a)this._renderEntry(t,this.hass.localize("ui.panel.config.automation.trace.messages.default_action_executed",{name:n}),void 0,s);else if(r.result){const i="default"!==r.result.choice?r.result.choice+1:void 0,a=this._getDataFromPath(`${this.keys[e]}/choose/${r.result.choice}`),o=a?`${a.alias||this.hass.localize("ui.panel.config.automation.trace.messages.option_executed",{option:i})}`:this.hass.localize("ui.panel.config.automation.trace.messages.error",{error:r.error});this._renderEntry(t,`${n}: ${o}`,void 0,s)}else this._renderEntry(t,this.hass.localize("ui.panel.config.automation.trace.messages.no_action_executed",{name:n}),void 0,s);let c;for(c=e+1;c<this.keys.length;c++){const e=this.keys[c].split("/");if(e.length<=i)return c;if(a&&"default"===e[i+1]||!a&&"sequence"===e[i+3])break}for(;c<this.keys.length;){const e=this.keys[c];if(e.split("/").length<=i)return c;c=this._renderItem(c,(0,g.Pw)(this._getDataFromPath(e)))}return c}_handleRepeat(e){const t=this.keys[e],i=t.split("/").length,r=this._getDataFromPath(this.keys[e]),a=!1===r.enabled,o=r.alias||(0,u.Q)(this.hass,this.entityReg,this.labelReg,this.floorReg,r);let s;for(this._renderEntry(t,o,void 0,a),s=e+1;s<this.keys.length;s++){const e=this.keys[s];if(e.split("/").length<=i)return s;s=this._renderItem(s,(0,g.Pw)(this._getDataFromPath(e)),!0)}return s}_handleIf(e){const t=this.keys[e],i=t.split("/").length,r=this._getItem(e)[0],a=this._getDataFromPath(this.keys[e]),o=!1===a.enabled,s=a.alias||this.hass.localize("ui.panel.config.automation.trace.messages.if");if(r.result?.choice){const i=this._getDataFromPath(`${this.keys[e]}/${r.result.choice}/`),a=i?i.alias||this.hass.localize("ui.panel.config.automation.trace.messages.action_executed",{action:r.result.choice}):this.hass.localize("ui.panel.config.automation.trace.messages.error",{error:r.error});this._renderEntry(t,`${s}: ${a}`,void 0,o)}else this._renderEntry(t,this.hass.localize("ui.panel.config.automation.trace.messages.no_action_executed",{name:s}),void 0,o);let n;for(n=e+1;n<this.keys.length;n++){const e=this.keys[n],t=this.keys[n].split("/");if(t.length<=i)return n;"condition"===t[i+1]||t.length<i+2||(n=this._renderItem(n,(0,g.Pw)(this._getDataFromPath(e))))}return n}_handleSequence(e){const t=this.keys[e],i=this._getDataFromPath(this.keys[e]);let r;for(this._renderEntry(t,i.alias||(0,u.Q)(this.hass,this.entityReg,this.labelReg,this.floorReg,i,"sequence"),void 0,!1===i.enabled),r=e+1;r<this.keys.length;r++){const e=this.keys[r];this._renderItem(r,(0,g.Pw)(this._getDataFromPath(e)))}return r}_handleParallel(e){const t=this.keys[e],i=t.split("/").length,r=this._getDataFromPath(this.keys[e]),a=!1===r.enabled,o=r.alias||this.hass.localize("ui.panel.config.automation.trace.messages.execute_in_parallel");let s;for(this._renderEntry(t,o,void 0,a),s=e+1;s<this.keys.length;s++){const e=this.keys[s];if(e.split("/").length<=i)return s;s=this._renderItem(s,(0,g.Pw)(this._getDataFromPath(e)))}return s}_renderEntry(e,t,i=x,r=!1){this.entries.push(o.dy` <ha-timeline .icon="${i}" data-path="${e}" .notEnabled="${r}"> ${t}${r?o.dy`<span class="disabled"> ${this.hass.localize("ui.panel.config.automation.trace.messages.disabled")}</span>`:""} </ha-timeline> `)}_getDataFromPath(e){return(0,_.nV)(this.trace.config,e)}constructor(e,t,i,r,a,o,s,n){this.hass=e,this.entityReg=t,this.labelReg=i,this.floorReg=r,this.entries=a,this.trace=o,this.logbookRenderer=s,this.timeTracker=n,this.curIndex=0,this.keys=Object.keys(o.trace)}}class H extends o.oi{render(){if(!this.trace)return o.Ld;const e=[],t=new w(this.hass,e,this.trace),i=new V(e,t,this.logbookEntries||[]),r=new N(this.hass,this._entityReg,this._labelReg,this._floorReg,e,this.trace,i,t);for(;r.hasNext;)r.renderItem();for(;i.hasNext;)i.maybeRenderItem();i.flush();const a=()=>(0,c.E8)(new Date(this.trace.timestamp.finish),this.hass.locale,this.hass.config),s=()=>((new Date(this.trace.timestamp.finish).getTime()-new Date(this.trace.timestamp.start).getTime())/1e3).toFixed(2);let h;if("running"===this.trace.state)h={description:this.hass.localize("ui.panel.config.automation.trace.messages.still_running"),icon:$};else if("debugged"===this.trace.state)h={description:this.hass.localize("ui.panel.config.automation.trace.messages.debugged"),icon:f};else if("finished"===this.trace.script_execution)h={description:this.hass.localize("ui.panel.config.automation.trace.messages.finished",{time:a(),executiontime:s()}),icon:v};else if("aborted"===this.trace.script_execution)h={description:this.hass.localize("ui.panel.config.automation.trace.messages.aborted",{time:a(),executiontime:s()}),icon:m};else if("cancelled"===this.trace.script_execution)h={description:this.hass.localize("ui.panel.config.automation.trace.messages.cancelled",{time:a(),executiontime:s()}),icon:m};else{let e,t,i=!1;switch(this.trace.script_execution){case"failed_conditions":e="stopped_failed_conditions";break;case"failed_single":e="stopped_failed_single";break;case"failed_max_runs":e="stopped_failed_max_runs";break;case"error":i=!0,e="stopped_error",t=o.dy`<br><br>${this.trace.error}`;break;default:i=!0,e="stopped_unknown_reason"}h={description:o.dy`${this.hass.localize(`ui.panel.config.automation.trace.messages.${e}`,{reason:this.trace.script_execution,time:a(),executiontime:s()})} ${t||""}`,icon:m,className:i?"error":void 0}}return e.push(o.dy` <ha-timeline last-item .icon="${h.icon}" class="${(0,n.o)(h.className)}"> ${h.description} </ha-timeline> `),o.dy`${e}`}updated(e){if(super.updated(e),this.allowPick&&e.has("trace")&&this.trace&&this.selectedPath&&!(this.selectedPath in this.trace.trace)){const e=this.shadowRoot.querySelector("ha-timeline[data-path]");e&&((0,d.B)(this,"value-changed",{value:e.dataset.path}),this.selectedPath=e.dataset.path)}(e.has("trace")||e.has("selectedPath"))&&this.shadowRoot.querySelectorAll("ha-timeline[data-path]").forEach(e=>{if((0,l.X)(e,"selected",this.selectedPath===e.dataset.path),!this.allowPick||0===e.tabIndex)return;e.tabIndex=0;const t=()=>{this.selectedPath=e.dataset.path,(0,d.B)(this,"value-changed",{value:e.dataset.path})};e.addEventListener("click",t),e.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||t()}),e.addEventListener("mouseover",()=>{e.raised=!0}),e.addEventListener("mouseout",()=>{e.raised=!1})})}static get styles(){return[o.iv`ha-timeline[lastItem].condition{--timeline-ball-color:var(--error-color)}ha-timeline[data-path]{cursor:pointer}ha-timeline[selected]{--timeline-ball-color:var(--primary-color)}ha-timeline:focus{outline:0;--timeline-ball-color:var(--accent-color)}.error{--timeline-ball-color:var(--error-color);color:var(--error-color)}`]}constructor(...e){super(...e),this.allowPick=!1}}(0,r.__decorate)([(0,s.Cb)({attribute:!1})],H.prototype,"hass",void 0),(0,r.__decorate)([(0,s.Cb)({attribute:!1})],H.prototype,"trace",void 0),(0,r.__decorate)([(0,s.Cb)({attribute:!1})],H.prototype,"logbookEntries",void 0),(0,r.__decorate)([(0,s.Cb)({attribute:!1})],H.prototype,"selectedPath",void 0),(0,r.__decorate)([(0,s.Cb)({attribute:"allow-pick",type:Boolean})],H.prototype,"allowPick",void 0),(0,r.__decorate)([(0,s.SB)(),(0,a.F_)({context:p.we,subscribe:!0})],H.prototype,"_entityReg",void 0),(0,r.__decorate)([(0,s.SB)(),(0,a.F_)({context:p.TD,subscribe:!0})],H.prototype,"_labelReg",void 0),(0,r.__decorate)([(0,s.SB)(),(0,a.F_)({context:p.WC,subscribe:!0})],H.prototype,"_floorReg",void 0),H=(0,r.__decorate)([(0,s.Mo)("hat-trace-timeline")],H),t()}catch(e){t(e)}})},19666:function(e,t,i){i.d(t,{b:()=>r});const r=i(59048).iv`.tabs{background-color:var(--primary-background-color);border-top:1px solid var(--divider-color);border-bottom:1px solid var(--divider-color);display:flex;padding-left:4px;padding-inline-start:4px;padding-inline-end:initial}.tabs.top{border-top:none}.tabs>*{padding:2px 16px;cursor:pointer;position:relative;bottom:-1px;border:none;border-bottom:2px solid transparent;user-select:none;background:0 0;color:var(--primary-text-color);outline:0;transition:background 15ms linear}.tabs>.active{border-bottom-color:var(--primary-color)}.tabs>:focus,.tabs>:hover{background:var(--secondary-background-color)}`},59715:function(e,t,i){i.d(t,{U_:()=>n,Zm:()=>h,lj:()=>s,mA:()=>o,nV:()=>c});i(81738),i(29981);var r=i(87578),a=i(10142);const o=(e,t,i,r)=>e.callWS({type:"trace/get",domain:t,item_id:i,run_id:r}),s=(e,t,i)=>e.callWS({type:"trace/list",domain:t,item_id:i}),n=(e,t,i)=>e.callWS({type:"trace/contexts",domain:t,item_id:i}),c=(e,t)=>{const i=t.split("/").reverse();let r=e;for(;i.length;){const e=i.pop(),t=Number(e);if(isNaN(t)){let t=r[e];if(!t&&"sequence"===e)continue;t||"trigger"!==e||(t=r.triggers),t||"condition"!==e||(t=r.conditions),t||"action"!==e||(t=r.actions),r="trigger"===e?(0,a.Kc)(t):t;continue}if(Array.isArray(r))r=r[t];else if(0!==t)throw new Error("If config is not an array, can only return index 0")}return r},h=e=>"trigger"===e||(0,r.x)(e,"trigger/")},63583:function(e,t,i){i.a(e,async function(e,t){try{i(2394),i(81738),i(6989);var r=i(73742),a=i(59048),o=i(26292),s=i(31733),n=i(36180),c=i(37528),h=i(40142),d=i(45691),l=i(89868),p=i(39884),g=i(44272),u=i(67050),_=i(32483),b=i(23476),m=(i(5786),i(19262)),v=i(43563),y=i(95814),$=i(54643),f=i(35580),x=i(96222),k=e([b,m,h,d]);[b,m,h,d]=k.then?(await k)():k;const C=["script","automation"],L=e=>e.context_event_type||e.context_state||e.context_message,w=(e,t)=>t?e.replace(t," "):e;class V extends a.oi{willUpdate(e){(!this.hasUpdated&&this.virtualize||e.has("virtualize")&&this.virtualize)&&(this.hass.loadBackendTranslation("services"),this.hass.loadBackendTranslation("title"),(0,$.o)())}shouldUpdate(e){const t=e.get("hass"),i=void 0===t||t.locale!==this.hass.locale;return e.has("entries")||e.has("traceContexts")||i}render(){return this.entries?.length?a.dy` <div class="container ha-scrollbar ${(0,s.$)({narrow:this.narrow,"no-name":this.noName,"no-icon":this.noIcon})}" @scroll="${this._saveScrollPos}"> ${this.virtualize?a.dy`<lit-virtualizer @visibilityChanged="${this._visibilityChanged}" scroller class="ha-scrollbar" .items="${this.entries}" .renderItem="${this._renderLogbookItem}"> </lit-virtualizer>`:this.entries.map((e,t)=>this._renderLogbookItem(e,t))} </div> `:a.dy` <div class="container no-entries"> ${this.hass.localize("ui.components.logbook.entries_not_found")} </div> `}_saveScrollPos(e){this._savedScrollPos=e.target.scrollTop}_visibilityChanged(e){(0,p.B)(this,"hass-logbook-live",{enable:0===e.first})}_renderIndicator(e){const t=this.hass.states[e.entity_id],i=getComputedStyle(this),r={backgroundColor:void 0!==e.state?(0,_.U)(e.state,i,t):void 0};return a.dy` <div class="indicator" style="${(0,n.V)(r)}"></div> `}_renderMessage(e,t,i,r,a){if(e.entity_id&&e.state)return r?(0,v.ri)(this.hass,this.hass.localize,e.state,r,i):e.state;const o=L(e);let s=e.message;if(C.includes(i)&&e.source){if(o)return"";s=(0,v.hb)(this.hass.localize,e.source)}return s?this._formatMessageWithPossibleEntity(o?w(s,e.context_entity_id):s,t,void 0,a):""}_renderUser(e){const t=e.context_user_id&&this.userIdToName[e.context_user_id];return t?`- ${t}`:""}_renderUnseenContextSourceEntity(e,t,i){return!e.context_entity_id||t.includes(e.context_entity_id)?"":a.dy` (${this._renderEntity(e.context_entity_id,e.context_entity_id_name,i)})`}_renderContextMessage(e,t,i){if(e.context_state){const t=e.context_entity_id&&e.context_entity_id in this.hass.states?(0,v.o1)(this.hass.states[e.context_entity_id],e.context_state):void 0;return a.dy`${this.hass.localize("ui.components.logbook.triggered_by_state_of")} ${this._renderEntity(e.context_entity_id,e.context_entity_id_name,i)} ${t?(0,v.ri)(this.hass,this.hass.localize,e.context_state,t,(0,g.M)(e.context_entity_id)):e.context_state}`}if("call_service"===e.context_event_type)return a.dy`${this.hass.localize("ui.components.logbook.triggered_by_action")} ${e.context_domain&&e.context_service?`${(0,x.Lh)(this.hass.localize,e.context_domain)}:\n      ${this.hass.localize(`component.${e.context_domain}.services.${e.context_service}.name`)||this.hass.services[e.context_domain]?.[e.context_service]?.name||e.context_service}`:""}`;if(!e.context_message||t.includes(e.context_entity_id))return"";if("automation_triggered"===e.context_event_type||"script_started"===e.context_event_type){const r=e.context_source?e.context_source:e.context_message.replace("triggered by ",""),o=(0,v.hb)(this.hass.localize,r);return a.dy`${this.hass.localize("automation_triggered"===e.context_event_type?"ui.components.logbook.triggered_by_automation":"ui.components.logbook.triggered_by_script")} ${this._renderEntity(e.context_entity_id,e.context_entity_id_name,i)} ${e.context_message?this._formatMessageWithPossibleEntity(o,t,void 0,i):""}`}return a.dy` ${this.hass.localize("ui.components.logbook.triggered_by")} ${e.context_name} ${this._formatMessageWithPossibleEntity(e.context_message,t,e.context_entity_id,i)} ${this._renderUnseenContextSourceEntity(e,t,i)}`}_renderEntity(e,t,i){const r=e&&e in this.hass.states,o=t||r&&this.hass.states[e].attributes.friendly_name||e;return r?i?o:a.dy`<button class="link" @click="${this._entityClicked}" .entityId="${e}"> ${o} </button>`:o}_formatMessageWithPossibleEntity(e,t,i,r){if(-1!==e.indexOf(".")){const i=e.split(" ");for(let e=0,o=i.length;e<o;e++)if(i[e]in this.hass.states){const o=i[e];if(t.includes(o))return"";t.push(o);const s=i.splice(e);return s.shift(),a.dy`${i.join(" ")} ${this._renderEntity(o,this.hass.states[o].attributes.friendly_name,r)} ${s.join(" ")}`}}if(i&&i in this.hass.states){const o=this.hass.states[i].attributes.friendly_name;if(o&&e.endsWith(o))return t.includes(i)?"":(t.push(i),e=e.substring(0,e.length-o.length),a.dy`${e} ${this._renderEntity(i,o,r)}`)}return e}_entityClicked(e){const t=e.currentTarget.entityId;t&&(e.preventDefault(),e.stopPropagation(),(0,p.B)(this,"hass-more-info",{entityId:t}))}_handleClick(e){const t=e.currentTarget;t.traceLink&&((0,u.c)(t.traceLink),(0,p.B)(this,"closed"))}static get styles(){return[y.Qx,y.$c,y.k1,a.iv`:host([virtualize]){display:block;height:100%}.entry-container{width:100%}.entry{position:relative;display:flex;width:100%;line-height:var(--ha-line-height-expanded);padding:8px 16px;box-sizing:border-box;border-top:1px solid var(--divider-color);justify-content:space-between;align-items:center}.indicator{background-color:var(--disabled-color);height:8px;width:8px;border-radius:4px;flex-shrink:0;margin-right:12px;margin-inline-start:initial;margin-inline-end:12px;direction:var(--direction)}ha-icon-next{color:var(--secondary-text-color)}.clickable{cursor:pointer}:not(.clickable) .entry.no-entity,:not(.clickable) .no-name .entry{cursor:default}.entry:hover{background-color:rgba(var(--rgb-primary-text-color),.04)}.narrow:not(.no-icon) .time{margin-left:32px;margin-inline-start:32px;margin-inline-end:initial;direction:var(--direction)}.message-relative_time{display:flex;flex-direction:column}.secondary{font-size:var(--ha-font-size-s);line-height:var(--ha-line-height-normal)}.secondary a{color:var(--secondary-text-color)}.date{margin:8px 0;padding:0 16px}.icon-message{display:flex;align-items:center}.no-entries{text-align:center;color:var(--secondary-text-color)}state-badge{margin-right:16px;margin-inline-start:initial;flex-shrink:0;color:var(--state-icon-color);margin-inline-end:16px;direction:var(--direction)}.message{color:var(--primary-text-color)}.no-name .message:first-letter{text-transform:capitalize}a{color:var(--primary-color);text-decoration:none}button.link{color:var(--state-icon-color);text-decoration:none}.container{max-height:var(--logbook-max-height)}.container,lit-virtualizer{height:100%}lit-virtualizer{contain:size layout!important}.narrow .entry{line-height:var(--ha-line-height-normal)}.narrow .icon-message state-badge{margin-left:0;margin-inline-start:0;margin-right:8px;margin-inline-end:8px;direction:var(--direction)}`]}constructor(...e){super(...e),this.userIdToName={},this.traceContexts={},this.entries=[],this.narrow=!1,this.virtualize=!1,this.showIndicator=!1,this.noIcon=!1,this.noName=!1,this.relativeTime=!1,this._renderLogbookItem=(e,t)=>{if(!e||void 0===t)return a.Ld;const i=this.entries[t-1],r=[],o=e.entity_id?this.hass.states[e.entity_id]:void 0,n=o?(0,v.o1)(o,e.state):void 0,l=e.entity_id?(0,g.M)(e.entity_id):e.domain,p=n||e.icon||e.state||!l||!(0,c.p)(this.hass,l)?void 0:(0,f.X1)({domain:l,type:"icon",useFallback:!0,darkOptimized:this.hass.themes?.darkMode}),u=C.includes(e.domain)&&e.context_id&&e.context_id in this.traceContexts?this.traceContexts[e.context_id]:void 0,_=void 0!==u;return a.dy` <div class="entry-container ${(0,s.$)({clickable:_})}" .traceLink="${u?`/config/${u.domain}/trace/${u.item_id}?run_id=${u.run_id}`:void 0}" @click="${this._handleClick}"> ${0===t||e?.when&&i?.when&&new Date(1e3*e.when).toDateString()!==new Date(1e3*i.when).toDateString()?a.dy` <h4 class="date"> ${(0,h.p6)(new Date(1e3*e.when),this.hass.locale,this.hass.config)} </h4> `:a.Ld} <div class="entry ${(0,s.$)({"no-entity":!e.entity_id})}"> <div class="icon-message"> ${this.noIcon?"":a.dy` <state-badge .hass="${this.hass}" .overrideIcon="${e.icon}" .overrideImage="${p}" .stateObj="${e.icon?void 0:n}" .stateColor="${!1}"></state-badge> `} ${this.showIndicator?this._renderIndicator(e):""} <div class="message-relative_time"> <div class="message"> ${this.noName?"":this._renderEntity(e.entity_id,e.name,_)} ${this._renderMessage(e,r,l,n,_)} ${this._renderContextMessage(e,r,_)} </div> <div class="secondary"> <span>${(0,d.Vu)(new Date(1e3*e.when),this.hass.locale,this.hass.config)}</span> - <ha-relative-time .hass="${this.hass}" .datetime="${1e3*e.when}" capitalize></ha-relative-time> ${e.context_user_id?a.dy`${this._renderUser(e)}`:""} ${_?`- ${this.hass.localize("ui.components.logbook.show_trace")}`:""} </div> </div> </div> ${_?a.dy`<ha-icon-next></ha-icon-next>`:""} </div> </div> `}}}(0,r.__decorate)([(0,o.Cb)({attribute:!1})],V.prototype,"hass",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:!1})],V.prototype,"userIdToName",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:!1})],V.prototype,"traceContexts",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:!1})],V.prototype,"entries",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean,attribute:"narrow"})],V.prototype,"narrow",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean,attribute:"virtualize",reflect:!0})],V.prototype,"virtualize",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean,attribute:"show-indicator"})],V.prototype,"showIndicator",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean,attribute:"no-icon"})],V.prototype,"noIcon",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean,attribute:"no-name"})],V.prototype,"noName",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean,attribute:"relative-time"})],V.prototype,"relativeTime",void 0),(0,r.__decorate)([(0,l.i)(".container")],V.prototype,"_savedScrollPos",void 0),(0,r.__decorate)([(0,o.hO)({passive:!0})],V.prototype,"_saveScrollPos",null),(0,r.__decorate)([(0,o.hO)({passive:!0})],V.prototype,"_visibilityChanged",null),V=(0,r.__decorate)([(0,o.Mo)("ha-logbook-renderer")],V),t()}catch(e){t(e)}})},59719:function(e,t,i){i.d(t,{G:()=>r});const r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}};
//# sourceMappingURL=17095.92fd14cc970e595a.js.map