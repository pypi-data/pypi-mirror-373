"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["24729"],{9224:function(t,e,i){i.d(e,{H:function(){return s}});const s=5},13814:function(t,e,i){i.d(e,{g:function(){return a}});i(26847),i(2394),i(44438),i(81738),i(94814),i(22960),i(6989),i(93190),i(15519),i(56303),i(27530);var s=i(9224);const o=t=>t.reduce((t,e)=>t+parseFloat(e.state),0)/t.length,r=t=>parseFloat(t[t.length-1].state)||0,n=(t,e,i,n,a)=>{t.forEach(t=>{t.state=Number(t.state)}),t=t.filter(t=>!Number.isNaN(t.state));const c=void 0!==(null==a?void 0:a.min)?a.min:Math.min(...t.map(t=>t.state)),h=void 0!==(null==a?void 0:a.max)?a.max:Math.max(...t.map(t=>t.state)),d=(new Date).getTime(),l=(t,i,s)=>{const o=d-new Date(i.last_changed).getTime();let r=Math.abs(o/36e5-e);return s?(r=60*(r-Math.floor(r)),r=Number((10*Math.round(r/10)).toString()[0])):r=Math.floor(r),t[r]||(t[r]=[]),t[r].push(i),t};if(t=t.reduce((t,e)=>l(t,e,!1),[]),n>1&&(t=t.map(t=>t.reduce((t,e)=>l(t,e,!0),[]))),t.length)return((t,e,i,n,a,c)=>{const h=[];let d=(c-a)/80;d=0!==d?d:80;let l=i/(e-(1===n?1:0));l=isFinite(l)?l:i;let u=t.filter(Boolean)[0];n>1&&(u=u.filter(Boolean)[0]);let _=[o(u),r(u)];const f=t=>80+s.H/2-(t-a)/d,p=(t,e,i=0,s=1)=>{if(s>1&&t)return t.forEach((t,i)=>p(t,e,i,s-1));const n=l*(e+i/6);t&&(_=[o(t),r(t)]);const a=f(t?_[0]:_[1]);return h.push([n,a])};for(let s=0;s<t.length;s+=1)p(t[s],s,0,n);return h.push([i,f(_[1])]),h})(t,e,i,n,c,h)},a=(t,e,i,s,o)=>{if(!t)return;const r=t.map(t=>({state:Number(t.s),last_changed:1e3*t.lu}));return n(r,e,i,s,o)}},88809:function(t,e,i){var s=i(73742),o=i(59048),r=i(7616),n=i(9224);i(26847),i(81738),i(94814),i(27530);const a=(t,e,i,s)=>[(t-i)/2+i,(e-s)/2+s];let c,h,d,l,u=t=>t;class _ extends o.oi{render(){return(0,o.dy)(c||(c=u` ${0} `),this._path?(0,o.YP)(h||(h=u`<svg width="100%" height="100%" viewBox="0 0 500 100"> <g> <mask id="fill"> <path class="fill" fill="white" d="${0} L 500, 100 L 0, 100 z"/> </mask> <rect height="100%" width="100%" id="fill-rect" fill="var(--accent-color)" mask="url(#fill)"></rect> <mask id="line"> <path fill="none" stroke="var(--accent-color)" stroke-width="${0}" stroke-linecap="round" stroke-linejoin="round" d="${0}"></path> </mask> <rect height="100%" width="100%" id="rect" fill="var(--accent-color)" mask="url(#line)"></rect> </g> </svg>`),this._path,n.H,this._path):(0,o.YP)(d||(d=u`<svg width="100%" height="100%" viewBox="0 0 500 100"></svg>`)))}willUpdate(t){this.coordinates&&t.has("coordinates")&&(this._path=(t=>{if(!t.length)return"";let e,i,s="",o=t.filter(Boolean)[0];s+=`M ${o[0]},${o[1]}`;for(const r of t)e=r,i=a(o[0],o[1],e[0],e[1]),s+=` ${i[0]},${i[1]}`,s+=` Q${e[0]},${e[1]}`,o=e;return s+=` ${e[0]},${e[1]}`,s})(this.coordinates))}}_.styles=(0,o.iv)(l||(l=u`:host{display:flex;width:100%}.fill{opacity:.1}`)),(0,s.__decorate)([(0,r.Cb)()],_.prototype,"coordinates",void 0),(0,s.__decorate)([(0,r.SB)()],_.prototype,"_path",void 0),_=(0,s.__decorate)([(0,r.Mo)("hui-graph-base")],_)},8833:function(t,e,i){i.a(t,async function(t,s){try{i.r(e),i.d(e,{HuiGraphHeaderFooter:function(){return $}});i(40777),i(39710),i(26847),i(87799),i(1455),i(27530);var o=i(73742),r=i(59048),n=i(7616),a=i(37528),c=i(44272),h=i(6514),d=i(89166),l=i(45063),u=i(13814),_=(i(88809),t([h,d]));[h,d]=_.then?(await _)():_;let f,p,b,g,v,m=t=>t;const y=6e4,w=60*y,k=["counter","input_number","number","sensor"];class $ extends r.oi{static async getConfigElement(){return await Promise.all([i.e("73614"),i.e("15601"),i.e("15634"),i.e("26452"),i.e("2769"),i.e("19596"),i.e("74272")]).then(i.bind(i,65697)),document.createElement("hui-graph-footer-editor")}static getStubConfig(t,e,i){return{type:"graph",entity:(0,l.j)(t,1,e,i,k,t=>!isNaN(Number(t.state))&&!!t.attributes.unit_of_measurement)[0]||""}}getCardSize(){return 3}setConfig(t){if(null==t||!t.entity||!k.includes((0,c.M)(t.entity)))throw new Error("Specify an entity from within the sensor domain");const e=Object.assign({detail:1,hours_to_show:24},t);e.hours_to_show=Number(e.hours_to_show),e.detail=1===e.detail||2===e.detail?e.detail:1,this._config=e}render(){return this._config&&this.hass?this._error?(0,r.dy)(f||(f=m`<div class="errors">${0}</div>`),this._error):this._coordinates?this._coordinates.length?(0,r.dy)(g||(g=m` <hui-graph-base .coordinates="${0}"></hui-graph-base> `),this._coordinates):(0,r.dy)(b||(b=m` <div class="container"> <div class="info">No state history found.</div> </div> `)):(0,r.dy)(p||(p=m` <div class="container"> <ha-spinner size="small"></ha-spinner> </div> `)):r.Ld}connectedCallback(){super.connectedCallback(),this.hasUpdated&&this._config&&this._subscribeHistory()}disconnectedCallback(){super.disconnectedCallback(),this._unsubscribeHistory()}_subscribeHistory(){(0,a.p)(this.hass,"history")&&!this._subscribed&&this._config&&(this._subscribed=(0,d.xS)(this.hass,t=>{this._subscribed&&this._config&&(this._coordinates=(0,u.g)(t[this._config.entity],this._config.hours_to_show,500,this._config.detail,this._config.limits)||[])},this._config.hours_to_show,[this._config.entity]).catch(t=>{this._subscribed=void 0,this._error=t}),this._setRedrawTimer())}_redrawGraph(){this._coordinates&&(this._coordinates=[...this._coordinates])}_setRedrawTimer(){clearInterval(this._interval),this._interval=window.setInterval(()=>this._redrawGraph(),this._config.hours_to_show>24?w:y)}_unsubscribeHistory(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then(t=>null==t?void 0:t()),this._subscribed=void 0)}updated(t){if(!this._config||!this.hass||!t.has("_config"))return;const e=t.get("_config");e&&this._subscribed&&e.entity===this._config.entity||(this._unsubscribeHistory(),this._subscribeHistory())}}$.styles=(0,r.iv)(v||(v=m`ha-spinner{position:absolute;top:calc(50% - 14px)}.container{display:flex;justify-content:center;position:relative;padding-bottom:20%}.info{position:absolute;top:calc(50% - 16px);color:var(--secondary-text-color)}`)),(0,o.__decorate)([(0,n.Cb)({attribute:!1})],$.prototype,"hass",void 0),(0,o.__decorate)([(0,n.Cb)()],$.prototype,"type",void 0),(0,o.__decorate)([(0,n.SB)()],$.prototype,"_config",void 0),(0,o.__decorate)([(0,n.SB)()],$.prototype,"_coordinates",void 0),$=(0,o.__decorate)([(0,n.Mo)("hui-graph-header-footer")],$),s()}catch(f){s(f)}})}}]);
//# sourceMappingURL=24729.5956e410d1a2e3d5.js.map