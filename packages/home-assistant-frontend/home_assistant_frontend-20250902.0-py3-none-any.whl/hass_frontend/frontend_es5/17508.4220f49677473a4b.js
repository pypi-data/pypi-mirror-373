"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["17508"],{80471:function(e,t,r){var i=r(73742),a=r(33856),s=r(24584),n=r(7616),o=r(59048),d=r(83054);let h,c,l,_=e=>e;class v extends a._{firstUpdated(e){super.firstUpdated(e),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}}v.styles=[s.W,(0,o.iv)(h||(h=_`:host{--mdc-typography-button-text-transform:none;--mdc-typography-button-font-size:var(--ha-font-size-l);--mdc-typography-button-font-family:var(--ha-font-family-body);--mdc-typography-button-font-weight:var(--ha-font-weight-medium)}:host .mdc-fab--extended{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}:disabled{--mdc-theme-secondary:var(--disabled-text-color);pointer-events:none}`)),"rtl"===d.E.document.dir?(0,o.iv)(c||(c=_`:host .mdc-fab--extended .mdc-fab__icon{direction:rtl}`)):(0,o.iv)(l||(l=_``))],v=(0,i.__decorate)([(0,n.Mo)("ha-fab")],v)},40801:function(e,t,r){r.a(e,async function(e,i){try{r.r(t),r.d(t,{HuiCalendarCard:function(){return y}});var a=r(83788),s=(r(40777),r(26847),r(81738),r(6989),r(87799),r(1455),r(27530),r(73742)),n=r(59048),o=r(7616),d=r(55815),h=r(4427),c=r(87639),l=(r(31138),r(28146)),_=r(84144),v=r(45063),p=(r(99389),e([a,_]));[a,_]=p.then?(await p)():p;let f,u,b=e=>e;class y extends n.oi{static async getConfigElement(){return await Promise.all([r.e("73614"),r.e("15601"),r.e("15634"),r.e("26452"),r.e("2769"),r.e("19596"),r.e("87868")]).then(r.bind(r,22374)),document.createElement("hui-calendar-card-editor")}static getStubConfig(e,t,r){return{entities:(0,v.j)(e,2,t,r,["calendar"])}}setConfig(e){var t,r;if(null===(t=e.entities)||void 0===t||!t.length)throw new Error("Entities must be specified");if(!Array.isArray(e.entities))throw new Error("Entities need to be an array");this._calendars=e.entities.map((e,t)=>({entity_id:e,backgroundColor:(0,d.Eu)(t)})),(null===(r=this._config)||void 0===r?void 0:r.entities)!==e.entities&&this._fetchCalendarEvents(),this._config=Object.assign({initial_view:"dayGridMonth"},e)}getCardSize(){var e;return null!==(e=this._config)&&void 0!==e&&e.header?1:11}connectedCallback(){super.connectedCallback(),this.updateComplete.then(()=>this._attachObserver())}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver&&this._resizeObserver.disconnect()}render(){if(!this._config||!this.hass||!this._calendars.length)return n.Ld;return(0,n.dy)(f||(f=b` <ha-card> <div class="header">${0}</div> <ha-full-calendar .narrow="${0}" .events="${0}" .hass="${0}" .views="${0}" .initialView="${0}" .eventDisplay="${0}" .error="${0}" @view-changed="${0}"></ha-full-calendar> </ha-card> `),this._config.title,this._narrow,this._events,this.hass,["dayGridMonth","dayGridDay","listWeek"],this._config.initial_view,this._eventDisplay,this._error,this._handleViewChanged)}updated(e){if(super.updated(e),!this._config||!this.hass)return;const t=e.get("hass"),r=e.get("_config");(!t||!r||e.has("hass")&&t.themes!==this.hass.themes||e.has("_config")&&r.theme!==this._config.theme)&&(0,h.R)(this,this.hass.themes,this._config.theme)}_handleViewChanged(e){this._eventDisplay="dayGridMonth"===e.detail.view?"list-item":"auto",this._startDate=e.detail.start,this._endDate=e.detail.end,this._fetchCalendarEvents()}async _fetchCalendarEvents(){if(!this._startDate||!this._endDate)return;this._error=void 0;const e=await(0,l.GL)(this.hass,this._startDate,this._endDate,this._calendars);this._events=e.events,e.errors.length>0&&(this._error=`${this.hass.localize("ui.components.calendar.event_retrieval_error")}`)}_measureCard(){const e=this.shadowRoot.querySelector("ha-card");e&&(this._narrow=e.offsetWidth<870)}async _attachObserver(){this._resizeObserver||(this._resizeObserver=new ResizeObserver((0,c.D)(()=>this._measureCard(),250,!1)));const e=this.shadowRoot.querySelector("ha-card");e&&this._resizeObserver.observe(e)}constructor(...e){super(...e),this._events=[],this._calendars=[],this._eventDisplay="list-item",this._narrow=!1,this._error=void 0}}y.styles=(0,n.iv)(u||(u=b`ha-card{position:relative;padding:0 8px 8px;box-sizing:border-box;height:100%}.header{color:var(--ha-card-header-color,var(--primary-text-color));font-size:var(--ha-card-header-font-size, var(--ha-font-size-2xl));line-height:var(--ha-line-height-condensed);padding-top:16px;padding-left:8px;padding-inline-start:8px;direction:var(--direction)}ha-full-calendar{--calendar-height:400px}`)),(0,s.__decorate)([(0,o.Cb)({attribute:!1})],y.prototype,"hass",void 0),(0,s.__decorate)([(0,o.SB)()],y.prototype,"_events",void 0),(0,s.__decorate)([(0,o.SB)()],y.prototype,"_config",void 0),(0,s.__decorate)([(0,o.SB)()],y.prototype,"_calendars",void 0),(0,s.__decorate)([(0,o.SB)()],y.prototype,"_eventDisplay",void 0),(0,s.__decorate)([(0,o.SB)()],y.prototype,"_narrow",void 0),(0,s.__decorate)([(0,o.SB)()],y.prototype,"_error",void 0),y=(0,s.__decorate)([(0,o.Mo)("hui-calendar-card")],y),i()}catch(f){i(f)}})}}]);
//# sourceMappingURL=17508.4220f49677473a4b.js.map