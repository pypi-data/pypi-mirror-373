<!DOCTYPE html>

<!-- Credits to https://iamkate.com/code/tree-views/ for CSS -->

<html lang="en">
<head>
    <script type="application/ld+json">
        {{ manifest }}
    </script>
    <link
        rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
        integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
        crossorigin="anonymous"
    >
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    >
    <link rel="stylesheet" href="../omero-quay/src/omero_quay/static/html-tree-view.css">
    <meta charset='utf-8'/>
    <title>Tree view for {{manifest.investigations[0]["name"]}}</title>
</head>

<body>

    <div id="tree" class="tree_container">
        <ul class="tree">
            <ul id="investigationsTree_{{ manifest.id }}" class="treeElement">
            {% for investigation in manifest.investigations %}
                <li>
                    <details open>
                        <summary> {{ investigation.name }} </summary>
                        <ul id="studiesTree_{{ investigation.id }}" class="treeElement">
                        {% for study in manifest.studies if study.id in investigation.children %}
                            <li>
                                <details open>
                                    <summary> {{ study.name }} </summary>
                                    <ul id="assaysTree_{{ study.id }}" class="treeElement">
                                    {% for assay in manifest.assays if assay.id in study.children %}
                                        <li>
                                            <details open>
                                                <summary> {{ assay.name }} </summary>
                                                <ul id="linksTree_{{ assay.id }}" class="treeElement">
                                                {% for manifest_image in manifest.images %}
                                                    {% for assay_image in assay.images if assay_image == manifest_image.id %}
                                                        <li><a href=" {{ manifest_image.urls[0] }} ">{{manifest_image.name}}</a></li>
                                                    {% endfor %}
                                                {% endfor %}
                                                </ul>
                                            </details>
                                        </li>
                                    {% endfor %}
                                    </ul>
                                </details>
                            </li>
                        {% endfor %}
                        </ul>
                    </details>
                </li>
            {% endfor %}
            </ul>
        </ul>
    </div>

</body>

</html>
