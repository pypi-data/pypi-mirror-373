"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[6717],{39234:function(e,t,r){r.r(t),r.d(t,{RunPage:function(){return Pt},default:function(){return Ot}});var n=r(89555),i=r(48012),a=r(32599),s=r(10811),o=r(4877),l=r.n(o),d=r(31014),u=r(48588),c=r(93215),m=r(76010),g=r(25866),p=r(53677),v=r(5643),h=r(53606),f=r(50111);const Y=({runTags:e,experimentId:t,runOutputs:r,artifactUri:i,runUuid:s})=>{const{theme:o}=(0,a.u)(),l=(0,h.U)(`(min-width: ${o.responsive.breakpoints.sm}px)`);return(0,f.Y)("div",{css:(0,n.AH)({flex:1,overflow:"hidden",display:"flex",paddingBottom:o.spacing.md,position:"relative"},""),children:(0,f.Y)(v.Ay,{runUuid:s,runTags:e,runOutputs:r,useAutoHeight:l,artifactRootUri:i,experimentId:t})})};var x=r(88443),_=r(79085),I=r(58481),y=r(91144);const S=()=>{const{"*":e}=(0,c.g)();return"model-metrics"===e?g.N3.MODEL_METRIC_CHARTS:"system-metrics"===e?g.N3.SYSTEM_METRIC_CHARTS:(0,y.oX)()&&"traces"===e?g.N3.TRACES:null!==e&&void 0!==e&&e.match(/^(artifactPath|artifacts)/)?g.N3.ARTIFACTS:g.N3.OVERVIEW},M=[g.N3.ARTIFACTS,g.N3.EVALUATIONS],A=()=>{const{experimentId:e,runUuid:t}=(0,c.g)(),r=(0,c.Zp)(),{theme:n}=(0,a.u)(),s=S(),[o,l]=(0,d.useState)(M.includes(s));return(0,f.FD)(i.Y6f,{activeKey:s,onChange:n=>{e&&t&&s!==n&&(l(M.includes(n)),n!==g.N3.OVERVIEW?r(I.h.getRunPageTabRoute(e,t,n)):r(I.h.getRunPageRoute(e,t)))},tabBarStyle:{margin:o&&"0px"},children:[(0,f.Y)(i.Y6f.TabPane,{tab:(0,f.Y)(x.A,{id:"kA+QJr",defaultMessage:"Overview"})},g.N3.OVERVIEW),(0,f.Y)(i.Y6f.TabPane,{tab:(0,f.Y)(x.A,{id:"j25Ttg",defaultMessage:"Model metrics"})},g.N3.MODEL_METRIC_CHARTS),(0,f.Y)(i.Y6f.TabPane,{tab:(0,f.Y)(x.A,{id:"hFlaPP",defaultMessage:"System metrics"})},g.N3.SYSTEM_METRIC_CHARTS),(0,y.oX)()?(0,f.Y)(i.Y6f.TabPane,{tab:(0,f.Y)(x.A,{id:"s8a93+",defaultMessage:"Traces"})},g.N3.TRACES):null,(0,f.Y)(i.Y6f.TabPane,{tab:(0,f.Y)(x.A,{id:"vPqFJE",defaultMessage:"Artifacts"})},g.N3.ARTIFACTS)]})};var R=r(9133),w=r(85466),D=r(81866),C=(r(69869),r(21317));var T={name:"s5xdrg",styles:"display:flex;align-items:center"},b={name:"2ecpu6",styles:"margin-left:8px;margin-right:4px"};function E({models:e,onRegisterClick:t,experimentId:r,runUuid:s}){const{theme:o}=(0,a.u)(),l=(e,l)=>(0,f.FD)(i.rId.Group,{children:[(0,f.Y)(i.rId.Label,{children:e}),l.map((e=>{const l=(0,R.first)(e.registeredModelVersionSummaries);if(!l)return(0,f.FD)(i.rId.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_50",onClick:()=>t(e),children:[(0,f.Y)("div",{css:(0,n.AH)({marginRight:o.spacing.md},""),children:(0,R.last)(e.path.split("/"))}),(0,f.Y)(i.rId.HintColumn,{children:(0,f.Y)(c.N_,{target:"_blank",to:I.h.getRunPageTabRoute(r,s,"artifacts/"+e.path),children:(0,f.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_58",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,f.Y)(a.at,{}),children:(0,f.Y)(x.A,{id:"NqEELO",defaultMessage:"View model"})})})})]},e.absolutePath);const{status:d,displayedName:u,version:m,link:g}=l;return(0,f.Y)(c.N_,{target:"_blank",to:g,children:(0,f.FD)(i.rId.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_80",children:[(0,f.Y)(i.rId.IconWrapper,{css:T,children:"READY"===d?(0,f.Y)(C.h,{}):d?D.UA[d]:null}),(0,f.FD)("span",{css:(0,n.AH)({marginRight:o.spacing.md},""),children:[u,(0,f.FD)(i.vwO,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_90",css:b,children:["v",m]})]}),(0,f.Y)(i.rId.HintColumn,{children:(0,f.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_89",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,f.Y)(a.at,{}),children:(0,f.Y)(x.A,{id:"T1sd79",defaultMessage:"Go to model"})})})]})},e.absolutePath)}))]}),d=e.filter((e=>e.registeredModelVersionSummaries.length>0)),u=e.filter((e=>!e.registeredModelVersionSummaries.length));return(0,f.FD)(f.FK,{children:[u.length?l("Unregistered models",u):null,u.length&&d.length?(0,f.Y)(i.rId.Separator,{}):null,d.length?l("Registered models",d):null]})}const U=({runUuid:e,experimentId:t,runTags:r,artifactRootUri:s,registeredModelVersionSummaries:o})=>{const{theme:l}=(0,a.u)(),u=(0,d.useMemo)((()=>r?m.A.getLoggedModelsFromTags(r).map((({artifactPath:e})=>e)):[]),[r]),g=(0,d.useMemo)((()=>(0,R.orderBy)(u.map((e=>({path:e,absolutePath:`${s}/${e}`,registeredModelVersionSummaries:(null===o||void 0===o?void 0:o.filter((({source:t})=>t===`${s}/${e}`)))||[]}))),(e=>{var t;return parseInt((null===(t=e.registeredModelVersionSummaries[0])||void 0===t?void 0:t.version)||"0",10)}),"desc")),[u,o,s]),[p,v]=(0,d.useState)(null);if(g.length>1){const r=g.filter((e=>e.registeredModelVersionSummaries.length>0));return(0,f.FD)(f.FK,{children:[p&&(0,f.Y)(w.vR,{runUuid:e,modelPath:p.absolutePath,modelRelativePath:p.path,disabled:!1,showButton:!1,modalVisible:!0,onCloseModal:()=>v(null)}),(0,f.FD)(i.rId.Root,{modal:!1,children:[(0,f.Y)(i.paO,{placement:"bottom",title:(0,f.Y)(x.A,{id:"qE/ZB7",defaultMessage:"{registeredCount}/{loggedCount} logged models are registered",values:{registeredCount:r.length,loggedCount:g.length}}),children:(0,f.Y)(i.rId.Trigger,{asChild:!0,children:(0,f.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_195",type:"primary",endIcon:(0,f.Y)(i.D3D,{}),children:(0,f.Y)(x.A,{id:"WGN2f3",defaultMessage:"Register model"})})})}),(0,f.Y)(i.rId.Content,{align:"end",children:(0,f.Y)(E,{models:g,onRegisterClick:v,experimentId:t,runUuid:e})})]})]})}const h=(0,R.first)(g);if(!h)return null;const Y=(0,R.first)(h.registeredModelVersionSummaries);return Y?(0,f.Y)(c.N_,{to:Y.link,target:"_blank",css:(0,n.AH)({marginLeft:l.spacing.sm},""),children:(0,f.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_231",endIcon:(0,f.Y)(a.at,{}),type:"link",children:"Model registered"})}):(0,f.Y)(w.vR,{disabled:!1,runUuid:e,modelPath:h.absolutePath,modelRelativePath:h.path,showButton:!0,buttonType:"primary"})};var k={name:"ozd7xs",styles:"flex-shrink:0"};const F=({hasComparedExperimentsBefore:e,comparedExperimentIds:t=[],experiment:r,runDisplayName:n,runTags:i,runParams:a,runUuid:s,handleRenameRunClick:o,handleDeleteRunClick:l,artifactRootUri:d,registeredModelVersionSummaries:u,isLoading:m})=>{const g=[function(){var n;return e&&t?(0,f.Y)(c.N_,{to:I.h.getCompareExperimentsPageRoute(t),children:(0,f.Y)(x.A,{id:"LLm5Bo",defaultMessage:"Displaying Runs from {numExperiments} Experiments",values:{numExperiments:t.length}})}):(0,f.Y)(c.N_,{to:I.h.getExperimentPageRoute(null!==(n=null===r||void 0===r?void 0:r.experimentId)&&void 0!==n?n:""),"data-test-id":"experiment-runs-link",children:r.name})}()];return(0,f.FD)("div",{css:k,children:[(0,f.FD)(_.z,{title:(0,f.Y)("span",{"data-test-id":"runs-header",children:n}),breadcrumbs:g,children:[(0,f.Y)(_.o,{menu:[{id:"overflow-rename-button",onClick:o,itemName:(0,f.Y)(x.A,{id:"fv7vQf",defaultMessage:"Rename"})},...l?[{id:"overflow-delete-button",onClick:l,itemName:(0,f.Y)(x.A,{id:"7WkP1e",defaultMessage:"Delete"})}]:[]]}),(()=>{var e;return(0,f.Y)(U,{runUuid:s,experimentId:null!==(e=null===r||void 0===r?void 0:r.experimentId)&&void 0!==e?e:"",runTags:i,artifactRootUri:d,registeredModelVersionSummaries:u})})()]}),(0,f.Y)(A,{})]})};var L=r(88464),N=r(15579),P=r(21616),O=r(76758);const B=({status:e})=>{const{theme:t}=(0,a.u)();return(0,f.FD)(i.vwO,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewstatusbox.tsx_81",css:(0,n.AH)({backgroundColor:"FINISHED"===e?t.isDarkMode?t.colors.green800:t.colors.green100:"KILLED"===e||"FAILED"===e?t.isDarkMode?t.colors.red800:t.colors.red100:"SCHEDULED"===e||"RUNNING"===e?t.isDarkMode?t.colors.blue800:t.colors.blue100:void 0},""),children:[e&&(0,f.Y)(O.F,{status:e})," ",(0,f.Y)(a.T.Text,{css:(0,n.AH)({marginLeft:t.spacing.sm},""),children:"FINISHED"===e?(0,f.Y)(a.T.Text,{color:"success",children:(0,f.Y)(x.A,{id:"ujm55z",defaultMessage:"Finished"})}):"KILLED"===e?(0,f.Y)(a.T.Text,{color:"error",children:(0,f.Y)(x.A,{id:"AupQl+",defaultMessage:"Killed"})}):"FAILED"===e?(0,f.Y)(a.T.Text,{color:"error",children:(0,f.Y)(x.A,{id:"AM8DuO",defaultMessage:"Failed"})}):"RUNNING"===e?(0,f.Y)(a.T.Text,{color:"info",children:(0,f.Y)(x.A,{id:"On3g1B",defaultMessage:"Running"})}):"SCHEDULED"===e?(0,f.Y)(a.T.Text,{color:"info",children:(0,f.Y)(x.A,{id:"X8OaXU",defaultMessage:"Scheduled"})}):e})]})},H=({runInfo:e,tags:t})=>{var r;const n=m.A.getUser(e,t);return(0,f.Y)(c.N_,{to:I.h.searchRunsByUser(null!==(r=null===e||void 0===e?void 0:e.experimentId)&&void 0!==r?r:"",n),children:n})};var V=r(68109),z=r(41028),K=r(69526),j=r(32039),$=r(70618),W=r(9856),G=r(3288);const{systemMetricsLabel:Z,modelMetricsLabel:J}=(0,K.YK)({systemMetricsLabel:{id:"aFMLIO",defaultMessage:"System metrics"},modelMetricsLabel:{id:"NiSPrL",defaultMessage:"Model metrics"}}),X=e=>({key:t})=>t.toLowerCase().includes(e.toLowerCase());var q={name:"1ff36h2",styles:"flex-grow:1"};const Q=({metricsList:e,runInfo:t,header:r,table:s})=>{const{theme:o}=(0,a.u)(),[{column:l}]=s.getLeafHeaders();return e.length?(0,f.FD)(f.FK,{children:[r&&(0,f.Y)(i.Hjg,{children:(0,f.Y)(i.nA6,{css:(0,n.AH)({flex:1,backgroundColor:o.colors.backgroundSecondary},""),children:(0,f.FD)(a.T.Text,{bold:!0,children:[r," (",e.length,")"]})})}),e.map((({key:e,value:r})=>{var n,a;return(0,f.FD)(i.Hjg,{children:[(0,f.Y)(i.nA6,{style:{flexGrow:0,flexBasis:l.getSize()},children:(0,f.Y)(c.N_,{to:I.h.getMetricPageRoute([null!==(n=t.runUuid)&&void 0!==n?n:""],e,[null!==(a=t.experimentId)&&void 0!==a?a:""]),children:e})}),(0,f.Y)(i.nA6,{css:q,children:r.toString()})]},e)}))]}):null};var ee={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},te={name:"ozd7xs",styles:"flex-shrink:0"};const re=({latestMetrics:e,runInfo:t})=>{const{theme:r}=(0,a.u)(),{detailsPageTableStyles:s,detailsPageNoEntriesStyles:o,detailsPageNoResultsWrapperStyles:l}=(0,G.z)(),u=(0,L.A)(),[c,m]=(0,d.useState)(""),g=(0,d.useMemo)((()=>(0,R.values)(e)),[e]),p=(0,d.useMemo)((()=>[{id:"key",accessorKey:"key",header:()=>(0,f.Y)(x.A,{id:"pjlcSc",defaultMessage:"Metric"}),enableResizing:!0,size:240},{id:"value",header:()=>(0,f.Y)(x.A,{id:"t0Qkuc",defaultMessage:"Value"}),accessorKey:"value",enableResizing:!1}]),[]),v=(0,d.useMemo)((()=>{const e=g.filter((({key:e})=>(0,j.bw)(e))),t=g.filter((({key:e})=>!(0,j.bw)(e)));return e.length>0&&t.length>0?[{header:u.formatMessage(Z),metrics:e.filter(X(c))},{header:u.formatMessage(J),metrics:t.filter(X(c))}]:[{header:void 0,metrics:g.filter(X(c))}]}),[c,g,u]),h=(0,$.N4)({data:g,getCoreRowModel:(0,W.HT)(),getRowId:e=>e.key,enableColumnResizing:!0,columnResizeMode:"onChange",columns:p});return(0,f.FD)("div",{css:ee,children:[(0,f.Y)(a.T.Title,{level:4,css:te,children:(0,f.Y)(x.A,{id:"m4159e",defaultMessage:"Metrics ({length})",values:{length:g.filter(X(c)).length}})}),(0,f.Y)("div",{css:(0,n.AH)({padding:r.spacing.sm,border:`1px solid ${r.colors.borderDecorative}`,borderRadius:r.general.borderRadiusBase,display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},""),children:(()=>{if(!g.length)return(0,f.Y)("div",{css:o,children:(0,f.Y)(i.SvL,{description:(0,f.Y)(x.A,{id:"9vj5Ap",defaultMessage:"No metrics recorded"})})});const e=(0,R.sum)(v.map((({metrics:e})=>e.length)))<1;return(0,f.FD)(f.FK,{children:[(0,f.Y)("div",{css:(0,n.AH)({marginBottom:r.spacing.sm},""),children:(0,f.Y)(z.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_186",prefix:(0,f.Y)(z.S,{}),placeholder:u.formatMessage({id:"w2+rkp",defaultMessage:"Search metrics"}),value:c,onChange:e=>m(e.target.value),allowClear:!0})}),(0,f.FD)(i.XIK,{scrollable:!0,empty:e?(0,f.Y)("div",{css:l,children:(0,f.Y)(i.SvL,{description:(0,f.Y)(x.A,{id:"lT1Joh",defaultMessage:"No metrics match the search filter"})})}):null,css:s,children:[(0,f.Y)(i.Hjg,{isHeader:!0,children:h.getLeafHeaders().map((e=>(0,f.Y)(i.A0N,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_312",header:e,column:e.column,setColumnSizing:h.setColumnSizing,isResizing:e.column.getIsResizing(),style:{flexGrow:e.column.getCanResize()?0:1,flexBasis:e.column.getCanResize()?e.column.getSize():void 0},children:(0,$.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),v.map(((e,r)=>(0,f.Y)(Q,{metricsList:e.metrics,runInfo:t,header:e.header,table:h},e.header||r)))]})]})})()})]})};var ne=r(38243),ie=r(85343);var ae={name:"1flj9lk",styles:"text-align:left"},se={name:"ti75j2",styles:"margin:0"};const oe=({dataset:e,onClick:t})=>(0,f.Y)(a.T.Link,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_16",role:"link",css:ae,onClick:t,children:(0,f.Y)(ne.E,{datasetWithTags:e,displayTextAsLink:!0,css:se})}),le=({tags:e,runInfo:t,datasets:r})=>{const[s,o]=(0,d.useState)(null),{theme:l}=(0,a.u)(),[u,c]=(0,d.useState)(!1);if(!r||!r.length)return null;const m=r[0],g=r.slice(1),p=n=>{var i,a,s;o({datasetWithTags:n,runData:{experimentId:null!==(i=t.experimentId)&&void 0!==i?i:void 0,runUuid:null!==(a=t.runUuid)&&void 0!==a?a:"",runName:null!==(s=t.runName)&&void 0!==s?s:void 0,datasets:r,tags:e}}),c(!0)};return(0,f.FD)("div",{css:(0,n.AH)({display:"flex",gap:l.spacing.sm,alignItems:"center"},""),children:[(0,f.Y)(oe,{dataset:m,onClick:()=>p(m)}),g.length?(0,f.FD)(i.rId.Root,{modal:!1,children:[(0,f.Y)(i.rId.Trigger,{asChild:!0,children:(0,f.FD)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_70",size:"small",children:["+",g.length]})}),(0,f.Y)(i.rId.Content,{children:g.map((e=>(0,f.Y)(i.rId.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_81",children:(0,f.Y)(oe,{dataset:e,onClick:()=>p(e)})},e.dataset.digest)))})]}):null,s&&(0,f.Y)(ie.O,{isOpen:u,setIsOpen:c,selectedDatasetWithRun:s,setSelectedDatasetWithRun:o})]})};var de=r(26809),ue=r(36568);const ce=({parentRunUuid:e})=>{const t=(0,s.wA)(),r=(0,s.d4)((({entities:t})=>t.runInfosByUuid[e])),n=(0,ue.t)({runUuid:e,disabled:!(0,y.wD)()}),a=(0,d.useMemo)((()=>{var e;return(0,y.wD)()?null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.info:r}),[n,r]);return(0,d.useEffect)((()=>{(0,y.wD)()||a||t((0,de.aO)(e))}),[t,e,a]),a?a.experimentId&&a.runUuid?(0,f.Y)(c.N_,{to:I.h.getRunPageRoute(a.experimentId,a.runUuid),children:a.runName}):null:(0,f.Y)(i.I_K,{loading:!0,label:(0,f.Y)(x.A,{id:"nfIS4i",defaultMessage:"Parent run name loading"})})};var me=r(43683),ge=r(98597),pe=r(98590);var ve={name:"1wcfv52",styles:"margin-right:0"};const he=({runUuid:e,tags:t,onTagsUpdated:r})=>{const{theme:o}=(0,a.u)(),l=(0,s.wA)(),u=(0,L.A)(),[c,m]=(0,d.useMemo)((()=>[(0,R.keys)(t).filter(pe.oD),(0,R.values)(t).filter((({key:e})=>(0,pe.oD)(e)))]),[t]),{EditTagsModal:g,showEditTagsModal:p,isLoading:v}=(0,me.Q)({valueRequired:!0,allAvailableTags:c,saveTagsHandler:async(t,n,i)=>l((0,de.hD)(e,n,i)).then(r)}),h=()=>{p({tags:m})},Y=u.formatMessage({id:"EwAZgg",defaultMessage:"Edit tags"});return(0,f.FD)("div",{css:(0,n.AH)({paddingTop:o.spacing.xs,paddingBottom:o.spacing.xs,display:"flex",flexWrap:"wrap",alignItems:"center","> *":{marginRight:"0 !important"},gap:o.spacing.xs},""),children:[m.length<1?(0,f.Y)(a.B,{componentId:"mlflow.run_details.overview.tags.add_button",size:"small",type:"tertiary",onClick:h,children:(0,f.Y)(x.A,{id:"dt3hj5",defaultMessage:"Add tags"})}):(0,f.FD)(f.FK,{children:[m.map((e=>(0,f.Y)(ge.t,{tag:e,enableFullViewModal:!0,css:ve},`${e.key}-${e.value}`))),(0,f.Y)(N.T,{componentId:"mlflow.run_details.overview.tags.edit_button.tooltip",content:Y,children:(0,f.Y)(a.B,{componentId:"mlflow.run_details.overview.tags.edit_button","aria-label":Y,size:"small",icon:(0,f.Y)(i.R2l,{}),onClick:h})})]}),v&&(0,f.Y)(a.S,{size:"small"}),g]})};var fe=r(96034),Ye=r(56928);const xe=({runUuid:e,tags:t,onDescriptionChanged:r})=>{var o;const l=(null===(o=t[Ye.e])||void 0===o?void 0:o.value)||"",[u,c]=(0,d.useState)(!1),m=(0,L.A)(),{theme:g}=(0,a.u)(),p=(0,s.wA)(),v=!l;return(0,f.FD)("div",{css:(0,n.AH)({marginBottom:g.spacing.md},""),children:[(0,f.FD)(a.T.Title,{level:4,css:(0,n.AH)({display:"flex",alignItems:"center",gap:g.spacing.xs},""),children:[(0,f.Y)(x.A,{id:"ugwpKL",defaultMessage:"Description"}),(0,f.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdescriptionbox.tsx_46",size:"small",type:"tertiary","aria-label":m.formatMessage({id:"Mtj9Ay",defaultMessage:"Edit description"}),onClick:()=>c(!0),icon:(0,f.Y)(i.R2l,{})})]}),v&&!u&&(0,f.Y)(a.T.Hint,{children:(0,f.Y)(x.A,{id:"VcNdOq",defaultMessage:"No description"})}),(!v||u)&&(0,f.Y)(fe.V,{defaultMarkdown:l,onSubmit:t=>p((0,de.Jv)(e,Ye.e,t)).then(r).then((()=>c(!1))),onCancel:()=>c(!1),showEditor:u})]})};var _e=r(4874);var Ie={name:"e0dnmk",styles:"cursor:pointer"};const ye=({registeredModelVersionSummaries:e})=>{const{theme:t}=(0,a.u)();return(0,f.Y)(i.nEg,{children:null===e||void 0===e?void 0:e.map((e=>(0,f.FD)(c.N_,{to:e.link,css:(0,n.AH)({display:"flex",alignItems:"center",gap:t.spacing.sm},""),children:[(0,f.Y)(C.h,{})," ",e.displayedName," ",(0,f.FD)(i.vwO,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewregisteredmodelsbox.tsx_40",css:Ie,children:["v",e.version]})]},e.displayedName)))})};var Se=r(41261),Me=r(82832);const Ae=async({queryKey:e})=>{const[,{runUuid:t}]=e;return Me.M.getPromptVersionsForRun(t)};var Re={name:"1bmnxg7",styles:"white-space:nowrap"};const we=({runUuid:e})=>{const{theme:t}=(0,a.u)(),{data:r,error:s,isLoading:o}=(({runUuid:e},t={})=>{var r;const n=(0,Se.I)(["run_uuid",{runUuid:e}],{queryFn:Ae,retry:!1,...t});return{data:n.data,error:null!==(r=n.error)&&void 0!==r?r:void 0,isLoading:n.isLoading,refetch:n.refetch}})({runUuid:e}),l=null===r||void 0===r?void 0:r.model_versions;return o?(0,f.Y)(i.I_K,{}):s||!l||0===l.length?(0,f.Y)(a.T.Hint,{children:"\u2014"}):(0,f.Y)("div",{css:(0,n.AH)({display:"flex",flexDirection:"row",gap:t.spacing.sm,flexWrap:"wrap",padding:`${t.spacing.sm}px 0px`},""),children:l.map(((e,t)=>{const r=I.h.getPromptDetailsPageRoute(encodeURIComponent(e.name)),n=`${e.name} (v${e.version})`;return(0,f.FD)(a.T.Text,{css:Re,children:[(0,f.Y)(c.N_,{to:r,children:n}),t<l.length-1&&","]},n)}))})},De=({loggedModels:e,loggedModelsV3:t,runInfo:r})=>{const{theme:s}=(0,a.u)(),{experimentId:o,runUuid:l}=r,u=e=>(0,R.first)(e)||(0,f.Y)(x.A,{id:"0HbGko",defaultMessage:"Model"}),m=(0,d.useMemo)((()=>{const t=e.map((e=>u(e.flavors)));return new Set(t).size!==t.length}),[e]);return(0,f.FD)(i.nEg,{children:[e.map(((e,t)=>(0,f.FD)(c.N_,{to:I.h.getRunPageRoute(null!==o&&void 0!==o?o:"",null!==l&&void 0!==l?l:"",e.artifactPath),css:(0,n.AH)({display:"flex",alignItems:"center",gap:s.spacing.sm,cursor:"pointer",height:m&&t>0?s.general.heightBase:s.general.heightSm},""),children:[(0,f.Y)(i.oiI,{}),(0,f.FD)("div",{children:[u(e.flavors),m&&t>0&&(0,f.Y)(a.T.Hint,{children:e.artifactPath})]})]},e.artifactPath))),t.map(((e,t)=>{var r,a,l,d,u;return(0,f.FD)(c.N_,{to:I.h.getExperimentLoggedModelDetailsPageRoute(null!==o&&void 0!==o?o:"",null!==(r=null===(a=e.info)||void 0===a?void 0:a.model_id)&&void 0!==r?r:""),css:(0,n.AH)({display:"flex",alignItems:"center",gap:s.spacing.sm,cursor:"pointer",height:m&&t>0?s.general.heightBase:s.general.heightSm},""),children:[(0,f.Y)(i.oiI,{}),(0,f.Y)("div",{children:null===(u=e.info)||void 0===u?void 0:u.name})]},null!==(l=null===(d=e.info)||void 0===d?void 0:d.model_id)&&void 0!==l?l:t)}))]})};var Ce=r(56412),Te=r(1323);var be={name:"1wcfv52",styles:"margin-right:0"},Ee={name:"kauk44",styles:"display:flex;gap:4px;white-space:nowrap"},Ue={name:"1a7v7i3",styles:"margin-right:0;&>div{padding-right:0;}"};const ke=({runUuid:e,tags:t,search:r,className:s})=>{var o,l,d;const u=null===t||void 0===t||null===(o=t[g.xd])||void 0===o?void 0:o.value,c=null===t||void 0===t||null===(l=t[m.A.gitCommitTag])||void 0===l?void 0:l.value,p=m.A.renderSource(t,r,e,u),{theme:v}=(0,a.u)();return p?(0,f.FD)("div",{css:(0,n.AH)({display:"flex",alignItems:"center",gap:v.spacing.sm,paddingTop:v.spacing.sm,paddingBottom:v.spacing.sm,flexWrap:"wrap"},""),className:s,children:[(0,f.Y)(Te.m,{sourceType:null===(d=t[m.A.sourceTypeTag])||void 0===d?void 0:d.value,css:(0,n.AH)({color:v.colors.actionPrimaryBackgroundDefault},"")}),p," ",u&&(0,f.Y)(i.paO,{title:u,children:(0,f.Y)(i.vwO,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewsourcebox.tsx_48",css:be,children:(0,f.FD)("div",{css:Ee,children:[(0,f.Y)(i.OKA,{})," ",u]})})}),c&&(0,f.FD)(a.av.Root,{componentId:"mlflow.run_details.overview.source.commit_hash_popover",children:[(0,f.Y)(a.av.Trigger,{asChild:!0,children:(0,f.Y)(i.vwO,{componentId:"mlflow.run_details.overview.source.commit_hash",css:Ue,children:(0,f.FD)("div",{css:(0,n.AH)({display:"flex",gap:v.spacing.xs,whiteSpace:"nowrap",alignContent:"center"},""),children:[(0,f.Y)(i.fSU,{}),c.slice(0,7)]})})}),(0,f.FD)(a.av.Content,{align:"start",children:[(0,f.Y)(a.av.Arrow,{}),(0,f.FD)("div",{css:(0,n.AH)({display:"flex",gap:v.spacing.xs,alignItems:"center"},""),children:[c,(0,f.Y)(Ce.i,{showLabel:!1,size:"small",type:"tertiary",copyText:c,icon:(0,f.Y)(i.TdU,{})})]})]})]})]}):(0,f.Y)(a.T.Hint,{children:"\u2014"})};var Fe=r(14830),Le=r(31179),Ne=r(67212),Pe=r(93358);var Oe=r(46398),Be=r(92677),He=r(36506),Ve=r(30706);const ze=[Be.I7.RelationshipType,Be.I7.Step,Be.I7.Name,Be.I7.Status,Be.I7.CreationTime,Be.I7.RegisteredModels,Be.I7.Dataset];var Ke={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},je={name:"g030ms",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:center"},$e={name:"ozd7xs",styles:"flex-shrink:0"};const We=({inputs:e,outputs:t,runInfo:r})=>{const{theme:s}=(0,a.u)(),{models:o,isLoading:l,errors:u}=((e,t,r)=>{var n,i;const a=(0,R.compact)((0,R.uniq)(null===e||void 0===e||null===(n=e.modelInputs)||void 0===n?void 0:n.map((e=>e.modelId)))),s=(0,R.compact)((0,R.uniq)(null===t||void 0===t||null===(i=t.modelOutputs)||void 0===i?void 0:i.map((e=>e.modelId)))),o=(0,Pe.v)(a),l=(0,Pe.v)(s),u=(0,d.useMemo)((()=>o.map((e=>{var t,r;if(null!==(t=e.data)&&void 0!==t&&t.model)return{...null===(r=e.data)||void 0===r?void 0:r.model,direction:"input"}}))),[o]),c=(0,d.useMemo)((()=>l.map((e=>{var r,n,i,a;if(null===(r=e.data)||void 0===r||!r.model)return;const s=null===t||void 0===t||null===(n=t.modelOutputs)||void 0===n?void 0:n.find((({modelId:t})=>{var r,n,i;return t===(null===(r=e.data)||void 0===r||null===(n=r.model)||void 0===n||null===(i=n.info)||void 0===i?void 0:i.model_id)}));return{...null===(i=e.data)||void 0===i?void 0:i.model,direction:"output",step:null!==(a=null===s||void 0===s?void 0:s.step)&&void 0!==a?a:void 0}}))),[l,null===t||void 0===t?void 0:t.modelOutputs]);return{models:(0,d.useMemo)((()=>{var e,t;return null!==(e=(0,R.uniqBy)((0,R.compact)([...u,...c]).map((t=null===r||void 0===r?void 0:r.runUuid,e=>{var r;return null!==(r=e.data)&&void 0!==r&&r.metrics?{...e,data:{...e.data,metrics:e.data.metrics.filter((e=>!t||e.run_id===t))}}:e})),(e=>{var t;return null===(t=e.info)||void 0===t?void 0:t.model_id})))&&void 0!==e?e:[]}),[u,c,r]),errors:[...o,...l].map((e=>e.error)).filter(Boolean),isLoading:[...o,...l].some((e=>e.isLoading))}})(e,t,r),[c,m]=(0,d.useState)({}),{columnDefs:g}=(0,Be.ih)({loggedModels:o,columnVisibility:c,disablePinnedColumns:!0,disableOrderBy:!0,supportedAttributeColumnKeys:ze}),p=(0,d.useMemo)((()=>(0,R.first)(u)),[u]);return(0,f.FD)("div",{css:Ke,children:[(0,f.FD)("div",{css:je,children:[(0,f.Y)(a.T.Title,{level:4,css:$e,children:(0,f.Y)(x.A,{id:"km8vtM",defaultMessage:"Logged models ({length})",values:{length:o.length}})}),(0,f.Y)(Ve.$,{columnDefs:g,onUpdateColumns:m,columnVisibility:c,customTrigger:(0,f.Y)(a.B,{componentId:"mlflow.logged_model.list.columns",icon:(0,f.Y)(i.jng,{})})})]}),(0,f.Y)(N.S,{size:"sm",shrinks:!1}),(0,f.FD)("div",{css:(0,n.AH)({padding:s.spacing.sm,border:`1px solid ${s.colors.border}`,borderRadius:s.general.borderRadiusBase,display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},""),children:[p instanceof Error&&p.message&&(0,f.FD)(f.FK,{children:[(0,f.Y)(i.FcD,{type:"error",message:p.message,closable:!1,componentId:"mlflow.run_page.logged_model.list.error"}),(0,f.Y)(N.S,{size:"sm",shrinks:!1})]}),(0,f.Y)(He.Xs,{children:(0,f.Y)(Oe._,{columnDefs:g,loggedModels:o,columnVisibility:c,isLoading:l,isLoadingMore:!1,moreResultsAvailable:!1,disableLoadMore:!0,css:Ge(s),displayShowExampleButton:!1})})]})]})},Ge=e=>({"&.ag-theme-balham":{"--ag-border-color":e.colors.border,"--ag-row-border-color":e.colors.border,"--ag-foreground-color":e.colors.textPrimary,"--ag-background-color":"transparent","--ag-odd-row-background-color":"transparent","--ag-row-hover-color":e.colors.actionDefaultBackgroundHover,"--ag-selected-row-background-color":e.colors.actionDefaultBackgroundPress,"--ag-header-foreground-color":e.colors.textPrimary,"--ag-header-background-color":e.colors.backgroundPrimary,"--ag-modal-overlay-background-color":e.colors.overlayOverlay,".ag-header-row.ag-header-row-column-group":{"--ag-header-foreground-color":e.colors.textPrimary},borderTop:0,fontSize:e.typography.fontSizeBase,".ag-center-cols-viewport":{...(0,a.E)(e,{orientation:"horizontal"})}}});var Ze=r(65287),Je=r(81313);var Xe={name:"ti75j2",styles:"margin:0"};const qe=({tags:e,runInfo:t,datasets:r})=>{const[s,o]=(0,d.useState)(null),[l,u]=(0,d.useState)(!1),{theme:c}=(0,a.u)();if(!r||!r.length)return null;return(0,f.FD)(f.FK,{children:[(0,f.Y)(i.nEg,{children:r.map((i=>(0,f.Y)(a.T.Link,{componentId:"mlflow.run_details.datasets_box.dataset_link",css:(0,n.AH)({textAlign:"left",".anticon":{fontSize:c.general.iconFontSize}},""),onClick:()=>(n=>{var i,a,s;o({datasetWithTags:n,runData:{experimentId:null!==(i=t.experimentId)&&void 0!==i?i:void 0,runUuid:null!==(a=t.runUuid)&&void 0!==a?a:"",runName:null!==(s=t.runName)&&void 0!==s?s:void 0,datasets:r,tags:e}}),u(!0)})(i),children:(0,f.Y)(ne.E,{datasetWithTags:i,displayTextAsLink:!0,css:Xe})})))}),s&&(0,f.Y)(ie.O,{isOpen:l,setIsOpen:u,selectedDatasetWithRun:s,setSelectedDatasetWithRun:o})]})};var Qe=function(e){return e.DETAILS="DETAILS",e.DATASETS="DATASETS",e.TAGS="TAGS",e.REGISTERED_MODELS="REGISTERED_MODELS",e}(Qe||{});const et=()=>(0,f.Y)(a.T.Hint,{children:"\u2014"});var tt={name:"67z2yy",styles:"flex:1;align-self:flex-start"},rt={name:"1ctdo4k",styles:"min-height:360px;max-height:760px;overflow:hidden;display:flex"};const nt=({runUuid:e,onRunDataUpdated:t,tags:r,runInfo:i,datasets:s,params:o,latestMetrics:l,runInputs:u,runOutputs:g,registeredModelVersionSummaries:p,loggedModelsV3:v=[],isLoadingLoggedModels:h=!1})=>{const{theme:Y}=(0,a.u)(),{usingUnifiedDetailsLayout:_}=(0,G.z)(),{search:S}=(0,c.zy)(),M=(0,L.A)(),A=(0,d.useMemo)((()=>m.A.getLoggedModelsFromTags(r)),[r]),w=r[P.Ol],D=!(0,R.isEmpty)(null===u||void 0===u?void 0:u.modelInputs)||!(0,R.isEmpty)(null===g||void 0===g?void 0:g.modelOutputs),C=!(0,y.Ok)()||!D,T=(null===A||void 0===A?void 0:A.length)>0||(null===v||void 0===v?void 0:v.length)>0,b=(0,Le.b)({loggedModels:v}),E=(0,R.uniqBy)([...p,...b],(e=>null===e||void 0===e?void 0:e.link)),U=(({runUuid:e,runInfo:t,tags:r,onTagsUpdated:i,datasets:s,shouldRenderLoggedModelsBox:o,loggedModelsV3:l,registeredModelVersionSummaries:u})=>{var g,p,v;const h=(0,L.A)(),{theme:Y}=(0,a.u)(),{search:x}=(0,c.zy)(),_=(0,d.useMemo)((()=>m.A.getLoggedModelsFromTags(r)),[r]),y=r[P.Ol],S=t&&(0,f.FD)(f.FK,{children:[(0,f.Y)(Je.wB,{keyValue:h.formatMessage({id:"PP5HZf",defaultMessage:"Created at"}),value:t.startTime?m.A.formatTimestamp(t.startTime,h):(0,f.Y)(Je.bw,{})}),(0,f.Y)(Je.wB,{keyValue:h.formatMessage({id:"7KKvmS",defaultMessage:"Created by"}),value:(0,f.Y)(H,{runInfo:t,tags:r})}),(0,f.Y)(Je.wB,{keyValue:h.formatMessage({id:"ffema5",defaultMessage:"Experiment ID"}),value:(0,f.Y)(Ne.t,{value:null!==(g=null===t||void 0===t?void 0:t.experimentId)&&void 0!==g?g:"",element:null!==t&&void 0!==t&&t.experimentId?(0,f.Y)(c.N_,{to:I.h.getExperimentPageRoute(t.experimentId),children:null===t||void 0===t?void 0:t.experimentId}):void 0})}),(0,f.Y)(Je.wB,{keyValue:h.formatMessage({id:"vxY1CI",defaultMessage:"Status"}),value:(0,f.Y)(B,{status:t.status})}),(0,f.Y)(Je.wB,{keyValue:h.formatMessage({id:"JYVQuV",defaultMessage:"Run ID"}),value:(0,f.Y)(Ne.t,{value:null!==(p=t.runUuid)&&void 0!==p?p:""})}),(0,f.Y)(Je.wB,{keyValue:h.formatMessage({id:"ZoIjun",defaultMessage:"Duration"}),value:m.A.getDuration(t.startTime,t.endTime)}),y&&(0,f.Y)(Je.wB,{keyValue:h.formatMessage({id:"zdYXP8",defaultMessage:"Parent run"}),value:(0,f.Y)(ce,{parentRunUuid:y.value})}),(0,f.Y)(Je.wB,{keyValue:h.formatMessage({id:"WmDiY9",defaultMessage:"Source"}),value:(0,f.Y)(ke,{tags:r,search:x,runUuid:e,css:(0,n.AH)({paddingTop:Y.spacing.xs,paddingBottom:Y.spacing.xs},"")})}),o&&(0,f.Y)(Je.wB,{keyValue:h.formatMessage({id:"mjNFJt",defaultMessage:"Logged models"}),value:(0,f.Y)(De,{runInfo:t,loggedModels:_,loggedModelsV3:l})})]});return[{id:Qe.DETAILS,title:h.formatMessage({id:"QGiy9C",defaultMessage:"About this run"}),content:S},{id:Qe.DATASETS,title:h.formatMessage({id:"yrsFOP",defaultMessage:"Datasets"}),content:null!==s&&void 0!==s&&s.length?(0,f.Y)(qe,{tags:r,runInfo:t,datasets:s}):(0,f.Y)(Je.bw,{})},{id:Qe.TAGS,title:h.formatMessage({id:"arFT1W",defaultMessage:"Tags"}),content:(0,f.Y)(he,{runUuid:null!==(v=t.runUuid)&&void 0!==v?v:"",tags:r,onTagsUpdated:i})},{id:Qe.REGISTERED_MODELS,title:h.formatMessage({id:"HnGOwk",defaultMessage:"Registered models"}),content:(null===u||void 0===u?void 0:u.length)>0?(0,f.Y)(ye,{registeredModelVersionSummaries:u}):(0,f.Y)(Je.bw,{})}]})({runUuid:e,runInfo:i,tags:r,onTagsUpdated:t,datasets:s,loggedModelsV3:v,shouldRenderLoggedModelsBox:C,registeredModelVersionSummaries:E}),k=_;return(0,f.FD)(Ze.a,{css:tt,usingSidebarLayout:k,secondarySections:U,children:[(0,f.Y)(xe,{runUuid:e,tags:r,onDescriptionChanged:t}),!k&&(0,f.FD)(f.FK,{children:[(0,f.Y)(a.T.Title,{level:4,children:(0,f.Y)(x.A,{id:"Isaf66",defaultMessage:"Details"})}),(()=>{var n,o,l;return(0,f.FD)(Fe.N,{children:[(0,f.Y)(_e.Z,{title:(0,f.Y)(x.A,{id:"PP5HZf",defaultMessage:"Created at"}),value:i.startTime?m.A.formatTimestamp(i.startTime,M):(0,f.Y)(et,{})}),(0,f.Y)(_e.Z,{title:(0,f.Y)(x.A,{id:"7KKvmS",defaultMessage:"Created by"}),value:(0,f.Y)(H,{runInfo:i,tags:r})}),(0,f.Y)(_e.Z,{title:(0,f.Y)(x.A,{id:"ffema5",defaultMessage:"Experiment ID"}),value:(0,f.Y)(Ne.t,{value:null!==(n=null===i||void 0===i?void 0:i.experimentId)&&void 0!==n?n:""})}),(0,f.Y)(_e.Z,{title:(0,f.Y)(x.A,{id:"vxY1CI",defaultMessage:"Status"}),value:(0,f.Y)(B,{status:i.status})}),(0,f.Y)(_e.Z,{title:(0,f.Y)(x.A,{id:"JYVQuV",defaultMessage:"Run ID"}),value:(0,f.Y)(Ne.t,{value:null!==(o=i.runUuid)&&void 0!==o?o:""})}),(0,f.Y)(_e.Z,{title:(0,f.Y)(x.A,{id:"ZoIjun",defaultMessage:"Duration"}),value:m.A.getDuration(i.startTime,i.endTime)}),w&&(0,f.Y)(_e.Z,{title:(0,f.Y)(x.A,{id:"zdYXP8",defaultMessage:"Parent run"}),value:(0,f.Y)(ce,{parentRunUuid:w.value})}),(0,f.Y)(_e.Z,{title:(0,f.Y)(x.A,{id:"fwp4JP",defaultMessage:"Datasets used"}),value:null!==s&&void 0!==s&&s.length?(0,f.Y)(le,{tags:r,runInfo:i,datasets:s}):(0,f.Y)(et,{})}),(0,f.Y)(_e.Z,{title:(0,f.Y)(x.A,{id:"rs7Iic",defaultMessage:"Tags"}),value:(0,f.Y)(he,{runUuid:null!==(l=i.runUuid)&&void 0!==l?l:"",tags:r,onTagsUpdated:t})}),(0,f.Y)(_e.Z,{title:(0,f.Y)(x.A,{id:"WmDiY9",defaultMessage:"Source"}),value:(0,f.Y)(ke,{tags:r,search:S,runUuid:e})}),C&&(0,f.Y)(_e.Z,{title:(0,f.Y)(x.A,{id:"mjNFJt",defaultMessage:"Logged models"}),value:h?(0,f.Y)(a.S,{}):T?(0,f.Y)(De,{runInfo:i,loggedModels:A,loggedModelsV3:v}):(0,f.Y)(et,{})}),(0,f.Y)(_e.Z,{title:(0,f.Y)(x.A,{id:"BCpX6U",defaultMessage:"Registered models"}),value:(null===E||void 0===E?void 0:E.length)>0?(0,f.Y)(ye,{registeredModelVersionSummaries:E}):(0,f.Y)(et,{})}),(0,f.Y)(_e.Z,{title:(0,f.Y)(x.A,{id:"UCQwvo",defaultMessage:"Registered prompts"}),value:(0,f.Y)(we,{runUuid:e})})]})})()]}),(0,f.FD)("div",{css:[k?{flexDirection:"column"}:{minHeight:360,maxHeight:760},{display:"flex",gap:Y.spacing.lg,overflow:"hidden"},""],children:[(0,f.Y)(re,{latestMetrics:l,runInfo:i}),(0,f.Y)(V.y,{params:o})]}),(0,y.Ok)()&&D&&(0,f.FD)(f.FK,{children:[(0,f.Y)(N.S,{}),(0,f.Y)("div",{css:rt,children:(0,f.Y)(We,{inputs:u,outputs:g,runInfo:i})})]}),!k&&(0,f.Y)(N.S,{})]})};var it=r(23275),at=r(52350),st=r(82214);function ot({runId:e}){return(0,f.Y)(st.E,{statusCode:404,subMessage:`Run ID ${e} does not exist`,fallbackHomePageReactRoute:I.h.rootRoute})}var lt=r(47664),dt=r(64558),ut=r(33946),ct=r(75627),mt=r(59397);const gt=({contextData:{metricsForRun:e},hoverData:t,chartData:{metricKey:r},isHovering:n,mode:i})=>{var s;const o=(0,ct.bL)(t)?t.hoveredDataPoint:t,l=(0,L.A)();if(i===ct.QS.MultipleTracesWithScanline&&(0,ct.bL)(t)&&n)return(0,f.Y)(mt.G,{hoverData:t});if(null===o||void 0===o||!o.metricEntity)return null;const{timestamp:d,step:u,value:c}=o.metricEntity,g=(null===e||void 0===e||null===(s=e[r])||void 0===s?void 0:s.length)>1,p=(0,j.bw)(r),v=g&&p&&!(0,R.isUndefined)(d),h=g&&!p&&!(0,R.isUndefined)(u);return(0,f.FD)("div",{children:[h&&(0,f.FD)("div",{css:pt.valueField,children:[(0,f.FD)("strong",{children:[(0,f.Y)(x.A,{id:"a02Pn6",defaultMessage:"Step"}),":"]})," ",u]}),v&&(0,f.FD)("div",{css:pt.valueField,children:[(0,f.FD)("strong",{children:[(0,f.Y)(x.A,{id:"faLIN+",defaultMessage:"Timestamp"}),":"]})," ",m.A.formatTimestamp(d,l)]}),c&&(0,f.FD)("div",{children:[(0,f.Y)(a.T.Text,{bold:!0,children:r}),(0,f.Y)(N.S,{size:"xs"}),(0,f.Y)(a.T.Text,{children:c})]})]})},pt={valueField:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}};var vt=r(30152),ht=r(36118),ft=r(39045),Yt=r(19415),xt=r(62758),_t=r(32614),It=r(63617),yt=r(4972),St=r(55999),Mt=r(688),At=r(71932),Rt=r(40029);var wt={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},Dt={name:"1tc6xju",styles:"flex:1;overflow:auto"};const Ct=({runInfo:e,metricKeys:t,mode:r,chartUIState:o,updateChartsUIState:l,latestMetrics:u={},params:c={},tags:m={}})=>{var p;const{theme:v}=(0,a.u)(),[h,Y]=(0,d.useState)(""),{formatMessage:x}=(0,L.A)(),{compareRunCharts:_,compareRunSections:I,chartsSearchFilter:S}=o,M=(0,d.useMemo)((()=>{var e;return null!==(e=null===_||void 0===_?void 0:_.filter((e=>!e.deleted)))&&void 0!==e?e:[]}),[_]),[A,w]=(0,d.useState)(void 0),D=(0,s.d4)((({entities:t})=>{var r;return(0,R.mapValues)(t.sampledMetricsByRunUuid[null!==(r=e.runUuid)&&void 0!==r?r:""],(e=>(0,R.compact)((0,R.values)(e).map((({metricsHistory:e})=>e)).flat())))})),C=(0,d.useMemo)((()=>({runInfo:e,metricsForRun:D})),[e,D]),{imagesByRunUuid:T}=(0,s.d4)((e=>({imagesByRunUuid:e.entities.imagesByRunUuid}))),[b,E]=(0,d.useState)(null),U=(0,xt.iO)(),k=(0,xt.cA)(),F=(0,xt.KP)(),N=(0,xt.Ez)(),P=(0,d.useMemo)((()=>{var t,r,n;return[{displayName:null!==(t=e.runName)&&void 0!==t?t:"",metrics:u,params:c,tags:m,images:T[null!==(r=e.runUuid)&&void 0!==r?r:""]||{},metricHistory:{},uuid:null!==(n=e.runUuid)&&void 0!==n?n:"",color:v.colors.primary,runInfo:e}]}),[e,u,c,m,T,v]);(0,d.useEffect)((()=>{if((!I||!_)&&P.length>0){const{resultChartSet:e,resultSectionSet:t}=vt.i$.getBaseChartAndSectionConfigs({runsData:P,enabledSectionNames:["model"===r?g.NN:g.rx],filterMetricNames:e=>{const t=e.startsWith(g.qt);return"model"===r?!t:t}});l((r=>({...r,compareRunCharts:e,compareRunSections:t})))}}),[_,I,P,r,l]),(0,d.useEffect)((()=>{l((e=>{if(!e.compareRunCharts||!e.compareRunSections)return e;const{resultChartSet:t,resultSectionSet:n,isResultUpdated:i}=vt.i$.updateChartAndSectionConfigs({compareRunCharts:e.compareRunCharts,compareRunSections:e.compareRunSections,runsData:P,isAccordionReordered:e.isAccordionReordered,filterMetricNames:e=>{const t=e.startsWith(g.qt);return"model"===r?!t:t}});return i?{...e,compareRunCharts:t,compareRunSections:n}:e}))}),[P,l,r]);const O=(0,yt.$)(),B=o.autoRefreshEnabled&&(0,y.vC)()&&O,H=Boolean(m[g.Cr]);return(0,St.L)({runUuids:[null!==(p=e.runUuid)&&void 0!==p?p:""],runUuidsIsActive:["RUNNING"===e.status],autoRefreshEnabled:B,enabled:H}),(0,f.FD)("div",{css:wt,children:[(0,f.FD)("div",{css:(0,n.AH)({paddingBottom:v.spacing.md,display:"flex",gap:v.spacing.sm,flex:"0 0 auto"},""),children:[(0,f.Y)(Rt.I,{chartsSearchFilter:S}),(0,y.vC)()&&(0,f.Y)(i.ffE,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetricchartsv2.tsx_244",pressed:o.autoRefreshEnabled,onPressedChange:e=>{l((t=>({...t,autoRefreshEnabled:e})))},children:x({id:"zC/uKl",defaultMessage:"Auto-refresh"})}),(0,f.Y)(Mt.f,{metricKeyList:t,globalLineChartConfig:o.globalLineChartConfig,updateUIState:l})]}),(0,f.Y)("div",{css:Dt,children:(0,f.Y)(ct.W,{contextData:C,component:gt,children:(0,f.Y)(At.c_,{visibleChartCards:M,children:(0,f.Y)(ft.J,{compareRunSections:I,compareRunCharts:M,reorderCharts:U,insertCharts:k,chartData:P,startEditChart:e=>E(e),removeChart:F,addNewChartCard:e=>t=>E(vt.i$.getEmptyChartCardByType(t,!1,void 0,e)),search:null!==S&&void 0!==S?S:"",supportedChartTypes:[vt.zL.LINE,vt.zL.BAR,vt.zL.IMAGE],setFullScreenChart:w,autoRefreshEnabled:B,globalLineChartConfig:o.globalLineChartConfig,groupBy:null})})})}),b&&(0,f.Y)(Yt.z,{chartRunData:P,metricKeyList:t,paramKeyList:[],config:b,onSubmit:e=>{N(e),E(null)},onCancel:()=>E(null),groupBy:null,supportedChartTypes:[vt.zL.LINE,vt.zL.BAR,vt.zL.IMAGE],globalLineChartConfig:o.globalLineChartConfig}),(0,f.Y)(It._,{fullScreenChart:A,onCancel:()=>w(void 0),chartData:P,tooltipContextValue:C,tooltipComponent:gt,autoRefreshEnabled:B,groupBy:null})]})},Tt=e=>{const t=`${e.runInfo.runUuid}-${e.mode}`,r=(0,d.useMemo)((()=>_t.A.getStoreForComponent("RunPage",t)),[t]),[n,i]=(0,d.useState)((()=>{const e={isAccordionReordered:!1,compareRunCharts:void 0,compareRunSections:void 0,autoRefreshEnabled:(0,y.vC)(),globalLineChartConfig:{xAxisKey:ht.fj.STEP,lineSmoothness:0,selectedXAxisMetricKey:""}};try{const t=r.getItem("chartUIState");return t?JSON.parse(t):e}catch{return e}}));return(0,d.useEffect)((()=>{r.setItem("chartUIState",JSON.stringify(n))}),[n,r]),(0,f.Y)(xt.oB,{updateChartsUIState:i,children:(0,f.Y)(Ct,{...e,chartUIState:n,updateChartsUIState:i})})};var bt=r(91089);const Et=[r(80171).se.runName];var Ut={name:"fxp7t8",styles:"flex:1;min-width:0"};const kt=({experimentId:e,runUuid:t})=>{const r=(0,d.useMemo)((()=>[e]),[e]);return(0,f.Y)("div",{css:Ut,children:(0,f.Y)(bt.O,{experimentIds:r,runUuid:t,disabledColumns:Et})})};var Ft=r(26626),Lt=r(63609);const Nt=()=>(0,f.FD)(u.L,{children:[(0,f.Y)(i.oud,{loading:!0,label:(0,f.Y)(x.A,{id:"ea5zBl",defaultMessage:"Run page loading"})}),[...Array(3).keys()].map((e=>(0,f.Y)(i.I_K,{seed:`s-${e}`},e)))]}),Pt=()=>{var e,t;const{runUuid:r,experimentId:o}=(0,c.g)(),v=(0,c.Zp)(),{theme:_}=(0,a.u)(),[M,A]=(0,d.useState)(!1),[R,w]=(0,d.useState)(!1);l()(r,"[RunPage] Run UUID route param not provided"),l()(o,"[RunPage] Experiment ID route param not provided");const{experiment:D,error:C,latestMetrics:T,loading:b,params:E,refetchRun:U,runInfo:k,tags:L,experimentFetchError:N,runFetchError:P,apiError:O,datasets:B,runInputs:H,runOutputs:V,registeredModelVersionSummaries:z}=(0,it.g)({experimentId:o,runUuid:r}),[K,$]=(0,d.useMemo)((()=>T?[Object.keys(T).filter((e=>!(0,j.bw)(e))),Object.keys(T).filter((e=>(0,j.bw)(e)))]:[[],[]]),[T]),{comparedExperimentIds:W=[],hasComparedExperimentsBefore:G=!1}=(0,s.d4)((e=>e.comparedExperiments||{})),Z=S(),{models:J,isLoading:X}=((e,t)=>{const{data:r,isLoading:n}=(0,Lt.e)({experimentIds:[e]},{enabled:(0,y.Dz)()});return{models:(0,d.useMemo)((()=>{var e;return null!==(e=null===r||void 0===r?void 0:r.filter((e=>{var r;return(null===(r=e.info)||void 0===r?void 0:r.source_run_id)===t})))&&void 0!==e?e:[]}),[r,t]),isLoading:(0,y.Dz)()&&n}})(o,r),q=(0,h.U)(`(min-width: ${_.responsive.breakpoints.sm}px)`),Q=b&&(!k||!D);return P instanceof at.s&&P.getErrorCode()===lt.tG.RESOURCE_DOES_NOT_EXIST||(null===O||void 0===O?void 0:O.code)===lt.tG.RESOURCE_DOES_NOT_EXIST||C&&(0,Ft.b)(C).match(/not found$/)?(0,f.Y)(ot,{runId:r}):N instanceof at.s&&N.getErrorCode()===lt.tG.RESOURCE_DOES_NOT_EXIST?(0,f.Y)(dt.A,{}):P||N?null:(0,y.wD)()&&(C||O)?(0,f.Y)("div",{css:(0,n.AH)({marginTop:_.spacing.lg},""),children:(0,f.Y)(i.SvL,{title:(0,f.Y)(x.A,{id:"XaC3qF",defaultMessage:"Can't load run details"}),description:(0,Ft.b)(null!==O&&void 0!==O?O:C),image:(0,f.Y)(a.j,{})})}):!Q&&k&&D?(0,f.FD)(f.FK,{children:[(0,f.FD)(u.L,{usesFullHeight:q,children:[(0,f.Y)(F,{comparedExperimentIds:W,experiment:D,handleRenameRunClick:()=>A(!0),handleDeleteRunClick:()=>w(!0),hasComparedExperimentsBefore:G,runDisplayName:m.A.getRunDisplayName(k,r),runTags:L,runParams:E,runUuid:r,artifactRootUri:null!==(e=null===k||void 0===k?void 0:k.artifactUri)&&void 0!==e?e:void 0,registeredModelVersionSummaries:z,isLoading:b||X}),(0,f.Y)("div",{css:(0,n.AH)({flex:1,overflow:"auto",marginBottom:_.spacing.sm,display:"flex"},""),children:(()=>{var e;if(!k)return null;switch(Z){case g.N3.MODEL_METRIC_CHARTS:return(0,f.Y)(Tt,{mode:"model",metricKeys:K,runInfo:k,latestMetrics:T,tags:L,params:E},"model");case g.N3.SYSTEM_METRIC_CHARTS:return(0,f.Y)(Tt,{mode:"system",metricKeys:$,runInfo:k,latestMetrics:T,tags:L,params:E},"system");case g.N3.ARTIFACTS:return(0,f.Y)(Y,{runUuid:r,runTags:L,runOutputs:V,experimentId:o,artifactUri:null!==(e=k.artifactUri)&&void 0!==e?e:void 0});case g.N3.TRACES:if((0,y.oX)())return(0,f.Y)(kt,{runUuid:r,runTags:L,experimentId:o})}return(0,f.Y)(nt,{runInfo:k,tags:L,params:E,latestMetrics:T,runUuid:r,onRunDataUpdated:U,runInputs:H,runOutputs:V,datasets:B,registeredModelVersionSummaries:z,loggedModelsV3:J,isLoadingLoggedModels:X})})()})]}),(0,f.Y)(p.j,{runUuid:r,onClose:()=>A(!1),runName:null!==(t=k.runName)&&void 0!==t?t:"",isOpen:M,onSuccess:U}),(0,f.Y)(ut.A,{selectedRunIds:[r],onClose:()=>w(!1),isOpen:R,onSuccess:()=>{v(I.h.getExperimentPageRoute(o))}})]}):(0,f.Y)(Nt,{})};var Ot=Pt},48588:function(e,t,r){r.d(t,{L:function(){return s}});r(31014);var n=r(48012),i=r(15579),a=r(50111);function s(e){const{usesFullHeight:t,...r}=e;return(0,a.FD)(n.ffj,{css:t?o.useFullHeightLayout:o.wrapper,children:[(0,a.Y)(i.S,{css:o.fixedSpacer}),t?e.children:(0,a.Y)("div",{...r,css:o.container})]})}s.defaultProps={usesFullHeight:!1};const o={useFullHeightLayout:{height:"calc(100% - 60px)",display:"flex",flexDirection:"column","&:last-child":{flexGrow:1}},wrapper:{flex:1},fixedSpacer:{flexShrink:0},container:{width:"100%",flexGrow:1,paddingBottom:24}}},64558:function(e,t,r){var n=r(31014),i=r(50111);class a extends n.Component{render(){return(0,i.Y)("div",{children:"Resource not found."})}}t.A=a},82832:function(e,t,r){r.d(t,{M:function(){return o}});var n=r(39416),i=r(53962),a=r(84565);const s=async({reject:e,response:t,err:r})=>{const i=(0,n.a$)(t),a=i instanceof n.Bk?r:i;if(t)try{var s;const e=null===(s=await t.json())||void 0===s?void 0:s.message;e&&(a.message=e)}catch{}e(a)},o={listRegisteredPrompts:(e,t)=>{const r=new URLSearchParams;let n=`tags.\`${a.PS}\` = '${a.pY}'`;e&&(n=`${n} AND name ILIKE '%${e}%'`),t&&r.append("page_token",t),r.append("filter",n);const o=["ajax-api/2.0/mlflow/registered-models/search",r.toString()].join("?");return(0,i.AC)({relativeUrl:o,error:s})},setRegisteredPromptTag:(e,t,r)=>(0,i.AC)({relativeUrl:"ajax-api/2.0/mlflow/registered-models/set-tag",method:"POST",body:JSON.stringify({key:t,value:r,name:e}),error:s}),deleteRegisteredPromptTag:(e,t)=>(0,i.AC)({relativeUrl:"ajax-api/2.0/mlflow/registered-models/delete-tag",method:"DELETE",body:JSON.stringify({key:t,name:e}),error:s}),createRegisteredPrompt:e=>(0,i.AC)({relativeUrl:"ajax-api/2.0/mlflow/registered-models/create",method:"POST",body:JSON.stringify({name:e,tags:[{key:a.PS,value:a.pY}]}),error:s}),createRegisteredPromptVersion:(e,t=[],r)=>(0,i.AC)({relativeUrl:"ajax-api/2.0/mlflow/model-versions/create",method:"POST",body:JSON.stringify({name:e,description:r,source:"dummy-source",tags:[{key:a.PS,value:a.pY},...t]}),error:s}),setRegisteredPromptVersionTag:(e,t,r,n)=>(0,i.AC)({relativeUrl:"ajax-api/2.0/mlflow/model-versions/set-tag",method:"POST",body:JSON.stringify({key:r,value:n,name:e,version:t}),error:s}),deleteRegisteredPromptVersionTag:(e,t,r)=>{(0,i.AC)({relativeUrl:"ajax-api/2.0/mlflow/model-versions/delete-tag",method:"DELETE",body:JSON.stringify({key:r,name:e,version:t}),error:s})},getPromptDetails:e=>{const t=new URLSearchParams;t.append("name",e);const r=["ajax-api/2.0/mlflow/registered-models/get",t.toString()].join("?");return(0,i.AC)({relativeUrl:r,error:s})},getPromptVersions:e=>{const t=new URLSearchParams;t.append("filter",`name='${e}' AND tags.\`${a.PS}\` = '${a.pY}'`);const r=["ajax-api/2.0/mlflow/model-versions/search",t.toString()].join("?");return(0,i.AC)({relativeUrl:r,error:s})},getPromptVersionsForRun:e=>{const t=new URLSearchParams;t.append("filter",`tags.\`${a.PS}\` = '${a.pY}' AND tags.\`${a.xd}\` ILIKE "%${e}%"`);const r=["ajax-api/2.0/mlflow/model-versions/search",t.toString()].join("?");return(0,i.AC)({relativeUrl:r,error:s})},deleteRegisteredPrompt:e=>(0,i.AC)({relativeUrl:"ajax-api/2.0/mlflow/registered-models/delete",method:"DELETE",body:JSON.stringify({name:e}),error:s}),deleteRegisteredPromptVersion:(e,t)=>(0,i.AC)({relativeUrl:"ajax-api/2.0/mlflow/model-versions/delete",method:"DELETE",body:JSON.stringify({name:e,version:t}),error:s})}},84565:function(e,t,r){r.d(t,{Dh:function(){return n},Dp:function(){return o},PS:function(){return a},dv:function(){return l},pY:function(){return s},xd:function(){return i}});const n="mlflow.prompt.text",i="mlflow.prompt.run_ids",a="mlflow.prompt.is_prompt",s="true";let o=function(e){return e.TABLE="table",e.PREVIEW="preview",e.COMPARE="compare",e}({});const l=e=>{var t,r;return null===e||void 0===e||null===(t=e.tags)||void 0===t||null===(r=t.find((e=>e.key===n)))||void 0===r?void 0:r.value}}}]);
//# sourceMappingURL=6717.6c9fa111.chunk.js.map