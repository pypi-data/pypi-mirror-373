"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[4035],{8296:function(e,t,s){s.r(t),s.d(t,{ModelPage:function(){return ie},ModelPageImpl:function(){return se},default:function(){return le}});var a=s(31014),o=s(10811),i=s(69708),l=s(32599),n=s(48012),r=s(70618),d=s(9856),c=s(88464),g=s(88443),m=s(47664),u=s(81866),h=s(93215),p=s(69869),f=s(76010),v=s(89555),M=s(98597),_=s(50111);const y=({tags:e=[],onAddEdit:t})=>{const{theme:s}=(0,l.u)();return(0,_.Y)("div",{css:(0,v.AH)({display:"flex",flexWrap:"wrap","> *":{marginRight:"0 !important"},gap:s.spacing.xs},""),children:e.length<1?(0,_.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetagseditorcell.tsx_29",size:"small",type:"link",onClick:t,children:(0,_.Y)(g.A,{id:"Li72QU",defaultMessage:"Add"})}):(0,_.FD)(_.FK,{children:[e.map((e=>(0,_.Y)(M.t,{tag:e},`${e.key}-${e.value}`))),(0,_.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetagseditorcell.tsx_37",size:"small",icon:(0,_.Y)(n.R2l,{}),onClick:t})]})})};var A=s(43683),S=s(30311),C=s(91164),w=s(45653);var I=function(e){return e.STATUS="STATUS",e.VERSION="VERSION",e.CREATION_TIMESTAMP="CREATION_TIMESTAMP",e.USER_ID="USER_ID",e.TAGS="TAGS",e.STAGE="STAGE",e.DESCRIPTION="DESCRIPTION",e.ALIASES="ALIASES",e}(I||{}),b={name:"10lkuaq",styles:".table-row-select-cell{align-items:flex-start;}"};const T=({modelName:e,modelVersions:t,activeStageOnly:s,onChange:v,modelEntity:M,onMetadataUpdated:T,usingNextModelsUI:Y,aliases:R})=>{const D=(0,a.useMemo)((()=>{const e={};return null===R||void 0===R||R.forEach((({alias:t,version:s})=>{e[s]||(e[s]=[]),e[s].push(t)})),e}),[R]),k=(0,a.useMemo)((()=>s?(t||[]).filter((({current_stage:e})=>u.jI.includes(e))):t),[s,t]),{theme:x}=(0,l.u)(),E=(0,c.A)(),V=(0,a.useMemo)((()=>{const e=(null===k||void 0===k?void 0:k.map((e=>(null===e||void 0===e?void 0:e.tags)||[])).flat())||[];return Array.from(new Set(e.map((({key:e})=>e)))).sort()}),[k]),N=(0,o.wA)(),{EditTagsModal:F,showEditTagsModal:P}=(0,A.Q)({allAvailableTags:V,saveTagsHandler:async(e,t,s)=>N((0,i.kM)(e,t,s)),onSuccess:T}),{EditAliasesModal:L,showEditAliasesModal:O}=(0,S.o)({model:M||null,onSuccess:T}),[U,B]=(0,a.useState)({}),[K,q]=(0,a.useState)({pageSize:10,pageIndex:0});(0,a.useEffect)((()=>{const e=(k||[]).filter((({version:e})=>U[e])),t=e.map((({version:e})=>e));v(t,e)}),[U,v,k]);const H=(0,a.useMemo)((()=>{const t=[{id:I.STATUS,enableSorting:!1,header:"",meta:{styles:{flexBasis:x.general.heightSm,flexGrow:0}},cell:({row:{original:e}})=>{const{status:t,status_message:s}=e||{};return(0,_.Y)(n.paO,{title:s||u.zr[t],children:(0,_.Y)(l.T.Text,{children:u.UA[t]})})}}];return t.push({id:I.VERSION,enableSorting:!1,header:E.formatMessage({id:"1f72BQ",defaultMessage:"Version"}),meta:{className:"model-version"},accessorKey:"version",cell:({getValue:t})=>(0,_.Y)(g.A,{id:"yjerKR",defaultMessage:"<link>Version {versionNumber}</link>",values:{link:s=>(0,_.Y)(h.N_,{to:p.fM.getModelVersionPageRoute(e,String(t())),children:s}),versionNumber:t()}})},{id:I.CREATION_TIMESTAMP,enableSorting:!0,meta:{styles:{minWidth:200}},header:E.formatMessage({id:"Nm/Pjx",defaultMessage:"Registered at"}),accessorKey:"creation_timestamp",cell:({getValue:e})=>f.A.formatTimestamp(e(),E)},{id:I.USER_ID,enableSorting:!1,meta:{styles:{minWidth:100}},header:E.formatMessage({id:"xRw7H2",defaultMessage:"Created by"}),accessorKey:"user_id",cell:({getValue:e})=>(0,_.Y)("span",{children:e()})}),Y?t.push({id:I.TAGS,enableSorting:!1,header:E.formatMessage({id:"7NOp4F",defaultMessage:"Tags"}),meta:{styles:{flex:2}},accessorKey:"tags",cell:({getValue:e,row:{original:t}})=>(0,_.Y)(y,{tags:e(),onAddEdit:()=>{null===P||void 0===P||P(t)}})},{id:I.ALIASES,accessorKey:"aliases",enableSorting:!1,header:E.formatMessage({id:"wNHR0W",defaultMessage:"Aliases"}),meta:{styles:{flex:2},multiline:!0},cell:({getValue:t,row:{original:s}})=>{const a=D[s.version]||[];return(0,_.Y)(C.Y,{modelName:e,version:s.version,aliases:a,onAddEdit:()=>{null===O||void 0===O||O(s.version)}})}}):t.push({id:I.STAGE,enableSorting:!1,header:E.formatMessage({id:"7F/CBv",defaultMessage:"Stage"}),accessorKey:"current_stage",cell:({getValue:e})=>u.$0[e()]}),t.push({id:I.DESCRIPTION,enableSorting:!1,header:E.formatMessage({id:"Vm9CvZ",defaultMessage:"Description"}),meta:{styles:{flex:2}},accessorKey:"description",cell:({getValue:e})=>(0,w.Y7)(e(),32)}),t}),[x,E,e,P,O,Y,D]),[W,G]=(0,a.useState)([{id:I.CREATION_TIMESTAMP,desc:!0}]),j=(0,r.N4)({data:k||[],columns:H,state:{pagination:K,rowSelection:U,sorting:W},getCoreRowModel:(0,d.HT)(),getSortedRowModel:(0,d.h5)(),getPaginationRowModel:(0,d.kW)(),getRowId:({version:e})=>e,onRowSelectionChange:B,onSortingChange:G}),z=(0,_.Y)(n.dKS,{componentId:"codegen_mlflow_app_src_model-registry_components_modelversiontable.tsx_403",currentPageIndex:K.pageIndex+1,numTotal:(k||[]).length,onChange:(e,t)=>{q({pageSize:t||K.pageSize,pageIndex:e-1})},pageSize:K.pageSize}),$=(0,_.Y)(n.SvL,{description:(0,_.Y)(g.A,{id:"ynkoR7",defaultMessage:"No models versions are registered yet. <link>Learn more</link> about how to register a model version.",values:{link:e=>(0,_.Y)(l.T.Link,{componentId:"codegen_mlflow_app_src_model-registry_components_modelversiontable.tsx_425",target:"_blank",href:m.gw,children:e})}}),image:(0,_.Y)(n.c11,{})});return(0,_.FD)(_.FK,{children:[(0,_.FD)(n.XIK,{"data-testid":"model-list-table",pagination:z,scrollable:!0,empty:0===j.getRowModel().rows.length?$:void 0,someRowsSelected:j.getIsSomeRowsSelected()||j.getIsAllRowsSelected(),children:[(0,_.FD)(n.Hjg,{isHeader:!0,children:[(0,_.Y)(n.p4w,{componentId:"codegen_mlflow_app_src_model-registry_components_modelversiontable.tsx_450",checked:j.getIsAllRowsSelected(),indeterminate:j.getIsSomeRowsSelected(),onChange:j.getToggleAllRowsSelectedHandler()}),j.getLeafHeaders().map((e=>{var t;return(0,_.Y)(n.A0N,{componentId:"codegen_mlflow_app_src_model-registry_components_modelversiontable.tsx_458",multiline:!1,sortable:e.column.getCanSort(),sortDirection:e.column.getIsSorted()||"none",onToggleSort:e.column.getToggleSortingHandler(),css:null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.styles,children:(0,r.Kv)(e.column.columnDef.header,e.getContext())},e.id)}))]}),j.getRowModel().rows.map((e=>(0,_.FD)(n.Hjg,{css:b,children:[(0,_.Y)(n.p4w,{componentId:"codegen_mlflow_app_src_model-registry_components_modelversiontable.tsx_477",checked:e.getIsSelected(),onChange:e.getToggleSelectedHandler()}),e.getAllCells().map((e=>{var t,s,a;return(0,_.Y)(n.nA6,{className:null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.className,multiline:null===(s=e.column.columnDef.meta)||void 0===s?void 0:s.multiline,css:null===(a=e.column.columnDef.meta)||void 0===a?void 0:a.styles,children:(0,r.Kv)(e.column.columnDef.cell,e.getContext())},e.id)}))]},e.id)))]}),F,L]})};var Y=s(10405),R=s(96034),D=s(41287),k=s(65871),x=s(79085),E=s(64912),V=s(15579),N=s(90925),F=s(91144),P=s(84963),L=s(73414),O=s(52350);const U="ALL",B="ACTIVE";var K={name:"lugakg",styles:"font-weight:normal"},q={name:"1ootkdu",styles:"margin-bottom:8px;display:flex;justify-content:flex-end"};class H extends a.Component{constructor(e){super(e),this.state={stageFilter:U,showDescriptionEditor:!1,isDeleteModalVisible:!1,isDeleteModalConfirmLoading:!1,runsSelected:{},isTagsRequestPending:!1,updatingEmailPreferences:!1},this.formRef=a.createRef(),this.handleStageFilterChange=e=>{this.setState({stageFilter:e.target.value})},this.handleCancelEditDescription=()=>{this.setState({showDescriptionEditor:!1})},this.handleSubmitEditDescription=e=>this.props.handleEditDescription(e).then((()=>{this.setState({showDescriptionEditor:!1})})),this.startEditingDescription=e=>{e.stopPropagation(),this.setState({showDescriptionEditor:!0})},this.showDeleteModal=()=>{this.setState({isDeleteModalVisible:!0})},this.hideDeleteModal=()=>{this.setState({isDeleteModalVisible:!1})},this.showConfirmLoading=()=>{this.setState({isDeleteModalConfirmLoading:!0})},this.hideConfirmLoading=()=>{this.setState({isDeleteModalConfirmLoading:!1})},this.handleDeleteConfirm=()=>{const{navigate:e}=this.props;this.showConfirmLoading(),this.props.handleDelete().then((()=>{e(p.fM.modelListPageRoute)})).catch((e=>{this.hideConfirmLoading(),f.A.logErrorAndNotifyUser(e)}))},this.handleAddTag=e=>{const t=this.formRef.current,{model:s}=this.props,a=s.name;this.setState({isTagsRequestPending:!0}),this.props.setRegisteredModelTagApi(a,e.name,e.value).then((()=>{this.setState({isTagsRequestPending:!1}),t.resetFields()})).catch((e=>{this.setState({isTagsRequestPending:!1}),console.error(e);const t=e instanceof O.s?e.getMessageField():e.message;f.A.displayGlobalErrorNotification("Failed to add tag. Error: "+t)}))},this.handleSaveEdit=({name:e,value:t})=>{const{model:s}=this.props,a=s.name;return this.props.setRegisteredModelTagApi(a,e,t).catch((e=>{console.error(e);const t=e instanceof O.s?e.getMessageField():e.message;f.A.displayGlobalErrorNotification("Failed to set tag. Error: "+t)}))},this.handleDeleteTag=({name:e})=>{const{model:t}=this.props,s=t.name;return this.props.deleteRegisteredModelTagApi(s,e).catch((e=>{console.error(e);const t=e instanceof O.s?e.getMessageField():e.message;f.A.displayGlobalErrorNotification("Failed to delete tag. Error: "+t)}))},this.onChange=(e,t)=>{const s=Object.assign({},this.state);s.runsSelected={},t.forEach((e=>{s.runsSelected={...s.runsSelected,[e.version]:e.run_id}})),this.setState(s)},this.renderDetails=()=>{const{model:e,modelVersions:t,tags:s}=this.props,{stageFilter:a,showDescriptionEditor:o,isDeleteModalVisible:i,isDeleteModalConfirmLoading:r,isTagsRequestPending:d}=this.state,c=e.name,m=Object.keys(this.state.runsSelected).length<2;return(0,_.FD)("div",{css:G.wrapper,children:[(0,_.FD)(N.K,{columns:3,"data-testid":"model-view-metadata",children:[(0,_.Y)(N.K.Item,{"data-testid":"model-view-metadata-item",label:this.props.intl.formatMessage({id:"At3XhS",defaultMessage:"Created Time"}),children:f.A.formatTimestamp(e.creation_timestamp,this.props.intl)}),(0,_.Y)(N.K.Item,{"data-testid":"model-view-metadata-item",label:this.props.intl.formatMessage({id:"j/pJM6",defaultMessage:"Last Modified"}),children:f.A.formatTimestamp(e.last_updated_timestamp,this.props.intl)}),e.user_id&&(0,_.Y)(N.K.Item,{"data-testid":"model-view-metadata-item",label:this.props.intl.formatMessage({id:"1jPG5D",defaultMessage:"Creator"}),children:(0,_.Y)("div",{children:e.user_id})})]}),(0,_.Y)(Y.i,{css:G.collapsiblePanel,title:(0,_.FD)("span",{children:[(0,_.Y)(g.A,{id:"oHW+ks",defaultMessage:"Description"})," ",o?null:this.renderDescriptionEditIcon()]}),forceOpen:o,defaultCollapsed:!e.description,"data-test-id":"model-description-section",children:(0,_.Y)(R.V,{defaultMarkdown:e.description,onSubmit:this.handleSubmitEditDescription,onCancel:this.handleCancelEditDescription,showEditor:o})}),(0,_.Y)("div",{"data-test-id":"tags-section",children:(0,_.Y)(Y.i,{css:G.collapsiblePanel,title:(0,_.Y)(g.A,{id:"HyBP+D",defaultMessage:"Tags"}),defaultCollapsed:0===f.A.getVisibleTagValues(s).length,"data-test-id":"model-tags-section",children:(0,_.Y)(D.h,{innerRef:this.formRef,handleAddTag:this.handleAddTag,handleDeleteTag:this.handleDeleteTag,handleSaveEdit:this.handleSaveEdit,tags:s,isRequestPending:d})})}),(0,_.FD)(Y.i,{css:G.collapsiblePanel,title:(0,_.Y)(_.FK,{children:(0,_.FD)("div",{css:G.versionsTabButtons,children:[(0,_.Y)("span",{children:(0,_.Y)(g.A,{id:"Z5en2d",defaultMessage:"Versions"})}),!this.props.usingNextModelsUI&&(0,_.FD)(n.d98,{componentId:"codegen_mlflow_app_src_model-registry_components_modelview.tsx_600",name:"stage-filter",value:this.state.stageFilter,onChange:e=>this.handleStageFilterChange(e),css:K,children:[(0,_.Y)(n.EPn,{value:U,children:(0,_.Y)(g.A,{id:"vi2MM7",defaultMessage:"All"})}),(0,_.FD)(n.EPn,{value:B,children:[(0,_.Y)(g.A,{id:"xPkIEE",defaultMessage:"Active"})," ",this.getActiveVersionsCount()]})]}),(0,_.Y)(l.B,{componentId:"codegen_mlflow_app_src_model-registry_components_modelview.tsx_619","data-test-id":"compareButton",disabled:m,onClick:this.onCompare,children:(0,_.Y)(g.A,{id:"FpjDSq",defaultMessage:"Compare"})})]})}),"data-test-id":"model-versions-section",children:[(0,F.WX)()&&(0,_.Y)("div",{css:q,children:(0,_.Y)(P.C,{})}),(0,_.Y)(T,{activeStageOnly:a===B&&!this.props.usingNextModelsUI,modelName:c,modelVersions:t,modelEntity:e,onChange:this.onChange,onMetadataUpdated:this.props.onMetadataUpdated,usingNextModelsUI:this.props.usingNextModelsUI,aliases:null===e||void 0===e?void 0:e.aliases})]}),(0,_.Y)(V.f,{componentId:"codegen_mlflow_app_src_model-registry_components_modelview.tsx_662","data-testid":"mlflow-input-modal",title:this.props.intl.formatMessage({id:"Gg/vLZ",defaultMessage:"Delete Model"}),visible:i,confirmLoading:r,onOk:this.handleDeleteConfirm,okText:this.props.intl.formatMessage({id:"a8rS4O",defaultMessage:"Delete"}),cancelText:this.props.intl.formatMessage({id:"yK/6vg",defaultMessage:"Cancel"}),onCancel:this.hideDeleteModal,children:(0,_.Y)("span",{children:(0,_.Y)(g.A,{id:"HUf9qJ",defaultMessage:"Are you sure you want to delete {modelName}? This cannot be undone.",values:{modelName:c}})})})]})},this.onCompare=this.onCompare.bind(this)}componentDidMount(){const e=`${this.props.model.name} - MLflow Model`;f.A.updatePageTitle(e)}getActiveVersionsCount(){const{modelVersions:e}=this.props;return e?e.filter((e=>u.jI.includes(e.current_stage))).length:0}getOverflowMenuItems(){return[{id:"delete",itemName:(0,_.Y)(g.A,{id:"9fVZg8",defaultMessage:"Delete"}),onClick:this.showDeleteModal,disabled:this.getActiveVersionsCount()>0}]}onCompare(){this.props.model&&this.props.navigate(p.fM.getCompareModelVersionsPageRoute(this.props.model.name,this.state.runsSelected))}renderDescriptionEditIcon(){return(0,_.Y)(l.B,{componentId:"codegen_mlflow_app_src_model-registry_components_modelview.tsx_467","data-test-id":"descriptionEditButton",type:"link",css:G.editButton,onClick:this.startEditingDescription,children:(0,_.Y)(g.A,{id:"36g3aR",defaultMessage:"Edit"})})}renderMainPanel(){return this.renderDetails()}render(){const{model:e}=this.props,t=e.name,s=[(0,_.Y)(h.N_,{to:p.fM.modelListPageRoute,children:(0,_.Y)(g.A,{id:"raa3Ij",defaultMessage:"Registered Models"})})];return(0,_.FD)("div",{children:[(0,_.Y)(x.z,{title:t,breadcrumbs:s,children:(0,_.Y)(x.o,{menu:this.getOverflowMenuItems()})}),this.renderMainPanel()]})}}const W={setRegisteredModelTagApi:i._e,deleteRegisteredModelTagApi:i.bE},G={emailNotificationPreferenceDropdown:e=>({width:300,marginBottom:e.spacing.md}),emailNotificationPreferenceTip:e=>({paddingLeft:e.spacing.sm,paddingRight:e.spacing.sm}),collapsiblePanel:e=>({marginBottom:e.spacing.md}),wrapper:e=>({'div[role="button"][aria-expanded]':{height:e.general.buttonHeight}}),editButton:e=>({marginLeft:e.spacing.md}),versionsTabButtons:e=>({display:"flex",gap:e.spacing.md,alignItems:"center"})},j=(0,o.Ng)(((e,t)=>{const s=t.model.name;return{tags:(0,k.ZG)(s,e)}}),W)((0,L.p)((0,E.Ay)(H)));var z=s(48588),$=s(53140),X=s(96277),Q=s(82214),Z=s(7204),J=s(25869),ee=s(20109),te=s(62448);class se extends a.Component{constructor(...e){super(...e),this.hasUnfilledRequests=void 0,this.pollIntervalId=void 0,this.initSearchModelVersionsApiRequestId=(0,Z.yk)(),this.initgetRegisteredModelApiRequestId=(0,Z.yk)(),this.updateRegisteredModelApiId=(0,Z.yk)(),this.deleteRegisteredModelApiId=(0,Z.yk)(),this.criticalInitialRequestIds=[this.initSearchModelVersionsApiRequestId,this.initgetRegisteredModelApiRequestId],this.handleEditDescription=e=>{const{model:t}=this.props;return this.props.updateRegisteredModelApi(t.name,e,this.updateRegisteredModelApiId).then(this.loadData)},this.handleDelete=()=>{const{model:e}=this.props;return this.props.deleteRegisteredModelApi(e.name,this.deleteRegisteredModelApiId)},this.loadData=e=>{const{modelName:t}=this.props;this.hasUnfilledRequests=!0;const s=[this.props.getRegisteredModelApi(t,!0===e?this.initgetRegisteredModelApiRequestId:null),this.props.searchModelVersionsApi({name:t},!0===e?this.initSearchModelVersionsApiRequestId:null)];return Promise.all(s).then((()=>{this.hasUnfilledRequests=!1}))},this.pollData=()=>{const{modelName:e,navigate:t}=this.props;return!this.hasUnfilledRequests&&f.A.isBrowserTabVisible()?this.loadData().catch((s=>{s instanceof O.s&&"RESOURCE_DOES_NOT_EXIST"===s.getErrorCode()?(f.A.logErrorAndNotifyUser(s),this.props.deleteRegisteredModelApi(e,void 0,!0),t(p.fM.modelListPageRoute)):console.error(s),this.hasUnfilledRequests=!1})):Promise.resolve()}}componentDidMount(){this.loadData(!0).catch(console.error),this.hasUnfilledRequests=!1,this.pollIntervalId=setInterval(this.pollData,u.Gs)}componentWillUnmount(){clearInterval(this.pollIntervalId)}render(){const{model:e,modelVersions:t,navigate:s,modelName:a}=this.props;return(0,_.Y)(z.L,{children:(0,_.Y)($.Ay,{requestIds:this.criticalInitialRequestIds,children:(o,i,l)=>{if(i){if(clearInterval(this.pollIntervalId),f.A.shouldRender404(l,[this.initgetRegisteredModelApiRequestId]))return(0,_.Y)(Q.E,{statusCode:404,subMessage:this.props.intl.formatMessage({id:"tD0/e2",defaultMessage:"Model {modelName} does not exist"},{modelName:a}),fallbackHomePageReactRoute:p.fM.modelListPageRoute});const e=l.filter((e=>{var t;return this.criticalInitialRequestIds.includes(e.id)&&(null===(t=e.error)||void 0===t?void 0:t.getErrorCode())===m.tG.PERMISSION_DENIED}));var n;if(e&&e[0])return(0,_.Y)(Q.E,{statusCode:403,subMessage:this.props.intl.formatMessage({id:"rJitqj",defaultMessage:'Permission denied for {modelName}. Error: "{errorMsg}"'},{modelName:a,errorMsg:null===(n=e[0].error)||void 0===n?void 0:n.getMessageField()}),fallbackHomePageReactRoute:p.fM.modelListPageRoute});(0,$.dD)(l)}else{if(o)return(0,_.Y)(X.y,{});if(e)return(0,_.Y)(j,{model:e,modelVersions:t,handleEditDescription:this.handleEditDescription,handleDelete:this.handleDelete,navigate:s,onMetadataUpdated:this.loadData})}return null}})})}}const ae={searchModelVersionsApi:i.hY,getRegisteredModelApi:i.SY,updateRegisteredModelApi:i.tL,deleteRegisteredModelApi:i.r9},oe=(0,J.h)((0,o.Ng)(((e,t)=>{const s=decodeURIComponent(t.params.modelName);return{modelName:s,model:e.entities.modelByName[s],modelVersions:(0,k.Tr)(e,s)}}),ae)((0,E.Ay)(se))),ie=(0,ee.X)(te.A.mlflowServices.MODEL_REGISTRY,oe);var le=ie},43683:function(e,t,s){s.d(t,{Q:function(){return S}});var a=s(89555),o=s(9133),i=s(31014),l=s(32599),n=s(15579),r=s(48012),d=s(88464),c=s(88443),g=s(13369),m=s(50111);var u={name:"4zleql",styles:"display:block"};function h(e){return t=>function(e,t){const s=(0,d.A)(),{theme:n}=(0,l.u)(),c=e.props.searchValue.toLowerCase();return(0,i.useMemo)((()=>{if(!c)return e;if((0,o.sortedIndexOf)(t,c)>=0)return e;const l=/^[^,.:/=\-\s]+$/.test(c);return i.cloneElement(e,{flattenOptions:[{data:{value:c,disabled:!l,style:{color:l?n.colors.actionTertiaryTextDefault:n.colors.actionDisabledText},children:(0,m.Y)(r.paO,{title:l?void 0:s.formatMessage({id:"fWEvZL",defaultMessage:", . : / - = and blank spaces are not allowed"}),placement:"right",children:(0,m.FD)("span",{css:u,children:[(0,m.Y)(r.c11,{css:(0,a.AH)({marginRight:n.spacing.sm},"")}),s.formatMessage({id:"IJbauF",defaultMessage:'Add tag "{tagKey}"'},{tagKey:c})]})})},key:c,groupOption:!1},...e.props.flattenOptions]})}),[t,e,c,s,n])}(t,e)}var p={name:"1d3w5wq",styles:"width:100%"};function f({allAvailableTags:e,control:t,onKeyChangeCallback:s}){const a=(0,d.A)(),[o,l]=(0,i.useState)(!1),n=(0,i.useRef)(null),{field:c,fieldState:u}=(0,g.as)({control:t,name:"key",rules:{required:{message:a.formatMessage({id:"RlBbjb",defaultMessage:"A tag key is required"}),value:!0}}});return(0,m.Y)(r._vn,{allowClear:!0,ref:n,dangerouslySetAntdProps:{showSearch:!0,dropdownRender:h(e)},css:p,placeholder:a.formatMessage({id:"8ALhnh",defaultMessage:"Type a key"}),value:c.value,defaultValue:c.value,open:o,onDropdownVisibleChange:e=>{l(e)},filterOption:(e,t)=>null===t||void 0===t?void 0:t.value.toLowerCase().includes(e.toLowerCase()),onSelect:e=>{c.onChange(e),null===s||void 0===s||s(e)},onClear:()=>{c.onChange(void 0),null===s||void 0===s||s(void 0)},validationState:u.error?"error":void 0,children:e.map((e=>(0,m.Y)(r._vn.Option,{value:e,children:e},e)))})}var v=s(98597),M=s(52350);function _(e){return new Map(e.map((e=>[e.key,e])))}var y={name:"82a6rk",styles:"flex:1"},A={name:"82a6rk",styles:"flex:1"};const S=({onSuccess:e,saveTagsHandler:t,allAvailableTags:s,valueRequired:u=!1,title:h})=>{const p=(0,i.useRef)(),[S,C]=(0,i.useState)(""),{theme:I}=(0,l.u)(),[b,T]=(0,i.useState)(new Map),[Y,R]=(0,i.useState)(new Map),[D,k]=(0,i.useState)(!1),x=(0,g.mN)({defaultValues:{key:void 0,value:""}}),E=()=>k(!1),V=(0,i.useCallback)((e=>{p.current=e,T(_(e.tags||[])),R(_(e.tags||[])),x.reset(),k(!0)}),[x]),N=async()=>{p.current&&(C(""),O(!0),t(p.current,Array.from(b.values()),Array.from(Y.values())).then((()=>{E(),null===e||void 0===e||e(),O(!1)})).catch((e=>{var t;O(!1),C(e instanceof M.s?null===(t=e.getUserVisibleError())||void 0===t?void 0:t.message:e.message)})))},F=(0,d.A)(),P=x.watch(),[L,O]=(0,i.useState)(!1),U=(0,i.useMemo)((()=>!(0,o.isEqual)((0,o.sortBy)(Array.from(b.values()),"key"),(0,o.sortBy)(Array.from(Y.values()),"key"))),[b,Y]),B=P.key||P.value,K=U&&B;return{EditTagsModal:(0,m.FD)(n.d,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_135",destroyOnClose:!0,visible:D,title:null!==h&&void 0!==h?h:(0,m.Y)(c.A,{id:"TBX+Gs",defaultMessage:"Add/Edit tags"}),onCancel:E,footer:(0,m.FD)(l.y,{children:[(0,m.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_147",dangerouslyUseFocusPseudoClass:!0,onClick:E,css:(0,a.AH)({marginRight:U?0:I.spacing.sm},""),children:F.formatMessage({id:"2a/rR8",defaultMessage:"Cancel"})}),K?(0,m.Y)(w,{formValues:P,isLoading:L,onSaveTask:N}):(0,m.Y)(r.paO,{title:U?void 0:F.formatMessage({id:"16onEc",defaultMessage:"Please add or remove one or more tags before saving"}),children:(0,m.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_174",dangerouslyUseFocusPseudoClass:!0,disabled:!U,loading:L,type:"primary",onClick:N,children:F.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})})]}),children:[(0,m.FD)("form",{onSubmit:x.handleSubmit((()=>{if(u&&!P.value.trim())return;const e=new Map(Y);e.set(P.key,P),R(e),x.reset()})),css:(0,a.AH)({display:"flex",alignItems:"flex-end",gap:I.spacing.md},""),children:[(0,m.FD)("div",{css:(0,a.AH)({minWidth:0,display:"flex",gap:I.spacing.md,flex:1},""),children:[(0,m.FD)("div",{css:y,children:[(0,m.Y)(r.D$Q.Label,{htmlFor:"key",children:F.formatMessage({id:"crTWax",defaultMessage:"Key"})}),(0,m.Y)(f,{allAvailableTags:s||[],control:x.control,onKeyChangeCallback:e=>{var t;const s=e?Y.get(e):void 0;x.setValue("value",null!==(t=null===s||void 0===s?void 0:s.value)&&void 0!==t?t:"")}})]}),(0,m.FD)("div",{css:A,children:[(0,m.Y)(r.D$Q.Label,{htmlFor:"value",children:u?F.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):F.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"})}),(0,m.Y)(r.tc_.Input,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_223",name:"value",control:x.control,"aria-label":u?F.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):F.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"}),placeholder:F.formatMessage({id:"FFe+Ug",defaultMessage:"Type a value"})})]})]}),(0,m.Y)(r.paO,{title:F.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,m.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_248",htmlType:"submit","aria-label":F.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,m.Y)(r.c11,{})})})]}),S&&(0,m.Y)(r.D$Q.Message,{type:"error",message:S}),(0,m.Y)("div",{css:(0,a.AH)({display:"flex",rowGap:I.spacing.xs,flexWrap:"wrap",marginTop:I.spacing.sm},""),children:Array.from(Y.values()).map((e=>(0,m.Y)(v.t,{isClosable:!0,tag:e,onClose:()=>(({key:e})=>{R((t=>(t.delete(e),new Map(t))))})(e)},e.key)))})]}),showEditTagsModal:V,isLoading:L}};var C={name:"1y0ex1",styles:"max-width:400px"};function w({isLoading:e,formValues:t,onSaveTask:s}){const i=(0,d.A)(),{theme:n}=(0,l.u)(),r=`${`${(0,o.truncate)(t.key,{length:20})||"_"}`}${t.value?`:${(0,o.truncate)(t.value,{length:20})}`:""}`,c=i.formatMessage({id:"wcSVYI",defaultMessage:'Are you sure you want to save and close without adding "{tag}"'},{tag:r});return(0,m.FD)(l.av.Root,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_309",children:[(0,m.Y)(l.av.Trigger,{asChild:!0,children:(0,m.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_306",dangerouslyUseFocusPseudoClass:!0,loading:e,type:"primary",children:i.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})}),(0,m.FD)(l.av.Content,{align:"end","aria-label":c,children:[(0,m.Y)(l.T.Paragraph,{css:C,children:c}),(0,m.Y)(l.av.Close,{asChild:!0,children:(0,m.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_316",onClick:s,children:i.formatMessage({id:"mv6CY3",defaultMessage:"Yes, save and close"})})}),(0,m.Y)(l.av.Close,{asChild:!0,children:(0,m.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_324",type:"primary",css:(0,a.AH)({marginLeft:n.spacing.sm},""),children:i.formatMessage({id:"geizp1",defaultMessage:"Cancel"})})}),(0,m.Y)(l.av.Arrow,{})]})]})}},45653:function(e,t,s){s.d(t,{Qr:function(){return d},U1:function(){return f},Xb:function(){return u},Y7:function(){return l},fx:function(){return n},ib:function(){return v},yv:function(){return c},z7:function(){return p}});var a=s(9133),o=s.n(a);const i=()=>s.e(6386).then(s.t.bind(s,86386,23)),l=(e,t)=>{const s=o().truncate(e,{length:t});return o().takeWhile(s,(e=>"\n"!==e)).join("")},n=(e,t)=>{if(e.length>t){const s=Math.floor((t-3)/2),a=t-3-s;return e.substring(0,s)+"..."+e.substring(e.length-a,e.length)}return e},r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=e=>{let t="",s=0;const a=g(e);for(;s<a.length;){const e=a.charCodeAt(s++),o=a.charCodeAt(s++),i=a.charCodeAt(s++),l=e>>2,n=(3&e)<<4|o>>4;let d=(15&o)<<2|i>>6,c=63&i;isNaN(o)?(c=64,d=c):isNaN(i)&&(c=64),t=t+r.charAt(l)+r.charAt(n)+r.charAt(d)+r.charAt(c)}return t},c=e=>{let t="",s=0;const a=(null===e||void 0===e?void 0:e.replace(/[^A-Za-z0-9+/=]/g,""))||"";for(;s<a.length;){const e=r.indexOf(a.charAt(s++)),o=r.indexOf(a.charAt(s++)),i=r.indexOf(a.charAt(s++)),l=r.indexOf(a.charAt(s++)),n=e<<2|o>>4,d=(15&o)<<4|i>>2,c=(3&i)<<6|l;t+=String.fromCharCode(n),64!==i&&(t+=String.fromCharCode(d)),64!==l&&(t+=String.fromCharCode(c))}return m(t)},g=(e="")=>{const t=e.replace(/\r\n/g,"\n");let s="";for(let a=0;a<t.length;a++){const e=t.charCodeAt(a);s+=e<128?String.fromCharCode(e):e>127&&e<2048?String.fromCharCode(e>>6|192)+String.fromCharCode(63&e|128):String.fromCharCode(e>>12|224)+String.fromCharCode(e>>6&63|128)+String.fromCharCode(63&e|128)}return s},m=(e="")=>{let t="",s=0;for(;s<e.length;){const a=e.charCodeAt(s);if(a<128)t+=String.fromCharCode(a),s++;else if(a>191&&a<224){const o=e.charCodeAt(s+1);t+=String.fromCharCode((31&a)<<6|63&o),s+=2}else{const o=e.charCodeAt(s+1),i=e.charCodeAt(s+2);t+=String.fromCharCode((15&a)<<12|(63&o)<<6|63&i),s+=3}}return t},u=e=>crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e)).then((e=>Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join(""))),h="deflate;",p=async e=>{const t=(await i()).deflate(e);if("undefined"!==typeof Buffer){const e=Buffer.from(t).toString("base64");return`${h}${e}`}const s=Array.from(t,(e=>String.fromCodePoint(e))).join("");return`${h}${btoa(s)}`},f=async e=>{const t=await i();if(!e.startsWith(h))throw new Error("Invalid compressed text, payload header invalid");const s=e.slice(8);if("undefined"!==typeof Buffer){const e=Buffer.from(s,"base64");return t.inflate(e,{to:"string"})}const a=atob(s);return t.inflate(Uint8Array.from(a,(e=>{var t;return null!==(t=e.codePointAt(0))&&void 0!==t?t:0})),{to:"string"})},v=e=>e.startsWith(h)},56412:function(e,t,s){s.d(t,{i:function(){return d}});var a=s(31014),o=s(88443),i=s(48012),l=s(32599),n=s(50111);var r={name:"1739oy8",styles:"z-index:1"};const d=({copyText:e,showLabel:t=!0,componentId:s,...d})=>{const[c,g]=(0,a.useState)(!1);return(0,n.Y)(i.paO,{title:(0,n.Y)(o.A,{id:"X+boXI",defaultMessage:"Copied"}),dangerouslySetAntdProps:{visible:c},children:(0,n.Y)(l.B,{componentId:null!==s&&void 0!==s?s:"mlflow.shared.copy_button",type:"primary",onClick:()=>{navigator.clipboard.writeText(e),g(!0),setTimeout((()=>{g(!1)}),3e3)},onMouseLeave:()=>{g(!1)},css:r,children:t?(0,n.Y)(o.A,{id:"1Iq+NW",defaultMessage:"Copy"}):void 0,...d})})}},91164:function(e,t,s){s.d(t,{Y:function(){return d}});var a=s(89555),o=s(32599),i=s(48012),l=s(64756),n=s(88443),r=s(50111);const d=({aliases:e=[],onAddEdit:t,className:s})=>{const{theme:d}=(0,o.u)();return(0,r.Y)("div",{css:(0,a.AH)({maxWidth:300,display:"flex",flexWrap:"wrap",alignItems:"flex-start","> *":{marginRight:"0 !important"},rowGap:d.spacing.xs/2,columnGap:d.spacing.xs},""),className:s,children:e.length<1?(0,r.Y)(o.B,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelversiontablealiasescell.tsx_30",size:"small",type:"link",onClick:t,children:(0,r.Y)(n.A,{id:"pU6cxH",defaultMessage:"Add"})}):(0,r.FD)(r.FK,{children:[e.map((e=>(0,r.Y)(l.m,{value:e,css:(0,a.AH)({marginTop:d.spacing.xs/2},"")},e))),(0,r.Y)(o.B,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelversiontablealiasescell.tsx_41",size:"small",icon:(0,r.Y)(i.R2l,{}),onClick:t})]})})}},98597:function(e,t,s){s.d(t,{t:function(){return f}});var a=s(89555),o=s(48012),i=s(32599),l=s(31014),n=s(88464),r=s(15579),d=s(56412),c=s(50111);const{Paragraph:g}=i.T;var m={name:"zjik7",styles:"display:flex"},u={name:"1ff36h2",styles:"flex-grow:1"};const h=l.memo((e=>{const{theme:t}=(0,i.u)();return(0,c.Y)(r.d,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetagfullviewmodal.tsx_17",title:"Tag: "+e.tagKey,visible:e.isKeyValueTagFullViewModalVisible,onCancel:()=>e.setIsKeyValueTagFullViewModalVisible(!1),children:(0,c.FD)("div",{css:m,children:[(0,c.Y)(g,{css:u,children:(0,c.Y)("pre",{css:(0,a.AH)({backgroundColor:t.colors.backgroundPrimary,marginTop:t.spacing.sm,whiteSpace:"pre-wrap",wordBreak:"break-all"},""),children:e.tagValue})}),(0,c.Y)("div",{css:(0,a.AH)({marginTop:t.spacing.sm},""),children:(0,c.Y)(d.i,{copyText:e.tagValue,showLabel:!1,icon:(0,c.Y)(o.TdU,{}),"aria-label":"Copy"})})]})})}));function p(e=!0){return e?{overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",whiteSpace:"nowrap"}:{whiteSpace:"nowrap"}}const f=({isClosable:e=!1,onClose:t,tag:s,enableFullViewModal:r=!1,charLimit:d=30,maxWidth:g=300,className:m})=>{const u=(0,n.A)(),[f,v]=(0,l.useState)(!1),{shouldTruncateKey:M,shouldTruncateValue:_}=function(e,t=30){const{key:s,value:a}=e,o=s.length+a.length,i=s.length>a.length,l=i?a.length:s.length;return o<=t?{shouldTruncateKey:!1,shouldTruncateValue:!1}:l>t/2?{shouldTruncateKey:!0,shouldTruncateValue:!0}:{shouldTruncateKey:i,shouldTruncateValue:!i}}(s,d),y=r&&(M||_),A=u.formatMessage({id:"ZXUtU8",defaultMessage:"Click to see more"});return(0,c.FD)("div",{children:[(0,c.Y)(o.vwO,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetag.tsx_60",closable:e,onClose:t,title:s.key,className:m,children:(0,c.Y)(o.paO,{title:y?A:"",children:(0,c.FD)("span",{css:(0,a.AH)({maxWidth:g,display:"inline-flex"},""),onClick:()=>y?v(!0):void 0,children:[(0,c.Y)(i.T.Text,{bold:!0,title:s.key,css:p(M),children:s.key}),s.value&&(0,c.FD)(i.T.Text,{title:s.value,css:p(_),children:[": ",s.value]})]})})}),(0,c.Y)("div",{children:f&&(0,c.Y)(h,{tagKey:s.key,tagValue:s.value,isKeyValueTagFullViewModalVisible:f,setIsKeyValueTagFullViewModalVisible:v})})]})}}}]);
//# sourceMappingURL=4035.21047a9d.chunk.js.map