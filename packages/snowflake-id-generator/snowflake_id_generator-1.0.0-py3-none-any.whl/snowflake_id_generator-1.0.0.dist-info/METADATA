Metadata-Version: 2.4
Name: snowflake-id-generator
Version: 1.0.0
Summary: åˆ†å¸ƒå¼é›ªèŠ±ç®—æ³•IDç”Ÿæˆå™¨
Home-page: https://github.com/yourusername/snowflake-id-generator
Author: Your Name
Author-email: your.email@example.com
License: MIT
Keywords: snowflake,id,generator,distributed,unique,uuid
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: System :: Distributed Computing
Requires-Python: >=3.7
Description-Content-Type: text/markdown
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: keywords
Dynamic: license
Dynamic: requires-python
Dynamic: summary

# é›ªèŠ±ç®—æ³•IDç”Ÿæˆå™¨ (Snowflake ID Generator)

[![PyPI version](https://badge.fury.io/py/snowflake-id-generator.svg)](https://badge.fury.io/py/snowflake-id-generator)
[![Python Support](https://img.shields.io/pypi/pyversions/snowflake-id-generator.svg)](https://pypi.org/project/snowflake-id-generator/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

ä¸€ä¸ªé«˜æ€§èƒ½çš„åˆ†å¸ƒå¼é›ªèŠ±ç®—æ³•IDç”Ÿæˆå™¨ï¼Œç”¨äºç”Ÿæˆå…¨å±€å”¯ä¸€çš„64ä½æ•´æ•°IDã€‚æ”¯æŒå¤šå®ä¾‹éƒ¨ç½²å’Œæ°´å¹³æ‰©å±•ï¼Œè§£å†³é«˜å¹¶å‘åœºæ™¯ä¸‹çš„IDå†²çªé—®é¢˜ã€‚

## ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½**: æœ¬åœ°ç”Ÿæˆï¼Œæ— ç½‘ç»œIOï¼Œæ¯ç§’å¯ç”Ÿæˆæ•°ç™¾ä¸‡ä¸ªID
- ğŸŒ **åˆ†å¸ƒå¼å‹å¥½**: æ”¯æŒå¤šå®ä¾‹éƒ¨ç½²ï¼Œé€šè¿‡æœºå™¨IDå’Œæ•°æ®ä¸­å¿ƒIDåŒºåˆ†
- ğŸ”’ **çº¿ç¨‹å®‰å…¨**: å†…ç½®çº¿ç¨‹é”ï¼Œæ”¯æŒå¤šçº¿ç¨‹å¹¶å‘è®¿é—®
- â° **æ—¶é—´æœ‰åº**: åŸºäºæ—¶é—´æˆ³ç”Ÿæˆï¼ŒIDå¤§è‡´æŒ‰æ—¶é—´é¡ºåºé€’å¢
- ğŸ›¡ï¸ **æ—¶é’Ÿå›æ‹¨æ£€æµ‹**: è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿæ—¶é’Ÿå›æ‹¨ï¼Œé˜²æ­¢IDé‡å¤
- ğŸ“Š **IDè§£æ**: æ”¯æŒè§£æIDè·å–æ—¶é—´æˆ³ã€æœºå™¨IDç­‰è¯¦ç»†ä¿¡æ¯
- ğŸ¯ **é›¶ä¾èµ–**: ä»…ä½¿ç”¨Pythonæ ‡å‡†åº“ï¼Œæ— å¤–éƒ¨ä¾èµ–

## å®‰è£…

```bash
pip install snowflake-id-generator
```

## å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

```python
from snowflake_id_generator import SnowflakeService, init_snowflake_service, generate_user_id

# åˆå§‹åŒ–æœåŠ¡ï¼ˆä½¿ç”¨é»˜è®¤é…ç½®ï¼‰
init_snowflake_service()

# ç”ŸæˆID
user_id = generate_user_id()
print(f"ç”Ÿæˆçš„ç”¨æˆ·ID: {user_id}")
```

### è‡ªå®šä¹‰é…ç½®

```python
from snowflake_id_generator import SnowflakeService

# åˆ›å»ºè‡ªå®šä¹‰é…ç½®çš„ç”Ÿæˆå™¨
generator = SnowflakeService(
    worker_id=1,        # å·¥ä½œæœºå™¨ID (0-31)
    datacenter_id=1,    # æ•°æ®ä¸­å¿ƒID (0-31)
    epoch=1577836800000 # èµ·å§‹æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
)

# ç”ŸæˆID
id = generator.generate_id()
print(f"ç”Ÿæˆçš„ID: {id}")
```

### IDè§£æ

```python
from snowflake_id_generator import SnowflakeService

generator = SnowflakeService(worker_id=1, datacenter_id=1)
id = generator.generate_id()

# è§£æIDè·å–è¯¦ç»†ä¿¡æ¯
info = generator.parse_id(id)
print(f"æ—¶é—´æˆ³: {info['timestamp']}")
print(f"æ•°æ®ä¸­å¿ƒID: {info['datacenter_id']}")
print(f"å·¥ä½œæœºå™¨ID: {info['worker_id']}")
print(f"åºåˆ—å·: {info['sequence']}")
print(f"å¯è¯»æ—¶é—´: {info['readable_time']}")
```

## é›ªèŠ±ç®—æ³•ç»“æ„

64ä½IDç»“æ„ï¼š
```
1ä½ç¬¦å·ä½(0) + 41ä½æ—¶é—´æˆ³ + 5ä½æ•°æ®ä¸­å¿ƒID + 5ä½å·¥ä½œæœºå™¨ID + 12ä½åºåˆ—å·
```

- **æ—¶é—´æˆ³**: 41ä½ï¼Œå¯ç”¨çº¦69å¹´ï¼ˆä»epochå¼€å§‹ï¼‰
- **æ•°æ®ä¸­å¿ƒID**: 5ä½ï¼Œæ”¯æŒ0-31ä¸ªæ•°æ®ä¸­å¿ƒ
- **å·¥ä½œæœºå™¨ID**: 5ä½ï¼Œæ¯ä¸ªæ•°æ®ä¸­å¿ƒæ”¯æŒ0-31ä¸ªå®ä¾‹
- **åºåˆ—å·**: 12ä½ï¼Œæ¯æ¯«ç§’æœ€å¤š4096ä¸ªID

## é…ç½®è¯´æ˜

### æœºå™¨IDé…ç½®

åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œæ¯ä¸ªå®ä¾‹å¿…é¡»ä½¿ç”¨ä¸åŒçš„æœºå™¨IDï¼š

```python
# å®ä¾‹1
generator1 = SnowflakeService(worker_id=1, datacenter_id=1)

# å®ä¾‹2  
generator2 = SnowflakeService(worker_id=2, datacenter_id=1)

# å®ä¾‹3
generator3 = SnowflakeService(worker_id=1, datacenter_id=2)
```

### æ—¶é—´æˆ³é…ç½®

é»˜è®¤èµ·å§‹æ—¶é—´æˆ³ä¸º2020-01-01 00:00:00 UTCï¼Œå¯ç”¨åˆ°2089å¹´ã€‚å¦‚éœ€è‡ªå®šä¹‰ï¼š

```python
import time

# è‡ªå®šä¹‰èµ·å§‹æ—¶é—´æˆ³ï¼ˆ2021-01-01 00:00:00 UTCï¼‰
custom_epoch = int(time.mktime(time.strptime("2021-01-01 00:00:00", "%Y-%m-%d %H:%M:%S")) * 1000)

generator = SnowflakeService(
    worker_id=1,
    datacenter_id=1, 
    epoch=custom_epoch
)
```

## æ€§èƒ½æµ‹è¯•

```python
import time
from snowflake_id_generator import SnowflakeService

generator = SnowflakeService(worker_id=1, datacenter_id=1)

# æ€§èƒ½æµ‹è¯•
start_time = time.time()
count = 100000

for _ in range(count):
    generator.generate_id()

end_time = time.time()
duration = end_time - start_time
qps = count / duration

print(f"ç”Ÿæˆ {count} ä¸ªIDè€—æ—¶: {duration:.2f}ç§’")
print(f"QPS: {qps:.0f}")
```

## é”™è¯¯å¤„ç†

```python
from snowflake_id_generator import SnowflakeService, SnowflakeError

try:
    generator = SnowflakeService(worker_id=1, datacenter_id=1)
    id = generator.generate_id()
except SnowflakeError as e:
    print(f"é›ªèŠ±ç®—æ³•é”™è¯¯: {e}")
```

## é«˜çº§ç”¨æ³•

### æ‰¹é‡ç”ŸæˆID

```python
def generate_batch_ids(generator, count):
    """æ‰¹é‡ç”ŸæˆID"""
    return [generator.generate_id() for _ in range(count)]

generator = SnowflakeService(worker_id=1, datacenter_id=1)
ids = generate_batch_ids(generator, 1000)
print(f"æ‰¹é‡ç”Ÿæˆ {len(ids)} ä¸ªID")
```

### è·å–ç”Ÿæˆå™¨çŠ¶æ€

```python
generator = SnowflakeService(worker_id=1, datacenter_id=1)

# è·å–ç”Ÿæˆå™¨çŠ¶æ€ä¿¡æ¯
info = generator.get_info()
print(f"å·¥ä½œæœºå™¨ID: {info['worker_id']}")
print(f"æ•°æ®ä¸­å¿ƒID: {info['datacenter_id']}")
print(f"å½“å‰æ—¶é—´æˆ³: {info['current_timestamp']}")
print(f"æœ€åæ—¶é—´æˆ³: {info['last_timestamp']}")
print(f"å½“å‰åºåˆ—å·: {info['current_sequence']}")
```

## éƒ¨ç½²å»ºè®®

### å•æœºéƒ¨ç½²
```python
from snowflake_id_generator import init_snowflake_service, generate_user_id

# åº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–
init_snowflake_service()

# åœ¨éœ€è¦çš„åœ°æ–¹ç”ŸæˆID
user_id = generate_user_id()
```

### åˆ†å¸ƒå¼éƒ¨ç½²
```python
from snowflake_id_generator import SnowflakeService

# æ¯ä¸ªå®ä¾‹ä½¿ç”¨ä¸åŒçš„é…ç½®
# å®ä¾‹1: worker_id=1, datacenter_id=1
# å®ä¾‹2: worker_id=2, datacenter_id=1  
# å®ä¾‹3: worker_id=1, datacenter_id=2

generator = SnowflakeService(worker_id=1, datacenter_id=1)
id = generator.generate_id()
```

## æ³¨æ„äº‹é¡¹

1. **æœºå™¨IDå”¯ä¸€æ€§**: ç¡®ä¿åŒä¸€æ•°æ®ä¸­å¿ƒå†…æ¯ä¸ªå®ä¾‹çš„worker_idå”¯ä¸€
2. **æ—¶é’ŸåŒæ­¥**: å»ºè®®ä½¿ç”¨NTPåŒæ­¥ç³»ç»Ÿæ—¶é’Ÿï¼Œé¿å…æ—¶é’Ÿå›æ‹¨
3. **å®ä¾‹é‡å¯**: å®ä¾‹é‡å¯ååºåˆ—å·ä¼šé‡ç½®ï¼Œè¿™æ˜¯æ­£å¸¸è¡Œä¸º
4. **IDèŒƒå›´**: ç”Ÿæˆçš„IDä¸º64ä½æ­£æ•´æ•°ï¼ŒèŒƒå›´çº¦ä¸º0åˆ°9.2Ã—10^18

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒåŸºæœ¬çš„é›ªèŠ±ç®—æ³•IDç”Ÿæˆ
- æ”¯æŒIDè§£æå’ŒçŠ¶æ€æŸ¥è¯¢
- çº¿ç¨‹å®‰å…¨è®¾è®¡
- æ—¶é’Ÿå›æ‹¨æ£€æµ‹

## è”ç³»æ–¹å¼

- ä½œè€…: Your Name
- é‚®ç®±: your.email@example.com
- é¡¹ç›®åœ°å€: https://github.com/yourusername/snowflake-id-generator

