# MCP Proxy Adapter - Examples and Security Testing

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è MCP Proxy Adapter —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞

```
examples/
‚îú‚îÄ‚îÄ README.md                           # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ SECURITY_TESTING.md                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ generate_certificates.py            # –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
‚îú‚îÄ‚îÄ security_test_client.py             # –ö–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ run_security_tests.py               # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ cert_config.json                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
‚îú‚îÄ‚îÄ certs/                              # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
‚îú‚îÄ‚îÄ keys/                               # –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏
‚îú‚îÄ‚îÄ server_configs/                     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ config_basic_http.json         # –ë–∞–∑–æ–≤—ã–π HTTP
‚îÇ   ‚îú‚îÄ‚îÄ config_http_token.json         # HTTP + —Ç–æ–∫–µ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ config_https.json              # HTTPS
‚îÇ   ‚îú‚îÄ‚îÄ config_https_token.json        # HTTPS + —Ç–æ–∫–µ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ config_mtls.json               # mTLS
‚îÇ   ‚îî‚îÄ‚îÄ roles.json                     # –†–æ–ª–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
‚îî‚îÄ‚îÄ commands/                           # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
    ‚îî‚îÄ‚îÄ __init__.py
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å—Ä–µ–¥—É
source .venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -e .
```

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
cd mcp_proxy_adapter/examples
python generate_certificates.py
```

### 3. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Ç–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
python run_security_tests.py
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤

### –ë–∞–∑–æ–≤—ã–π HTTP (–ø–æ—Ä—Ç 8000)
```bash
python -m mcp_proxy_adapter.main --config server_configs/config_basic_http.json
```

### HTTP + –¢–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ø–æ—Ä—Ç 8001)
```bash
python -m mcp_proxy_adapter.main --config server_configs/config_http_token.json
```

### HTTPS (–ø–æ—Ä—Ç 8443)
```bash
python -m mcp_proxy_adapter.main --config server_configs/config_https.json
```

### HTTPS + –¢–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ø–æ—Ä—Ç 8444)
```bash
python -m mcp_proxy_adapter.main --config server_configs/config_https_token.json
```

### mTLS (–ø–æ—Ä—Ç 8445)
```bash
python -m mcp_proxy_adapter.main --config server_configs/config_mtls.json
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –¢–µ—Å—Ç –±–∞–∑–æ–≤–æ–≥–æ HTTP —Å–µ—Ä–≤–µ—Ä–∞
python security_test_client.py --server http://localhost:8000 --auth none

# –¢–µ—Å—Ç HTTP —Å —Ç–æ–∫–µ–Ω–æ–º
python security_test_client.py --server http://localhost:8001 --auth api_key --token test-token-123

# –¢–µ—Å—Ç HTTPS —Å–µ—Ä–≤–µ—Ä–∞
python security_test_client.py --server https://localhost:8443 --auth none

# –¢–µ—Å—Ç HTTPS —Å —Ç–æ–∫–µ–Ω–æ–º
python security_test_client.py --server https://localhost:8444 --auth api_key --token test-token-123

# –¢–µ—Å—Ç mTLS —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º
python security_test_client.py --server https://localhost:8445 --auth certificate --cert certs/admin_cert.pem --key keys/admin_key.pem --ca-cert certs/ca_cert.pem
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏—Ö
python run_security_tests.py
```

## üìã –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ë–∞–∑–æ–≤—ã–π HTTP (config_basic_http.json)
- **–ü–æ—Ä—Ç**: 8000
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –û—Ç–∫–ª—é—á–µ–Ω–∞
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ù–µ—Ç
- **–¢–µ—Å—Ç—ã**: Health check, echo command

### 2. HTTP + –¢–æ–∫–µ–Ω (config_http_token.json)
- **–ü–æ—Ä—Ç**: 8001
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: API Key –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–¢–æ–∫–µ–Ω—ã**: 
  - `test-token-123` (admin)
  - `user-token-456` (user)
- **–¢–µ—Å—Ç—ã**: –†–æ–ª–µ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã

### 3. HTTPS (config_https.json)
- **–ü–æ—Ä—Ç**: 8443
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: SSL/TLS
- **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**: –°–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ
- **–¢–µ—Å—Ç—ã**: –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### 4. HTTPS + –¢–æ–∫–µ–Ω (config_https_token.json)
- **–ü–æ—Ä—Ç**: 8444
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: SSL/TLS + API Key
- **–¢–µ—Å—Ç—ã**: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 5. mTLS (config_mtls.json)
- **–ü–æ—Ä—Ç**: 8445
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í–∑–∞–∏–º–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
- **–¢–µ—Å—Ç—ã**: –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

## üîë –¢–æ–∫–µ–Ω—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```json
{
  "test-token-123": {
    "roles": ["admin"],
    "permissions": ["*"]
  },
  "user-token-456": {
    "roles": ["user"],
    "permissions": ["read", "execute"]
  }
}
```

## üìú –†–æ–ª–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

```json
{
  "admin": ["*"],
  "user": ["read", "write", "execute"],
  "readonly": ["read"],
  "guest": ["read"]
}
```

## üõ†Ô∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π:

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
python -m mcp_proxy_adapter.utils.config_generator --all --output-dir ./generated_configs

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞
python -m mcp_proxy_adapter.utils.config_generator --type https_token --output ./my_config.json
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–ø—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π:
- `minimal` - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `development` - –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `secure` - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- `full` - –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `basic_http` - –ë–∞–∑–æ–≤—ã–π HTTP
- `http_token` - HTTP + —Ç–æ–∫–µ–Ω
- `https` - HTTPS
- `https_token` - HTTPS + —Ç–æ–∫–µ–Ω
- `mtls` - mTLS

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
- `./logs/server.log` - –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
- `./logs/security.log` - –õ–æ–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
```bash
tail -f logs/server.log
tail -f logs/security.log
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
ls -la certs/
ls -la keys/

# –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
python generate_certificates.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç
```bash
# –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –ø–æ—Ä—Ç
lsof -i :8000
lsof -i :8443

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å
kill -9 <PID>
```

### –ü—Ä–æ–±–ª–µ–º–∞: SSL –æ—à–∏–±–∫–∏
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
openssl x509 -in certs/server_cert.pem -text -noout

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
openssl rsa -in keys/server_key.pem -check
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [SECURITY_TESTING.md](SECURITY_TESTING.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [API Documentation](../docs/api/) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- [Configuration Guide](../docs/configuration.md) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `./logs/`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–ø–æ–ª–∞–¥–æ–∫

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª [LICENSE](../../LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

---

**–ê–≤—Ç–æ—Ä**: Vasiliy Zdanovskiy  
**Email**: vasilyvz@gmail.com  
**–í–µ—Ä—Å–∏—è**: 1.0.0
