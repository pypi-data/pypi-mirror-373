# -*- mode: yaml; coding: utf-8 -*-
#
# Schema for the mkinstance plugin for csspin

mkinstance:
    type: object
    help: |
        The mkinstance plugin for csspin provides the full mkinstance
        experience - all in the context of csspin.
    properties:
        opts:
            type: list
            help: List of additional options for the mkinstance command.
        dbms:
            type: str
            help: The DBMS that mkinstance should use.
        webmake:
            type: bool
            help: If set to ``True``, webmake will be run.
        tls:
            type: object
            help: TLS configuration
            properties:
                cert:
                    type: path
                    help: The certificate file to use for SSL/TLS termination.
                tls_cert_key:
                    type: path
                    help: The key file for ``mkinstance.tls.cert``.
                enabled:
                    type: bool
                    help: |
                        If set to ``True``, the instance will be equipped with a
                        self-signed TLS certificate that is added to the
                        instances' CA. The ``localhost.crt`` and
                        ``localhost.key`` can be obtained from the instances'
                        'certs' directory.
                dns_names:
                    type: list
                    help: DNS names for the TLS certificate
        std_calendar_profile_range:
            type: str
            help: |
                Value for CADDOK_GENERATE_STD_CALENDAR_PROFILE_RANGE to
                determine the range of dates that are being created for the
                standard calendar profile.
        base:
            type: object
            help: The base defines the base properties for an CE instance.
            properties:
                namespace:
                    type: str
                    help: |
                        The namespace that the CE instance should be assigned
                        to.
                instance_admpwd:
                    type: str
                    help: |
                        The admin password for the CE instance to create. Use
                        ``""`` for empty password, thus the user caddok is
                        accessible.
                instance_location:
                    type: path
                    help: The location where the CE instance should be created.
        oracle:
            type: object
            help: |
                The Oracle DBMS properties are exclusively used, if
                `mkinstance.dbms=oracle`.
            properties:
                ora_dbhost:
                    type: str
                    help: |
                        The hostname or IP address of the Oracle database
                        server.
                ora_syspwd:
                    type: str
                    help: |
                        The password for the Oracle SYS user, used for
                        administrative tasks.
                ora_dbuser:
                    type: str
                    help: The username for connecting to the Oracle database.
                ora_dbpasswd:
                    type: str
                    help: The password for the specified Oracle database user.
        mssql:
            type: object
            help: |
                The MSSQL DBMS properties are exclusively used, if
                `mkinstance.dbms=mssql`.
            properties:
                mssql_dbuser:
                    type: str
                    help: The username for connecting to the MSSQL database.
                mssql_dbhost:
                    type: str
                    help: |
                        The hostname or IP address of the MSSQL database server.
                mssql_syspwd:
                    type: str
                    help: |
                        The password for the MSSQL SYS user, used for
                        administrative tasks.
                mssql_catalog:
                    type: str
                    help: The name of the database catalog to use or create.
                mssql_dbpasswd:
                    type: str
                    help: The password for the MSSQL database user.
                mssql_pyodbc:
                    type: str
                    help: |
                        Use the PyODBC driver: The installation will be created
                        with the PyODBC driver.
                mssql_odbc_driver:
                    type: str
                    help: |
                        ODBC driver name for the PyODBC driver: ODBC driver name
                        to use in the ODBC connection string
                mssql_odbc_encrypt:
                    type: str
                    help: Enable ODBC encryption.
        mssql_sspi:
            type: object
            help: |
                The MSSQL sspi DBMS properties are exclusively used, if
                `mkinstance.dbms=mssql_sspi`.
            properties:
                mssql_dbhost:
                    type: str
                    help: |
                        The hostname or IP address of the MSSQL sspi database
                        server.
                mssql_catalog:
                    type: str
                    help: The name of the database catalog to use or create.
        postgres:
            type: object
            help: |
                The Postgres DBMS properties are exclusively used, if
                `mkinstance.dbms=postgres`.
            properties:
                postgres_database:
                    type: str
                    help: The database that should be created or accessed.
                postgres_dbhost:
                    type: str
                    help: |
                        The hostname or IP address of the Postgres database
                        server.
                postgres_dbpasswd:
                    type: str
                    help: The database password.
                postgres_dbport:
                    type: int
                    help: |
                        The port that the Postgres database is accessible via
                        postgres.host.
                postgres_dbuser:
                    type: str
                    help: The username for connecting to the Postgres database.
                postgres_system_user:
                    type: str
                    help: |
                        The system user with administrative privileges in
                        Postgres.
                postgres_syspwd:
                    type: str
                    help: The password for the Postgres system user.
