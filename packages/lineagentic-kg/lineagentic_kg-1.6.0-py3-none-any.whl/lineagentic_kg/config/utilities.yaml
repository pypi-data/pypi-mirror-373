# Utility Functions Configuration
# This file contains utility function definitions and their configuration

# Utility function definitions - completely generic
utility_functions:
  data_platform_urn:
    type: "urn_generation"
    description: "Generate data platform URN"
    parameters: ["platform"]
    implementation:
      operation: "string_format"
      template: "urn:li:dataPlatform:{platform}"
  
  sanitize_id:
    type: "string_processing"
    description: "Sanitize string by removing invalid characters"
    parameters: ["raw"]
    implementation:
      operation: "regex_replace"
      pattern_config: "sanitize_pattern"
      replacement_config: "sanitize_replacement"
      pre_processing: "strip"
      strip_method_config: "strip_method"
  
  email_to_username:
    type: "string_processing"
    description: "Extract username from email address"
    parameters: ["email"]
    implementation:
      operation: "split_and_extract"
      separator_config: "email_separator"
      split_limit_config: "split_limit"
      split_index_config: "split_index"
      post_processing: "regex_replace"
      pattern_config: "sanitize_pattern"
      replacement_config: "sanitize_replacement"
  
  mask_secret:
    type: "data_masking"
    description: "Mask sensitive data in key-value pairs"
    parameters: ["key", "value"]
    implementation:
      operation: "conditional_replace"
      condition: "regex_match"
      pattern_config: "secret_pattern"
      regex_flag_config: "regex_flag"
      replacement_config: "mask_replacement"
  
  utc_now_ms:
    type: "timestamp"
    description: "Get current UTC timestamp in milliseconds"
    parameters: []
    implementation:
      operation: "datetime_now"
      method_config: "now_method"
      timezone_config: "timezone"
      post_processing: "timestamp_multiply"
      multiplier_config: "timestamp_multiplier"

# Utility function configuration
utility_config:
  # sanitize_id function configuration
  sanitize_pattern: "[^a-zA-Z0-9_.-]+"
  sanitize_replacement: "_"
  strip_method: "strip"
  
  # email_to_username function configuration
  email_separator: "@"
  split_limit: 1
  split_index: 0
  
  # mask_secret function configuration
  secret_pattern: "(pass|secret|key|token)"
  mask_replacement: "****"
  regex_flag: "IGNORECASE"
  
  # utc_now_ms function configuration
  now_method: "now"
  timezone: "UTC"
  timestamp_multiplier: 1000
