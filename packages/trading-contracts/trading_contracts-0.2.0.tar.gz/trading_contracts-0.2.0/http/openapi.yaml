openapi: 3.0.0
info:
  title: Trading Platform HTTP API
  version: '1.0.0'
paths:
  /candles:
    get:
      summary: Get recent candles
      responses:
        '200':
          description: List of candles
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    symbol:
                      type: string
                    timeframe:
                      type: string
                    open:
                      type: string
                    high:
                      type: string
                    low:
                      type: string
                    close:
                      type: string
                    volume:
                      type: string
                    ts:
                      type: string
                      format: date-time
  /symbols:
    get:
      summary: Get available symbols
      responses:
        '200':
          description: List of symbols
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
  /pf/positions:
    get:
      summary: Get portfolio positions
      responses:
        '200':
          description: Positions
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
  /pf/balances:
    get:
      summary: Get portfolio balances
      responses:
        '200':
          description: Balances
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
  /pf/pnl:
    get:
      summary: Get portfolio PnL
      responses:
        '200':
          description: PnL information
          content:
            application/json:
              schema:
                type: object
  /runs/start:
    post:
      summary: Start a strategy run
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                run_id:
                  type: string
                strategy_id:
                  type: string
      responses:
        '200':
          description: Run started
  /runs/stop:
    post:
      summary: Stop a strategy run
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                run_id:
                  type: string
      responses:
        '200':
          description: Run stopped
  /runs/reconcile:
    post:
      summary: Reconcile run state
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                run_id:
                  type: string
      responses:
        '200':
          description: Run reconciled
