# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨å¯¹ AIS é¡¹ç›®çš„å…³æ³¨å’Œè´¡çŒ®ï¼æœ¬æ–‡æ¡£å°†æŒ‡å¯¼æ‚¨å¦‚ä½•å‚ä¸é¡¹ç›®å¼€å‘ï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œé¡¹ç›®çš„æŒç»­å‘å±•ã€‚

## ğŸ¤ å‚ä¸æ–¹å¼

### è´¡çŒ®ç±»å‹
- **ğŸ› Bug ä¿®å¤**: ä¿®å¤å·²çŸ¥é—®é¢˜
- **âœ¨ æ–°åŠŸèƒ½**: æ·»åŠ æ–°çš„åŠŸèƒ½ç‰¹æ€§
- **ğŸ“ æ–‡æ¡£æ”¹è¿›**: æ”¹è¿›æˆ–ç¿»è¯‘æ–‡æ¡£
- **ğŸ§ª æµ‹è¯•å¢å¼º**: å¢åŠ æµ‹è¯•è¦†ç›–ç‡
- **ğŸ¨ UI/UX æ”¹è¿›**: æ”¹å–„ç”¨æˆ·ä½“éªŒ
- **ğŸ”§ æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–ä»£ç æ€§èƒ½

### è´¡çŒ®æµç¨‹
1. **Fork é¡¹ç›®** - åˆ›å»ºæ‚¨çš„é¡¹ç›®å‰¯æœ¬
2. **åˆ›å»ºåˆ†æ”¯** - åŸºäº `main` åˆ†æ”¯åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. **å¼€å‘å®ç°** - å®ç°æ‚¨çš„åŠŸèƒ½æˆ–ä¿®å¤
4. **æµ‹è¯•éªŒè¯** - ç¡®ä¿ä»£ç é€šè¿‡æ‰€æœ‰æµ‹è¯•
5. **æäº¤ PR** - æäº¤æ‹‰å–è¯·æ±‚ç­‰å¾…å®¡æŸ¥

## ğŸš€ å¼€å‘ç¯å¢ƒè®¾ç½®

### ç¯å¢ƒè¦æ±‚
- Python 3.9+
- Git
- æ”¯æŒçš„æ“ä½œç³»ç»Ÿï¼šLinuxã€macOS

### å¿«é€Ÿè®¾ç½®
```bash
# 1. Fork å¹¶å…‹éš†é¡¹ç›®
git clone https://github.com/YOUR_USERNAME/ais.git
cd ais

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv
source .venv/bin/activate

# 3. å®‰è£…å¼€å‘ä¾èµ–
source .venv/bin/activate && python3 -m pip install -e .

# 4. éªŒè¯å®‰è£…
python -m pytest tests/ -v
ais --version
```

### å¼€å‘å·¥å…·é…ç½®
```bash
# å®‰è£…ä»£ç è´¨é‡å·¥å…·
pip install black flake8 autopep8 mypy

# è¿è¡Œä»£ç è´¨é‡æ£€æŸ¥
source .venv/bin/activate && black src/ tests/ && autopep8 --in-place --aggressive --aggressive --max-line-length=100 src/ tests/ -r && flake8 src/ tests/ --max-line-length=100

# è¿è¡Œæµ‹è¯•
python -m pytest tests/ -v
```

## ğŸ“ ä»£ç è§„èŒƒ

### ä»£ç é£æ ¼
- **PEP 8**: éµå¾ª Python å®˜æ–¹ä»£ç é£æ ¼
- **è¡Œé•¿åº¦**: æœ€å¤§ 79 å­—ç¬¦
- **å‘½åè§„èŒƒ**: 
  - ç±»åï¼š`CamelCase`
  - å‡½æ•°åï¼š`snake_case`
  - å¸¸é‡ï¼š`UPPER_CASE`
  - ç§æœ‰æˆå‘˜ï¼š`_leading_underscore`

### ä»£ç æ ¼å¼åŒ–
```bash
# è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ï¼ˆå»ºè®®ä½¿ç”¨é¡¹ç›®é…ç½®çš„å‘½ä»¤ï¼‰
source .venv/bin/activate && black src/ tests/ && autopep8 --in-place --aggressive --aggressive --max-line-length=100 src/ tests/ -r && flake8 src/ tests/ --max-line-length=100

# å•ç‹¬è¿è¡Œå„ä¸ªå·¥å…·
black src/ tests/
autopep8 --in-place --aggressive --aggressive --max-line-length=100 src/ tests/ -r
flake8 src/ tests/ --max-line-length=100
```

### å¯¼å…¥è§„èŒƒ
```python
# æ ‡å‡†åº“å¯¼å…¥
import os
import sys
from pathlib import Path

# ç¬¬ä¸‰æ–¹åº“å¯¼å…¥
import click
from rich.console import Console

# æœ¬åœ°å¯¼å…¥ï¼ˆåŸºäºå®é™…é¡¹ç›®ç»“æ„ï¼‰
from ..core.config import get_config
from ..core.ai import ask_ai
from ..ui.panels import panels
```

## ğŸ§ª æµ‹è¯•è¦æ±‚

### æµ‹è¯•ç­–ç•¥
- **å•å…ƒæµ‹è¯•**: æµ‹è¯•å•ä¸ªå‡½æ•°å’Œç±»
- **é›†æˆæµ‹è¯•**: æµ‹è¯•ç»„ä»¶äº¤äº’
- **ç«¯åˆ°ç«¯æµ‹è¯•**: æµ‹è¯•å®Œæ•´ç”¨æˆ·åœºæ™¯
- **è¦†ç›–ç‡ç›®æ ‡**: 80%+

### æµ‹è¯•ç¼–å†™
```python
# æµ‹è¯•æ–‡ä»¶å‘½å: test_*.py
# æµ‹è¯•å‡½æ•°å‘½å: test_*

import pytest
from unittest.mock import Mock, patch
from ais.core.ai import ask_ai
from ais.core.config import get_config

class TestAIModule:
    def test_ask_ai_basic(self):
        """æµ‹è¯•åŸºæœ¬é—®ç­”åŠŸèƒ½"""
        config = get_config()
        result = ask_ai("test question", config)
        assert result is not None
        
    @patch('ais.core.ai.httpx')
    def test_ask_ai_with_mock(self, mock_httpx):
        """æµ‹è¯•å¸¦æ¨¡æ‹Ÿçš„é—®ç­”åŠŸèƒ½"""
        mock_response = Mock()
        mock_response.json.return_value = {
            "choices": [{"message": {"content": "test response"}}]
        }
        mock_httpx.post.return_value = mock_response
        
        config = get_config()
        result = ask_ai("test question", config)
        assert "test response" in result
```

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
python -m pytest tests/test_ai.py -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
python -m pytest tests/test_ai.py::TestAIModule::test_ask_ai_basic -v

# è¿è¡Œè¦†ç›–ç‡æµ‹è¯•
python -m pytest tests/ --cov=src/ais --cov-report=html
```

## ğŸ“‹ æäº¤è§„èŒƒ

### æäº¤ä¿¡æ¯æ ¼å¼
```
<type>(<scope>): <subject>

<body>

<footer>
```

### æäº¤ç±»å‹
- **feat**: æ–°åŠŸèƒ½
- **fix**: Bug ä¿®å¤
- **docs**: æ–‡æ¡£æ›´æ–°
- **style**: ä»£ç é£æ ¼ä¿®æ”¹
- **refactor**: ä»£ç é‡æ„
- **test**: æµ‹è¯•ç›¸å…³
- **chore**: æ„å»º/å·¥å…·ç›¸å…³

### æäº¤ç¤ºä¾‹
```bash
# å¥½çš„æäº¤ä¿¡æ¯
feat(ask): æ·»åŠ æµå¼è¾“å‡ºæ”¯æŒ

æ·»åŠ äº† AI é—®ç­”çš„æµå¼è¾“å‡ºåŠŸèƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼š
- å®æ—¶æ˜¾ç¤º AI å¤„ç†è¿›åº¦
- æ”¯æŒä¸‰ç§æ˜¾ç¤ºæ¨¡å¼
- å¯é€šè¿‡é…ç½®å¼€å¯/å…³é—­

Closes #123

# é¿å…çš„æäº¤ä¿¡æ¯
fix bug
update code
```

## ğŸ”„ æ‹‰å–è¯·æ±‚æµç¨‹

### PR å‡†å¤‡æ¸…å•
- [ ] ä»£ç é€šè¿‡æ‰€æœ‰æµ‹è¯•
- [ ] ä»£ç ç¬¦åˆé£æ ¼è§„èŒƒ
- [ ] æ·»åŠ äº†å¿…è¦çš„æµ‹è¯•
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] æäº¤ä¿¡æ¯ç¬¦åˆè§„èŒƒ

### PR æ¨¡æ¿
```markdown
## å˜æ›´ç±»å‹
- [ ] Bug ä¿®å¤
- [ ] æ–°åŠŸèƒ½
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] é‡æ„
- [ ] æ€§èƒ½ä¼˜åŒ–

## å˜æ›´æè¿°
ç®€è¦æè¿°æ­¤æ¬¡å˜æ›´çš„å†…å®¹å’Œç›®çš„ã€‚

## æµ‹è¯•
- [ ] æ·»åŠ äº†æ–°çš„æµ‹è¯•
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ‰‹åŠ¨æµ‹è¯•é€šè¿‡

## ç›¸å…³é—®é¢˜
Closes #123
```

### å®¡æŸ¥æµç¨‹
1. **è‡ªåŠ¨æ£€æŸ¥**: CI/CD è‡ªåŠ¨è¿è¡Œæµ‹è¯•
2. **ä»£ç å®¡æŸ¥**: ç»´æŠ¤è€…å®¡æŸ¥ä»£ç è´¨é‡
3. **åŠŸèƒ½éªŒè¯**: éªŒè¯åŠŸèƒ½æ˜¯å¦æ­£å¸¸
4. **æ–‡æ¡£æ£€æŸ¥**: ç¡®ä¿æ–‡æ¡£å®Œæ•´æ€§
5. **åˆå¹¶**: é€šè¿‡å®¡æŸ¥ååˆå¹¶åˆ°ä¸»åˆ†æ”¯

## ğŸ“– æ–‡æ¡£è´¡çŒ®

### æ–‡æ¡£ç±»å‹
- **ç”¨æˆ·æ–‡æ¡£**: ä½¿ç”¨æŒ‡å—å’Œæ•™ç¨‹
- **API æ–‡æ¡£**: ä»£ç æ¥å£æ–‡æ¡£
- **å¼€å‘æ–‡æ¡£**: å¼€å‘è€…æŒ‡å—

### æ–‡æ¡£è§„èŒƒ
- **è¯­è¨€**: ä¸­æ–‡ä¸ºä¸»ï¼Œè‹±æ–‡ä¸ºè¾…
- **æ ¼å¼**: Markdown æ ¼å¼
- **ç»“æ„**: æ¸…æ™°çš„å±‚æ¬¡ç»“æ„
- **ç¤ºä¾‹**: åŒ…å«å®é™…å¯è¿è¡Œçš„ç¤ºä¾‹

### æ–‡æ¡£æ„å»º
```bash
# è¿›å…¥æ–‡æ¡£ç›®å½•
cd docs

# å®‰è£…ä¾èµ–
npm install

# æœ¬åœ°é¢„è§ˆ
npm run dev

# æ„å»ºé™æ€æ–‡ä»¶
npm run build
```

## ğŸ› é—®é¢˜æŠ¥å‘Š

### é—®é¢˜ç±»å‹
- **Bug æŠ¥å‘Š**: è½¯ä»¶é”™è¯¯æˆ–å¼‚å¸¸
- **åŠŸèƒ½è¯·æ±‚**: æ–°åŠŸèƒ½å»ºè®®
- **æ€§èƒ½é—®é¢˜**: æ€§èƒ½ç›¸å…³é—®é¢˜
- **æ–‡æ¡£é—®é¢˜**: æ–‡æ¡£é”™è¯¯æˆ–ç¼ºå¤±

### é—®é¢˜æ¨¡æ¿
```markdown
## é—®é¢˜æè¿°
æ¸…æ™°æè¿°é‡åˆ°çš„é—®é¢˜ã€‚

## é‡ç°æ­¥éª¤
1. è¿è¡Œå‘½ä»¤ `ais ask "test"`
2. è§‚å¯Ÿè¾“å‡ºç»“æœ
3. å‘ç°é”™è¯¯ä¿¡æ¯

## é¢„æœŸè¡Œä¸º
æè¿°é¢„æœŸçš„æ­£å¸¸è¡Œä¸ºã€‚

## å®é™…è¡Œä¸º
æè¿°å®é™…å‘ç”Ÿçš„è¡Œä¸ºã€‚

## ç¯å¢ƒä¿¡æ¯
- OS: Ubuntu 22.04
- Python: 3.9.7
- AIS: 0.3.2

## æ—¥å¿—ä¿¡æ¯
ç²˜è´´ç›¸å…³çš„é”™è¯¯æ—¥å¿—ã€‚
```

## ğŸ¯ å¼€å‘æŒ‡å—

### æ–°åŠŸèƒ½å¼€å‘
```bash
# 1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/new-feature

# 2. å®ç°åŠŸèƒ½
# ç¼–å†™ä»£ç ...

# 3. æ·»åŠ æµ‹è¯•
# ç¼–å†™æµ‹è¯•...

# 4. è¿è¡Œæµ‹è¯•
pytest tests/

# 5. æäº¤å˜æ›´
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"

# 6. æ¨é€åˆ†æ”¯
git push origin feature/new-feature
```

### Bug ä¿®å¤
```bash
# 1. åˆ›å»ºä¿®å¤åˆ†æ”¯
git checkout -b fix/bug-description

# 2. é‡ç°é—®é¢˜
# ç¼–å†™æµ‹è¯•ç”¨ä¾‹é‡ç° bug

# 3. ä¿®å¤é—®é¢˜
# ä¿®æ”¹ä»£ç ...

# 4. éªŒè¯ä¿®å¤
pytest tests/

# 5. æäº¤ä¿®å¤
git commit -m "fix: ä¿®å¤ç‰¹å®šé—®é¢˜"
```

## ğŸ“Š ä»£ç è´¨é‡

### è´¨é‡æŒ‡æ ‡
- **æµ‹è¯•è¦†ç›–ç‡**: ç›®æ ‡ 80%+
- **ä»£ç å¤æ‚åº¦**: æ§åˆ¶åœ¨åˆç†èŒƒå›´
- **é™æ€æ£€æŸ¥**: é€šè¿‡ flake8 å’Œ mypy
- **å®‰å…¨æ£€æŸ¥**: é€šè¿‡ bandit æ‰«æ

### è´¨é‡æ£€æŸ¥å·¥å…·
```bash
# ä»£ç è¦†ç›–ç‡
pytest tests/ --cov=src/ais --cov-report=term-missing

# ä»£ç å¤æ‚åº¦
radon cc src/ --min C

# å®‰å…¨æ£€æŸ¥
bandit -r src/

# ä¾èµ–æ£€æŸ¥
safety check
```

## ğŸš€ å‘å¸ƒæµç¨‹

### ç‰ˆæœ¬å·è§„èŒƒ
éµå¾ª [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/) æœ€ä½³å®è·µï¼š
- **ä¸»ç‰ˆæœ¬**: é‡å¤§å˜æ›´ï¼Œä¸å…¼å®¹æ›´æ–°
- **æ¬¡ç‰ˆæœ¬**: æ–°åŠŸèƒ½ï¼Œå‘åå…¼å®¹
- **ä¿®è®¢ç‰ˆæœ¬**: Bug ä¿®å¤ï¼Œå‘åå…¼å®¹

### å‘å¸ƒæ­¥éª¤
1. æ›´æ–° `CHANGELOG.md`ï¼ˆå¿…é¡»ï¼‰
2. è¿è¡Œå®Œæ•´æµ‹è¯•å’Œä»£ç è´¨é‡æ£€æŸ¥
3. æäº¤è¯¦ç»†çš„ git commit
4. åˆ›å»ºå‘å¸ƒæ ‡ç­¾
5. æ¨é€åˆ°è¿œç¨‹ä»“åº“
6. è§¦å‘ Package Release å·¥ä½œæµ

### æ³¨æ„äº‹é¡¹
- æ¯æ¬¡æ”¹åŠ¨åå¿…é¡»æäº¤è¯¦ç»†çš„ git commit
- git commit ä¸­ä¸è¦åŒ…å« `ğŸ¤– Generated with Claude Code` ç­‰æ ‡è¯†
- å‘å¸ƒå‰åè¦åŒæ­¥è¿œç¨‹ä»“åº“ä»¥é¿å…å†²çª

## ğŸ‰ è´¡çŒ®è€…è®¤å¯

### è´¡çŒ®è€…åˆ—è¡¨
æ‰€æœ‰è´¡çŒ®è€…éƒ½ä¼šåœ¨ README.md ä¸­å¾—åˆ°è®¤å¯ã€‚

### è´¡çŒ®ç»Ÿè®¡
- **ä»£ç è´¡çŒ®**: æŒ‰æäº¤æ•°é‡å’Œä»£ç è¡Œæ•°
- **æ–‡æ¡£è´¡çŒ®**: æŒ‰æ–‡æ¡£é¡µæ•°å’Œè´¨é‡
- **é—®é¢˜è§£å†³**: æŒ‰è§£å†³é—®é¢˜æ•°é‡å’Œå¤æ‚åº¦

---

## è”ç³»æ–¹å¼

- **GitHub Issues**: æŠ¥å‘Šé—®é¢˜å’Œå»ºè®®
- **è®¨è®ºåŒº**: æŠ€æœ¯è®¨è®ºå’Œé—®ç­”
- **é‚®ä»¶**: é¡¹ç›®ç›¸å…³è¯¢é—®

---

::: tip æç¤º
æ–°è´¡çŒ®è€…å»ºè®®ä»æ ‡è®°ä¸º "good first issue" çš„é—®é¢˜å¼€å§‹ï¼Œé€æ­¥ç†Ÿæ‚‰é¡¹ç›®ç»“æ„ã€‚
:::

::: info ä»£ç å®¡æŸ¥
æ‰€æœ‰ä»£ç éƒ½éœ€è¦ç»è¿‡å®¡æŸ¥ï¼Œè¿™æ˜¯ç¡®ä¿ä»£ç è´¨é‡çš„é‡è¦æ­¥éª¤ã€‚
:::

::: warning æ³¨æ„
è¯·ç¡®ä¿æ‚¨çš„ä»£ç ç¬¦åˆé¡¹ç›®çš„è®¸å¯è¯è¦æ±‚ï¼Œä¸è¦åŒ…å«ç‰ˆæƒäº‰è®®çš„ä»£ç ã€‚
:::