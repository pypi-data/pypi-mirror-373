{"name":"function_intent_alignment","jsonschema":{"title":"function_intent_alignment","description":"Assess whether this function call—its name plus all parameter values—correctly implements the user's immediate request as the right next step in the conversation.\n\nKey considerations:\n- The conversation history includes every user request, assistant message, and prior tool call with its output.\n- The user's overall intent may require multiple parallel or chained API calls; here you judge only this one.\n- The tool inventory and API spec define available functions, descriptions, and parameter documentation.\n- Skipping this call should block meaningful progress toward the user's goal, even if further calls follow.\n- Watch for implicit instructions in earlier dialogue (e.g. \"only unread emails\" implies a filter flag).\n- It is valid for this call to run alongside other calls; that does not reduce its correctness.\n\nOn a scale from 1 (irrelevant) to 5 (perfect), rate how precisely this function call—its name and parameter values—matches the user's most recent request and constitutes the correct next step toward fulfilling that request, given the full conversation history, tool inventory, and API specification.","type":"object","properties":{"explanation":{"type":"string","description":"Explain why this call does or does not align with the user's request as the correct next step in the conversation: reference specific user text, tool descriptions, and API spec excerpts."},"evidence":{"type":"string","description":"Exact quotes from the conversation history and API specification that support your alignment rating."},"output":{"type":"integer","minimum":1,"maximum":5,"threshold_low":3,"threshold_high":5,"description":"Alignment rating (1=irrelevant, 5=perfect)."},"confidence":{"type":"number","minimum":0,"maximum":1,"threshold_low":0.7,"threshold_high":1,"description":"Confidence in this alignment rating (0.0-1.0)."},"correction":{"type":"object","description":"If the alignment is suboptimal, provide a corrected function call JSON snippet suggesting a better name or parameters; otherwise use {}.","additionalProperties":true}},"required":["explanation","evidence","output","confidence","correction"]},"examples":[{"user_kwargs":{"conversation_context":[{"role":"user","content":"I need to cancel my order #987."},{"role":"assistant","content":"Retrieving order details now."},{"role":"tool","name":"get_order_details","parameters":{"order_id":987},"output":{"order_id":987,"status":"pending"}},{"role":"assistant","content":"Got your order details."}],"tools_inventory":[{"name":"get_order_details","description":"Retrieve order details","parameters":{"order_id":"integer"}},{"name":"cancel_order","description":"Cancels an existing order by its ID","parameters":{"order_id":"integer"}}],"tool_call":{"name":"cancel_order","parameters":{"order_id":987}}},"output":{"explanation":"The user explicitly asked to \"cancel my order #987,\" and cancel_order(order_id) directly matches that action as the correct next step.","evidence":"User said \"cancel my order #987\"; API spec: \"cancel_order(order_id) — Cancels an existing order by its ID.\"","output":5,"confidence":0.92,"correction":{}}},{"user_kwargs":{"conversation_context":[{"role":"user","content":"I need to cancel my order #987."},{"role":"assistant","content":"Here are your orders."},{"role":"tool","name":"list_orders","parameters":{"user_id":42},"output":[{"order_id":123,"status":"shipped"},{"order_id":987,"status":"pending"}]},{"role":"assistant","content":"Listed orders."}],"tools_inventory":[{"name":"list_orders","description":"Lists all orders for a user","parameters":{"user_id":"integer"}},{"name":"cancel_order","description":"Cancels an existing order by its ID","parameters":{"order_id":"integer"}}],"tool_call":{"name":"list_orders","parameters":{"user_id":42}}},"output":{"explanation":"list_orders retrieves all orders but does not cancel any; it fails to enact the user's explicit cancellation request.","evidence":"User asked \"cancel my order #987\"; list_orders only \"Lists all orders for a user.\"","output":1,"confidence":0.98,"correction":{"name":"cancel_order","parameters":{"order_id":987}}}}]}
{"name":"parameter_completeness_consistency","jsonschema":{"title":"parameter_completeness_consistency","description":"Check that the call's parameter set includes all parameters implied by the conversation and that their values do not contradict each other or earlier outputs.\n\nKey considerations:\n- Include any optional parameters implied by user requests (e.g. “only flagged items” implies a filter flag).\n- Ensure value interdependencies hold (e.g., startDate <= endDate, matching unit systems across related fields).\n- Focus on semantic completeness and consistency—do not perform purely syntactic checks for required parameters.\n- Recognize partial values (e.g. a date without time) as less complete if context demands more precision.","type":"object","properties":{"explanation":{"type":"string","description":"Explain which context-implied parameters are present or missing and how parameter values relate semantically without contradictions."},"evidence":{"type":"string","description":"Cite conversation lines and tool outputs that imply parameters or relationships among values."},"output":{"type":"integer","minimum":1,"maximum":5,"threshold_low":3,"threshold_high":5,"description":"Completeness/consistency rating (1=incomplete or conflicting; 5=fully complete and consistent)."},"confidence":{"type":"number","minimum":0,"maximum":1,"threshold_low":0.7,"threshold_high":1,"description":"Confidence in this completeness/consistency rating (0.0-1.0)."},"correction":{"type":"object","description":"If call is incomplete or inconsistent, provide a JSON snippet adding missing optional parameters or correcting relationships; otherwise {}.","additionalProperties":true}},"required":["explanation","evidence","output","confidence","correction"]},"examples":[{"user_kwargs":{"conversation_context":[{"role":"user","content":"Fetch my profile with name and email only."}],"tools_inventory":[{"name":"get_user_profile","description":"Retrieves user profile","parameters":{"user_id":"integer","fields":"list[string]"}}],"tool_call":{"name":"get_user_profile","parameters":{"user_id":42,"fields":["name","email"]}}},"output":{"explanation":"Includes both context-implied fields 'name' and 'email'; no contradictions present.","evidence":"User said 'name and email only'; fields parameter matches exactly.","output":5,"confidence":0.93,"correction":{}}},{"user_kwargs":{"conversation_context":[{"role":"user","content":"Fetch my profile with name and email only."}],"tools_inventory":[{"name":"get_user_profile","description":"Retrieves user profile","parameters":{"user_id":"integer","fields":"list[string]"}}],"tool_call":{"name":"get_user_profile","parameters":{"user_id":42,"fields":["name"]}}},"output":{"explanation":"Missing the context-implied 'email' field; partial date not relevant here.","evidence":"User requested both 'name and email'; fields only contains 'name'.","output":2,"confidence":0.88,"correction":{"fields":["name","email"]}}}]}
{"name":"prerequisite_satisfaction","jsonschema":{"title":"prerequisite_satisfaction","description":"Verify that any upstream steps—authentication, data loading, prior API calls—required by this call have been completed successfully.\n\nKey considerations:\n- Confirm explicit messages such as “Auth token acquired,” “User info loaded,” or “File uploaded successfully.”\n- Respect semantic order implied by the spec (e.g. language detection → translation, image upload → resizing).\n- Detect prerequisite calls that failed or were missing required values.\n- These are examples; other prerequisites may exist depending on the API spec.","type":"object","properties":{"explanation":{"type":"string","description":"Describe which prerequisite steps were required, how you confirmed their completion, or why they are missing."},"evidence":{"type":"string","description":"Quote conversation lines showing successful prerequisites or the absence thereof."},"output":{"type":"integer","minimum":0,"maximum":1,"threshold_low":1,"threshold_high":1,"description":"1 if all prerequisites are met; 0 if any are missing or failed."},"confidence":{"type":"number","minimum":0,"maximum":1,"threshold_low":0.7,"threshold_high":1,"description":"Confidence in this prerequisite assessment (0.0-1.0)."},"correction":{"type":"object","description":"If prerequisites are missing or failed, provide JSON snippet(s) for the missing or failed prerequisite call(s).","additionalProperties":true}},"required":["explanation","evidence","output","confidence","correction"]},"examples":[{"user_kwargs":{"conversation_context":[{"role":"assistant","content":"Auth token acquired for user 42."}],"tools_inventory":[{"name":"get_order_history","description":"Retrieve past orders","parameters":{"user_id":"integer"}}],"tool_call":{"name":"get_order_history","parameters":{"user_id":42}}},"output":{"explanation":"Authentication succeeded as confirmed by 'Auth token acquired for user 42.'","evidence":"Assistant message: 'Auth token acquired for user 42.'","output":1,"confidence":0.95,"correction":{}}},{"user_kwargs":{"conversation_context":[{"role":"user","content":"Translate 'Hola' to English."}],"tools_inventory":[{"name":"translate_text","description":"Translate text to target language","parameters":{"text":"string","target":"string"}},{"name":"detect_language","description":"Detect the language of the input text","parameters":{"text":"string"}}],"tool_call":{"name":"translate_text","parameters":{"text":"Hola","target":"\"en\""}}},"output":{"explanation":"Language detection was not performed; source language unknown.","evidence":"No prior detect_language call in conversation.","output":0,"confidence":0.88,"correction":{"name":"detect_language","parameters":{"text":"Hola"}}}}]}
{"name":"overall_call_correctness","jsonschema":{"title":"overall_call_correctness","description":"Provide a holistic correctness score for this function call by integrating all General Metrics: intent alignment, value grounding, parameter completeness & consistency, prerequisite satisfaction, and sub-goal readiness.\n\nKey considerations (judge independently):\n- Intent Alignment: Does the call implement the user's request as the correct next step?\n- Value Grounding: Are all parameter values non-hallucinated and spec-aligned?\n- Parameter Completeness & Consistency: No implied parameters missing, no contradictions.\n- Prerequisite Satisfaction: Required upstream steps completed successfully.\n- Sub-goal Readiness: The call leaves the conversation poised for subsequent actions.\n","type":"object","properties":{"explanation":{"type":"string","description":"Summarize how each General Metric contributed to your overall score, citing the strongest supporting or conflicting evidence."},"evidence":{"type":"string","description":"Quote the most impactful conversation or spec excerpt that influenced your overall score."},"output":{"type":"number","minimum":0,"maximum":1,"threshold_low":0.7,"threshold_high":1,"description":"Overall correctness score (0.00=completely incorrect to 1.00=perfect)."},"confidence":{"type":"number","minimum":0,"maximum":1,"threshold_low":0.7,"threshold_high":1,"description":"Confidence in this overall correctness score (0.0-1.0)."},"correction":{"type":"object","description":"If call is incorrect, suggest a JSON snippet for a revised function call.","additionalProperties":true}},"required":["explanation","evidence","output","confidence","correction"]},"examples":[{"user_kwargs":{"conversation_context":[{"role":"user","content":"Cancel my order #987."},{"role":"assistant","content":"Retrieving order details."},{"role":"tool","name":"get_order_details","parameters":{"order_id":987},"output":{"order_id":987,"status":"pending"}},{"role":"assistant","content":"Order is pending; ready to cancel."}],"tools_inventory":[{"name":"get_order_details","description":"Retrieve order details","parameters":{"order_id":"integer"}},{"name":"cancel_order","description":"Cancels an existing order by its ID","parameters":{"order_id":"integer"}}],"tool_call":{"name":"cancel_order","parameters":{"order_id":987}}},"output":{"explanation":"Perfect next-step alignment, all values grounded, complete parameters, auth not needed, call sets up subsequent confirmation.","evidence":"User asked to cancel order #987; spec matches cancel_order(order_id).","output":0.97,"confidence":0.93,"correction":{}}},{"user_kwargs":{"conversation_context":[{"role":"user","content":"Get today's date."}],"tools_inventory":[{"name":"get_time","description":"Retrieve the current local time","parameters":{"timezone":"string"}},{"name":"get_date","description":"Retrieve the current date","parameters":{}}],"tool_call":{"name":"get_time","parameters":{"timezone":"UTC"}}},"output":{"explanation":"Intent misalignment (wrong endpoint), parameters grounded, complete, no prerequisites, but wrong sub-goal.","evidence":"User asked for date; tool get_time returns time only.","output":0.15,"confidence":0.9,"correction":{"name":"get_date","parameters":{}}}}]}