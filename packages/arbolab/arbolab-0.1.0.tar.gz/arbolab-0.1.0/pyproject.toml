[build-system]
requires = ["setuptools>=68", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "arbolab"
version = "0.1.0"
description = "Arbolab - unified Lab (DuckDB/logging/config) and plugin SPI."
readme = "README.md"
requires-python = ">=3.12"
license = { file = "LICENSE" }
authors = [{ name = "Kyell Jensen", email = "mail@kyelljensen.de" }]
dependencies = [
    "pydantic>=2.6",
    "pydantic-settings>=2.2",
  "SQLAlchemy>=2.0",
  "pyyaml>=6.0",
  "numpy>=1.26",
  "pandas>=2.2",
  "pyarrow>=16",
  "duckdb>=1.0",
  "duckdb-engine>=0.17",
  "matplotlib>=3.8",
]

[project.optional-dependencies]
dev = ["pytest>=8", "pytest-cov>=4.1", "ruff>=0.4", "black>=24.0", "mypy>=1.10", "flake8>=7.0"]
plot = ["seaborn>=0.13", "plotly>=5.20"]
ml = ["scipy>=1.13", "scikit-learn>=1.4"]
latex = ["jinja2>=3.1", "pylatexenc>=2.10"]
# GerÃ¤te-Extras ziehen die entsprechenden Wheels nach:
linescale = ["arbolab-linescale>=0.1", "pyserial>=3.5"]
treeqinetic = ["arbolab-treeqinetic>=0.1", "pyserial>=3.5"]
treecablecalc = ["arbolab-treecablecalc>=0.1", "pyserial>=3.5"]
treemotion = ["arbolab-treemotion>=0.1", "pyserial>=3.5"]
wind = ["arbolab-wind>=0.1", "requests", "beautifulsoup4", "pyserial>=3.5"]
all = [
  "seaborn>=0.13",
  "plotly>=5.20",
  "scipy>=1.13",
  "scikit-learn>=1.4",
  "jinja2>=3.1",
  "pylatexenc>=2.10",
  "arbolab-linescale>=0.1",
  "arbolab-treeqinetic>=0.1",
  "arbolab-treecablecalc>=0.1",
  "arbolab-treemotion>=0.1",
  "arbolab-wind>=0.1",
  "requests",
  "beautifulsoup4",
  "pyserial>=3.5",
]

[project.urls]
Homepage = "https://github.com/arbolab/arbolab"

[tool.setuptools]
package-dir = {"" = "src"}

[tool.setuptools.packages.find]
where = ["src"]
include = ["arbolab", "arbolab.*"]

[tool.black]
line-length = 100
target-version = ["py312"]

[tool.flake8]
max-line-length = 100

[tool.ruff]
line-length = 100
target-version = "py312"
src = ["src"]

[tool.ruff.lint.isort]
known-first-party = ["arbolab"]


[tool.ruff.lint]
select = ["E","F","I","B","UP","ANN","C4","SIM"]
 
[tool.ruff.lint.pydocstyle]
convention = "numpy"

[tool.mypy]
python_version = "3.12"
mypy_path = ["src"]
disallow_untyped_defs = true
no_implicit_optional = true
strict_optional = true
check_untyped_defs = true
warn_unused_ignores = true
warn_redundant_casts = true
ignore_missing_imports = true

[tool.pytest.ini_options]
addopts = "-q --cov=arbolab --cov-report=term-missing"
testpaths = ["tests"]
pythonpath = ["src", "arbolab_wind"]
filterwarnings = [
  "error::DeprecationWarning:arbolab.*",
  "ignore::UserWarning",
]
