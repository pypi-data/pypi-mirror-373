{const e=document;let t="...",n=250,r=3e4,a=" Form ERROR! ",l=3500;"undefined"!=typeof neutral_submit_loading&&(t=neutral_submit_loading),"undefined"!=typeof neutral_submit_delay&&(n=neutral_submit_delay),"undefined"!=typeof neutral_submit_timeout&&(r=neutral_submit_timeout),"undefined"!=typeof neutral_submit_error&&(a=neutral_submit_error),"undefined"!=typeof neutral_submit_error_delay&&(l=neutral_submit_error_delay);const u=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(u.unobserve(e.target),neutral_fetch(e.target,e.target.dataset.url,e.target.dataset.wrap))}))}));function neutral_obs(){e.querySelectorAll(".neutral-fetch-visible").forEach((e=>{e.classList.remove("neutral-fetch-visible"),u.observe(e)}))}function neutral_fetch(t,n,r){let l=t;r&&(l=e.getElementById(r)),fetch(n,{headers:{"requested-with-ajax":"fetch"}}).then((e=>e.text())).then((e=>{l.innerHTML=e,l.outerHTML=e,window.dispatchEvent(new CustomEvent("neutralFetchCompleted",{detail:{element:l,url:n}}))})).catch((e=>{l.innerHTML=a,window.dispatchEvent(new CustomEvent("neutralFetchError",{detail:{element:l,url:n}}))}))}function neutral_fetch_form(u,s,o){const i=u.querySelectorAll("[type=submit]");i.forEach((e=>{e.disabled=!0,e.dataset.restsubs=e.innerHTML,e.innerHTML=e.innerHTML+" "+t}));let c=u;o&&(c=e.getElementById(o));let d=new FormData(u),m=!1;for(let e=0;e<u.elements.length;e++)value=u.elements[e].value,""!==u.elements[e].name&&("file"!=u.elements[e].type?u.elements[e].name.indexOf("[]")>=0||("checkbox"!=u.elements[e].type&&"radio"!=u.elements[e].type||u.elements[e].checked)&&d.append(u.elements[e].name,value):m=!0);m||(d=new URLSearchParams(new FormData(u))),setTimeout((()=>{fetch(s,{signal:AbortSignal.timeout(r),method:"POST",headers:{"requested-with-ajax":"fetch"},body:d}).then((e=>e.text())).then((e=>{c.innerHTML=e,c.outerHTML=e,window.dispatchEvent(new CustomEvent("neutralFetchCompleted",{detail:{element:c,url:s}}))})).catch((e=>{window.dispatchEvent(new CustomEvent("neutralFetchError",{detail:{element:c,url:s}})),i.forEach((e=>{e.disabled=!0,e.innerHTML=a})),setTimeout((()=>{i.forEach((e=>{e.disabled=!1,e.innerHTML=e.dataset.restsubs}))}),l)}))}),n)}function neutral_fev(){e.querySelectorAll(".neutral-fetch-form").forEach((e=>{e.classList.remove("neutral-fetch-form"),e.addEventListener("submit",(function(t){t.preventDefault(),neutral_fetch_form(e,e.getAttribute("action"),e.dataset.wrap)}))})),e.querySelectorAll(".neutral-fetch-auto").forEach((e=>{e.classList.remove("neutral-fetch-auto"),neutral_fetch(e,e.dataset.url,e.dataset.wrap)})),e.querySelectorAll(".neutral-fetch-click").forEach((e=>{e.classList.remove("neutral-fetch-click"),e.addEventListener("click",(function(){neutral_fetch(e,e.dataset.url,e.dataset.wrap)}))})),neutral_obs()}e.addEventListener("DOMContentLoaded",(()=>{neutral_fev()})),window.addEventListener("neutralFetchCompleted",(()=>{neutral_fev()})),window.addEventListener("neutralFetchError",(()=>{neutral_fev()}))}
