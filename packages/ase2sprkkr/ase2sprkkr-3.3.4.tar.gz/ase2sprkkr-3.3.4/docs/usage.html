

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to use ASE2SPRKKR &mdash; ASE2SPRKKR  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="_static/mods.css?v=26f6988d" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="More about installing of the ASE2SPRKKR package" href="how-to-install.html" />
    <link rel="prev" title="ASE2SPRKKR software package" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            ASE2SPRKKR
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to use the package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#computing-a-bulk-material">Computing a bulk material</a></li>
<li class="toctree-l3"><a class="reference internal" href="#defining-the-material-properties">Defining the material properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reading-the-results">Reading the results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-the-task-type-and-input-parameters">Setting the task type and input parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#working-with-inputparameters-object">Working with InputParameters object</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-more-subsequent-tasks">Running more subsequent tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reading-the-input-file">Reading the input file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#working-with-potential-files">Working with potential files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-the-input-files">Generating the input files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#a-note-about-potentials-and-atoms-and-input-parameters">A note about potentials and atoms and input_parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mpi-calculations">MPI calculations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bundled-tools">Bundled tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#contributing-and-error-reporting">Contributing and error reporting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="how-to-install.html">More about the package installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="philosophy.html">Philosophy of the package (for developers)</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference external" href="_static/slides.pdf#http://">Hastily written ASE2SPRKKR slides</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://ase2sprkkr.github.io/ase2sprkkr/">ASE2SPRKKR homepage</a></li>
<li class="toctree-l1"><a class="reference external" href="https://wiki.fysik.dtu.dk/ase/">ASE - atomic simulation environment</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ebert.cup.uni-muenchen.de/index.php/en/software-en/13-sprkkr">SPR-KKR</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ase2sprkkr/ase2sprkkr">GitHub repository</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/ase2sprkkr">PyPI package</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.ebert.cup.uni-muenchen.de/index.php/en/repository/func-startdown/251/lang,en-gb/">SPR-KKR manual</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Class documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="auto/ase2sprkkr.html">ase2sprkkr</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ASE2SPRKKR</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">How to use ASE2SPRKKR</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-to-use-ase2sprkkr">
<h1>How to use ASE2SPRKKR<a class="headerlink" href="#how-to-use-ase2sprkkr" title="Link to this heading"></a></h1>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>To install the package using either pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">ase2sprkkr</span>
</pre></div>
</div>
<p>or conda package manager:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">ase2sprkkr</span> <span class="n">ase2sprkkr</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">If you want to use source codes from GitHub repository</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ase2sprkkr</span><span class="o">/</span><span class="n">ase2sprkkr</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>you can install the package using</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">install</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>You are encouraged to run the test after installation, using</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">test</span>
</pre></div>
</div>
<p>The package requires, that the SPR-KKR is installed (and thus
their executables are located somewhere in the path). If you
use a build of SPR-KKR with an executables suffix, please set
the environment variable <code class="docutils literal notranslate"><span class="pre">SPRKKR_EXECUTABLE_SUFFIX</span></code> accordingly,
e.g. if you use bash as your shell and the name of the “main”
SPR-KKR executable is <code class="docutils literal notranslate"><span class="pre">kkrscf8.6</span></code>,
place into your <code class="docutils literal notranslate"><span class="pre">.bash.rc</span></code> the following line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">SPRKKR_EXECUTABLE_SUFFIX</span><span class="o">=</span><span class="mf">8.6</span>
</pre></div>
</div>
<p>For more verbose documentation about the installation the package, please see
the topic <a class="reference internal" href="how-to-install.html#installation"><span class="std std-ref">More about the package installation</span></a></p>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<p>The package allows us to define the problem to be computed using Python
and ASE. The current version of the package is aimed primarily at
defining the problem. The capabilities of obtaining the results and
their postprocessing are still limited: it is assumed, that the user of
the package is experienced with SPR-KKR package and is capable to
analyze the resulting output of SPR-KKR. Bellow, you can see several
basic examples of how to use the package.</p>
<section id="computing-a-bulk-material">
<h3>Computing a bulk material<a class="headerlink" href="#computing-a-bulk-material" title="Link to this heading"></a></h3>
<p>The basic usage of the package is to use ASE to define the computed
structure and, using SPR-KKR calculator, run the calculation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ase.build</span> <span class="kn">import</span> <span class="n">bulk</span>
<span class="kn">from</span> <span class="nn">ase2sprkkr.sprkkr.calculator</span> <span class="kn">import</span> <span class="n">SPRKKR</span>

<span class="n">atoms</span> <span class="o">=</span> <span class="n">bulk</span><span class="p">(</span><span class="s1">&#39;Li&#39;</span><span class="p">)</span>
<span class="n">calculator</span> <span class="o">=</span> <span class="n">SPRKKR</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">atoms</span><span class="p">)</span>
<span class="n">calculator</span><span class="o">.</span><span class="n">calculate</span><span class="p">()</span>
</pre></div>
</div>
<p>Calculation requires to have SPR-KKR in the PATH. In some cases, SPR-KKR
is compiled with a version (and/or hostname) suffix. In this case,
please define environmental variable <code class="docutils literal notranslate"><span class="pre">SPRKKR_COMMAND_SUFFIX</span></code> if the
SPR-KKR executable for SCF task has the name <code class="docutils literal notranslate"><span class="pre">kkrscf8.6</span></code>, please run
(the example is for the bash shell):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">SPRKKR_EXECUTABLE_SUFFIX</span><span class="o">=</span><span class="mf">8.6</span>
</pre></div>
</div>
</section>
<section id="defining-the-material-properties">
<h3>Defining the material properties<a class="headerlink" href="#defining-the-material-properties" title="Link to this heading"></a></h3>
<p>Most of the properties of the material can be defined as is described in
the <a class="reference external" href="https://wiki.fysik.dtu.dk/ase/">ASE documentation.</a> However, ASE
do not support occupation of the sites. To define it, you most promote
the atoms object to the ASE2SPRKKR one. It is done automatically, if you
pass the atoms object into the SPRKKR calculator constructor, however,
you can do it manually, if needed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ase.build</span> <span class="kn">import</span> <span class="n">bulk</span>
<span class="kn">from</span> <span class="nn">ase2sprkkr.sprkkr.sprkkr_atoms</span> <span class="kn">import</span> <span class="n">SPRKKRAtoms</span>
<span class="n">atoms</span><span class="o">=</span><span class="n">bulk</span><span class="p">(</span><span class="s1">&#39;LiCl&#39;</span><span class="p">,</span> <span class="s1">&#39;rocksalt&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mf">5.64</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">atoms</span> <span class="o">=</span> <span class="n">SPRKKRAtoms</span><span class="o">.</span><span class="n">promote_ase_atoms</span><span class="p">(</span><span class="n">atoms</span><span class="p">)</span>
</pre></div>
</div>
<p>Promoted atoms have the sites attribute, which is an array of the sites
in the primitive cell. If two sites are indistinguishable, they share
the sites object — this is computed automatically according to the
symmetry of the structure (see the SPRKKRAtoms.compute_sites_symmetry
method). Sites object in the sites array holds all the SPRKKR specific
properties of the sites. You can change the occupation of a given site
by calling the <a class="reference internal" href="auto/ase2sprkkr.sprkkr.occupations.Occupation.html#ase2sprkkr.sprkkr.occupations.Occupation.set" title="ase2sprkkr.sprkkr.occupations.Occupation.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Site.occupation.set</span></code></a> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">atoms</span><span class="o">.</span><span class="n">sites</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">occupation</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">&#39;Cl&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span> <span class="p">:</span> <span class="mf">0.5</span> <span class="p">})</span>
</pre></div>
</div>
<p>Atomic type can be given both by a chemical symbol or atomic number. You
can also just add an atomic type to the site:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">atoms</span><span class="o">.</span><span class="n">sites</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">occupation</span><span class="p">[</span><span class="s1">&#39;Br&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.2</span>
</pre></div>
</div>
<p>– the occupations of the currently presented atomic types are lowered
accordingly — or just query the occupation of a given atomic type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">atoms</span><span class="o">.</span><span class="n">sites</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">occupation</span><span class="p">[</span><span class="s1">&#39;Br&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Some codes stores the occupation information in
<code class="docutils literal notranslate"><span class="pre">atoms.info['occupancy']</span></code>. To allow interoperability with these codes
the occupancy is readed from this array when
meth:<cite>SPRKKRAtoms.promote_ase_atoms&lt;ase2sprkkr.sprkkr.sprkkr_atoms.SPRKKRAtoms.promote_ase_atoms&gt;</cite> is called and the
<code class="docutils literal notranslate"><span class="pre">atoms.info['occupancy']</span></code> is updated each time the
<code class="docutils literal notranslate"><span class="pre">atoms.sites[x].occupation</span></code> is changed.</p>
</section>
<section id="reading-the-results">
<h3>Reading the results<a class="headerlink" href="#reading-the-results" title="Link to this heading"></a></h3>
<p>Some of the results of the computation are returned by the calculate
method (see e.g.
<a class="reference internal" href="auto/ase2sprkkr.outputs.readers.scf.ScfResult.html#ase2sprkkr.outputs.readers.scf.ScfResult" title="ase2sprkkr.outputs.readers.scf.ScfResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ase2sprkkr.outputs.readers.scf.ScfResult</span></code></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out</span> <span class="o">=</span> <span class="n">calculator</span><span class="o">.</span><span class="n">calculate</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Energy is </span><span class="si">{</span><span class="n">out</span><span class="o">.</span><span class="n">energy</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There were </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">iterations</span><span class="p">})</span><span class="w"> </span><span class="n">iterations</span><span class="s2">&quot;)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The convergence error is </span><span class="si">{</span><span class="n">out</span><span class="o">.</span><span class="n">iterations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;error&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The moments are </span><span class="si">{</span><span class="n">out</span><span class="o">.</span><span class="n">last_iteration</span><span class="p">[</span><span class="s1">&#39;moment&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For the SCF task, you can request the newly-created potential file,
either by filename, or by a Potential object, from which you can read
the other results in a text format (you are encouraged to contribute to
ase2sprkkr to define the format of not-yet-implemented sections of
potential).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Potential has been saved to: </span><span class="si">{</span><span class="n">out</span><span class="o">.</span><span class="n">potential_filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">potential</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">potential</span>
<span class="nb">print</span><span class="p">(</span><span class="n">potential</span><span class="o">.</span><span class="n">CHARGE</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="setting-the-task-type-and-input-parameters">
<h3>Setting the task type and input parameters<a class="headerlink" href="#setting-the-task-type-and-input-parameters" title="Link to this heading"></a></h3>
<p>SPRKKR allows users to compute different tasks and each task can receive
many input parameters. The default task (if none is specified) is SCF:
to do a self-consistent cycle to compute the wavefunctions. You can
either choose the task and its parameters either during creating the
calculator via <code class="docutils literal notranslate"><span class="pre">input_parameters</span></code> argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">calculator</span> <span class="o">=</span> <span class="n">SPRKKR</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">atoms</span><span class="p">,</span>
                    <span class="n">input_parameters</span><span class="o">=</span><span class="s1">&#39;PHAGEN&#39;</span><span class="p">,</span>
                    <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;NE&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
</pre></div>
</div>
<p>or one-time in the <code class="docutils literal notranslate"><span class="pre">calculate</span></code> methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">calculator</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">input_parameters</span><span class="o">=</span><span class="s1">&#39;PHAGEN&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;NE&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">input_parameters</span></code> argument accepts either a name of one of the
predefined task (SCF, PHAGEN, ARPES, DOS), which uses a predefined set
of parameters for the task, the filename (containing either dot or
slash) from where the parameters will be loaded or the
<a class="reference internal" href="auto/ase2sprkkr.input_parameters.input_parameters.InputParameters.html#ase2sprkkr.input_parameters.input_parameters.InputParameters" title="ase2sprkkr.input_parameters.input_parameters.InputParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">InputParameters</span></code></a> object (see the later example).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">calculator</span> <span class="o">=</span> <span class="n">SPRKKR</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">atoms</span><span class="p">,</span> <span class="n">input_parameters</span><span class="o">=</span><span class="s1">&#39;PHAGEN&#39;</span><span class="p">,</span>
                    <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;NE&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
<span class="n">calculator</span> <span class="o">=</span> <span class="n">SPRKKR</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">atoms</span><span class="p">,</span> <span class="n">input_parameters</span><span class="o">=</span><span class="s1">&#39;./input.inp&#39;</span><span class="p">,</span>
                    <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;NE&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
</pre></div>
</div>
<p>You can see and modify the input parameters of a calculator using its
<code class="xref py py-meth docutils literal notranslate"><span class="pre">set</span></code>
and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">set</span></code>
methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">calculator</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">NE</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">calculator</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NE&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>We can see, that both the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">set</span></code>
and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">set</span></code>
methods and the <code class="docutils literal notranslate"><span class="pre">options</span></code>
parameter do not require to specify the section names (see the SPR-KKR
manual). They get/set the first (known, according to the definition of
the input parameters) parameter with the given name. However, if it is
necessary to avoid a name conflict, you can either use <code class="docutils literal notranslate"><span class="pre">SECTION.VALUE</span></code>
notation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">calculator</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">&#39;ENERGY.NE&#39;</span><span class="p">:</span><span class="mi">6</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">calculator</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ENERGY.NE&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>…or use the <code class="xref py py-meth docutils literal notranslate"><span class="pre">input_parameters</span></code> property of the calculator. Through
this property (which contains <a class="reference internal" href="auto/ase2sprkkr.input_parameters.input_parameters.InputParameters.html#ase2sprkkr.input_parameters.input_parameters.InputParameters" title="ase2sprkkr.input_parameters.input_parameters.InputParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">InputParameters</span></code></a> object) the sections
and their parameters are directly acessible. During interactive work,
you can use tab-completion to see the sections and their parameters.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">calculator</span> <span class="o">=</span> <span class="n">SPRKKR</span><span class="p">(</span><span class="n">input_paramters</span> <span class="o">=</span> <span class="s1">&#39;SCF&#39;</span><span class="p">)</span>
<span class="n">calculator</span><span class="o">.</span><span class="n">input_parameters</span><span class="o">.</span><span class="n">ENERGY</span><span class="o">.</span><span class="n">NE</span> <span class="o">=</span> <span class="mi">5</span>
<span class="nb">print</span><span class="p">(</span><span class="n">calculator</span><span class="o">.</span><span class="n">input_parameters</span><span class="o">.</span><span class="n">ENERGY</span><span class="o">.</span><span class="n">NE</span><span class="p">())</span>
<span class="n">calculator</span><span class="o">.</span><span class="n">input_parameters</span><span class="o">.</span><span class="n">ENERGY</span><span class="o">.&lt;</span><span class="n">tab</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The sections and their parameters have their names in uppercase (at
least partialy, e.g. <code class="docutils literal notranslate"><span class="pre">ImE</span></code>).</p>
<section id="working-with-inputparameters-object">
<h4>Working with InputParameters object<a class="headerlink" href="#working-with-inputparameters-object" title="Link to this heading"></a></h4>
<p>You can also directly create the <a class="reference internal" href="auto/ase2sprkkr.input_parameters.input_parameters.InputParameters.html#ase2sprkkr.input_parameters.input_parameters.InputParameters" title="ase2sprkkr.input_parameters.input_parameters.InputParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">InputParameters</span></code></a> object and pass it
into the
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.input_parameters" title="ase2sprkkr.sprkkr.calculator.SPRKKR.input_parameters"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InputParameters</span></code></a>
property,
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.__init__" title="ase2sprkkr.sprkkr.calculator.SPRKKR.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculator</span> <span class="pre">constructor</span></code></a>
or to the
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.calculate" title="ase2sprkkr.sprkkr.calculator.SPRKKR.calculate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InputParameters</span></code></a>
method</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ase2sprkkr.input_parameters.input_parameters</span> <span class="kn">import</span> <span class="n">InputParameters</span>
<span class="n">input_parameters</span> <span class="o">=</span> <span class="n">InputParameters</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s1">&#39;SCF&#39;</span><span class="p">)</span>
<span class="n">input_parameters</span><span class="o">.</span><span class="n">ENERGY</span><span class="o">.</span><span class="n">NE</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">input_parameters</span><span class="o">.</span><span class="n">TAU</span><span class="o">.</span><span class="n">NKTAB</span> <span class="o">=</span> <span class="mi">13</span>
<span class="n">calculator</span> <span class="o">=</span> <span class="n">SPRKKR</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">atoms</span><span class="p">,</span> <span class="n">input_parameters</span><span class="o">=</span><span class="n">input_parameters</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also add your own custom (not-predefined) parameters and
sections, if there is a need.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">input_parameters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;MY_CUSTOM_SECTION&#39;</span><span class="p">)</span>
<span class="n">input_parameters</span><span class="o">.</span><span class="n">MY_CUSTOM_SECTION</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;MY_CUSTOM_VALUE&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
</pre></div>
</div>
<p>If you work with input parameters readed from an already created input
file, you can use the
<a class="reference internal" href="auto/ase2sprkkr.input_parameters.input_parameters.InputParameters.html#ase2sprkkr.input_parameters.input_parameters.InputParameters.calculate" title="ase2sprkkr.input_parameters.input_parameters.InputParameters.calculate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate</span></code></a>
method to avoid the necessity to
create the calculator (manually):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">input_parameters</span> <span class="o">=</span> <span class="n">InputParameters</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s1">&#39;input.inp&#39;</span><span class="p">)</span>
<span class="n">input_parameters</span><span class="o">.</span><span class="n">calculate</span><span class="p">()</span>
</pre></div>
</div>
<p>The input parameters can be set or reset (to the task-predefined values,
to the values provided in a <code class="xref py py-class docutils literal notranslate"><span class="pre">InputParameters</span></code> object or to the values contained
in an input file) via the calculator <a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.input_parameters" title="ase2sprkkr.sprkkr.calculator.SPRKKR.input_parameters"><code class="xref py py-meth docutils literal notranslate"><span class="pre">input_parameters</span></code></a> property.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">calculator</span><span class="o">.</span><span class="n">input_parameters</span> <span class="o">=</span> <span class="s1">&#39;SCF&#39;</span>
<span class="n">calculator</span><span class="o">.</span><span class="n">input_parameters</span> <span class="o">=</span> <span class="n">input_parameters</span>
<span class="n">calculator</span><span class="o">.</span><span class="n">input_parameters</span> <span class="o">=</span> <span class="s1">&#39;./input_file.inp&#39;</span>
</pre></div>
</div>
</section>
<section id="running-more-subsequent-tasks">
<h4>Running more subsequent tasks<a class="headerlink" href="#running-more-subsequent-tasks" title="Link to this heading"></a></h4>
<p>A common usecase is to run more subseuent task with the same atomic
structure. To do so, you can either modify the
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.input_parameters" title="ase2sprkkr.sprkkr.calculator.SPRKKR.input_parameters"><code class="xref py py-meth docutils literal notranslate"><span class="pre">input_parameters</span></code></a>
and
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.potential_file" title="ase2sprkkr.sprkkr.calculator.SPRKKR.potential_file"><code class="xref py py-class docutils literal notranslate"><span class="pre">potential_file</span></code></a>
properties of a calculator (the
<a class="reference internal" href="auto/ase2sprkkr.outputs.readers.scf.ScfResult.html#ase2sprkkr.outputs.readers.scf.ScfResult.potential_filename" title="ase2sprkkr.outputs.readers.scf.ScfResult.potential_filename"><code class="xref py py-meth docutils literal notranslate"><span class="pre">out.potential_filename</span></code></a>
property contains the name of the `converged potential’)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">calculator</span> <span class="o">=</span> <span class="n">SPRKKR</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">atoms</span><span class="p">,</span> <span class="n">input_parameters</span><span class="o">=</span><span class="s1">&#39;SCF&#39;</span><span class="p">)</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">calculator</span><span class="o">.</span><span class="n">calculate</span><span class="p">()</span>
<span class="n">calculator</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">input_parameters</span><span class="o">=</span><span class="s1">&#39;PHAGEN&#39;</span><span class="p">,</span> <span class="n">potential</span><span class="o">=</span><span class="n">out</span><span class="o">.</span><span class="n">potential_filename</span><span class="p">)</span>
</pre></div>
</div>
<p>…or you can use calculator associated with the converged potential,
which is available in the <a class="reference internal" href="auto/ase2sprkkr.outputs.readers.scf.ScfResult.html#ase2sprkkr.outputs.readers.scf.ScfResult.calculator" title="ase2sprkkr.outputs.readers.scf.ScfResult.calculator"><code class="xref py py-meth docutils literal notranslate"><span class="pre">output.calculator</span></code></a> property of a SCF task
result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out</span> <span class="o">=</span> <span class="n">calculator</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">input_parameters</span><span class="o">=</span><span class="s1">&#39;SCF&#39;</span><span class="p">)</span>
<span class="n">out</span><span class="o">.</span><span class="n">calculator</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">input_parameters</span><span class="o">=</span><span class="s1">&#39;PHAGEN&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="reading-the-input-file">
<h4>Reading the input file<a class="headerlink" href="#reading-the-input-file" title="Link to this heading"></a></h4>
<p>If you want to repeat a calculation, you can read (and modify) the input
parameters from an existing input file. In this case, it may be useful
to use the method
<a class="reference internal" href="auto/ase2sprkkr.input_parameters.input_parameters.InputParameters.html#ase2sprkkr.input_parameters.input_parameters.InputParameters.calculate" title="ase2sprkkr.input_parameters.input_parameters.InputParameters.calculate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate</span></code></a>
of InputParameters object to avoid the
necessity to create the calculator.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">input_parameters</span> <span class="o">=</span> <span class="n">InputParameters</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s1">&#39;an_input_file.inp&#39;</span><span class="p">)</span>
<span class="n">input_parameters</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">potential</span><span class="o">=</span><span class="s1">&#39;a_potential_file.pot&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or you can of course just set the calculator
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.input_parameters" title="ase2sprkkr.sprkkr.calculator.SPRKKR.input_parameters"><code class="xref py py-meth docutils literal notranslate"><span class="pre">input_parameters</span></code></a>
property to the filename, or pass the filename as <code class="docutils literal notranslate"><span class="pre">input_parameters</span></code>
argument to its
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.__init__" title="ase2sprkkr.sprkkr.calculator.SPRKKR.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">constructor</span></code></a>
or
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.calculate" title="ase2sprkkr.sprkkr.calculator.SPRKKR.calculate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate</span></code></a>
method.</p>
</section>
</section>
<section id="working-with-potential-files">
<h3>Working with potential files<a class="headerlink" href="#working-with-potential-files" title="Link to this heading"></a></h3>
<p>The most of the properties that determine the computed problem in
SPR-KKR are given in potential file. The potential file is created from
the atoms automatically by the calculator. However, it is possible to
pass your own manually (or earlier) created potential file to the
calculation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">calculator</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">potential</span> <span class="o">=</span> <span class="s1">&#39;my_potential_file&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or to create the <a class="reference internal" href="auto/ase2sprkkr.potentials.potentials.Potential.html#ase2sprkkr.potentials.potentials.Potential" title="ase2sprkkr.potentials.potentials.Potential"><code class="xref py py-class docutils literal notranslate"><span class="pre">Potential</span></code></a> object manually from ASE atoms object and to
alter/check its properties before the computation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ase2sprkkr.potential.potentials</span> <span class="kn">import</span> <span class="n">Potential</span>
<span class="n">potential</span> <span class="o">=</span> <span class="n">Potential</span><span class="o">.</span><span class="n">from_atoms</span><span class="p">(</span><span class="n">atoms</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">potential</span><span class="o">.</span><span class="n">GLOBAL_SYSTEM_PARAMETER</span><span class="o">.</span><span class="n">IREL</span><span class="p">())</span>
<span class="n">calculator</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">potential</span> <span class="o">=</span> <span class="n">potential</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="generating-the-input-files">
<h3>Generating the input files<a class="headerlink" href="#generating-the-input-files" title="Link to this heading"></a></h3>
<p>If you just want to generate the input files (the input and potential ones)
and not to run the calculation, you can use method
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.save_input" title="ase2sprkkr.sprkkr.calculator.SPRKKR.save_input"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save_input</span></code></a>.
It acceps, same as the method
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.calculate" title="ase2sprkkr.sprkkr.calculator.SPRKKR.calculate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate</span></code></a>
the arguments to specify the filenames of the task and potential (and,
for the
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.calculate" title="ase2sprkkr.sprkkr.calculator.SPRKKR.calculate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate</span></code></a>
method, output) file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">calculator</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">input_file</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span> <span class="n">potential_file</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span> <span class="n">output_file</span> <span class="o">=</span> <span class="o">....</span><span class="p">)</span>
</pre></div>
</div>
<p>If you pass <code class="docutils literal notranslate"><span class="pre">None</span></code> to any of the arguments above, the temp file will
be used. String argument will be interpreted as filename where to store
the input and output files. However, these strings are interpereted as
templates, where the following placeholders can be used:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>%d</p></td>
<td><p>Current date and time</p></td>
</tr>
<tr class="row-even"><td><p>%t</p></td>
<td><p>InputParameters name (SCF, PHAGEN, …)</p></td>
</tr>
<tr class="row-odd"><td><p>%a</p></td>
<td><p>Chemical structure (e.g. CF4)</p></td>
</tr>
<tr class="row-even"><td><p>%c</p></td>
<td><p>Counter, starting from one, advanced each function call (that
uses the counter)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="a-note-about-potentials-and-atoms-and-input-parameters">
<h3>A note about potentials and atoms and input_parameters<a class="headerlink" href="#a-note-about-potentials-and-atoms-and-input-parameters" title="Link to this heading"></a></h3>
<p>Using the calculator, one can (in various methods) specify either atoms
object or/and potential, which can lead to the duplicity of the
information provided to the calculator. Therefore, there is the
following logic behind the scenes:</p>
<p>If the potential is not provided, it is created according to the atoms
object (which in this case has to be supplied). If the potential is
given by a filename, it is used “as is”, while if it is given by an
object (of a
<a class="reference internal" href="auto/ase2sprkkr.potentials.potentials.Potential.html#ase2sprkkr.potentials.potentials.Potential" title="ase2sprkkr.potentials.potentials.Potential"><code class="xref py py-class docutils literal notranslate"><span class="pre">Potential</span></code></a>
class), this object is updated according to
the atoms object (if the latter is supplied). The special value False
for the potential means to use the potential file specified by the task:
in this case, the InputParameters object or task file (with specified
potential) has to be supplied (as the argument).</p>
<p>The input parameters can be given either by a filename (containing the
“input file”), by object (of class
<a class="reference internal" href="auto/ase2sprkkr.input_parameters.input_parameters.InputParameters.html#ase2sprkkr.input_parameters.input_parameters.InputParameters" title="ase2sprkkr.input_parameters.input_parameters.InputParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">InputParameters</span></code></a>
), or by string
(which creates the
<a class="reference internal" href="auto/ase2sprkkr.input_parameters.input_parameters.InputParameters.html#ase2sprkkr.input_parameters.input_parameters.InputParameters" title="ase2sprkkr.input_parameters.input_parameters.InputParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">InputParameters</span></code></a>
object containing the predefined
values). If the parameters are given by object, the input file is
created. If it is given by filename, the file is readed and modified
only if it is required: that is either if the potential argument of
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.save_input" title="ase2sprkkr.sprkkr.calculator.SPRKKR.save_input"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save_input</span></code></a>,
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.run" title="ase2sprkkr.sprkkr.calculator.SPRKKR.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run</span></code></a> or,
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.calculate" title="ase2sprkkr.sprkkr.calculator.SPRKKR.calculate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate</span></code></a>,
methods is not False - which indicates that the content of the file should
be replaced by the new potential - or if the non-empty options argument is specified -
which leads to the modification of the potential in the file according to the options.</p>
<p>Note, that:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>If the potential is set to an SPRKKR calculator (either by the</dt><dd><p><a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.potential" title="ase2sprkkr.sprkkr.calculator.SPRKKR.potential"><code class="xref py py-meth docutils literal notranslate"><span class="pre">potential</span></code></a>,
property setter or in the
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.__init__" title="ase2sprkkr.sprkkr.calculator.SPRKKR.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">constructor</span></code></a>,
), the atoms
object is created from the potential (and stored in the
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.atoms" title="ase2sprkkr.sprkkr.calculator.SPRKKR.atoms"><code class="xref py py-meth docutils literal notranslate"><span class="pre">atoms</span></code></a>,
property). However, this object does not reflect
the changes made to the potential thereafter.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>After the computation of the SCF task, the result provide a new</dt><dd><p>potential (in the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">result.potential</span></code>
property), the old one is not updated, nor the calculator potential property.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</section>
<section id="mpi-calculations">
<h3>MPI calculations<a class="headerlink" href="#mpi-calculations" title="Link to this heading"></a></h3>
<p>You can use MPI in your calculations using the
<code class="docutils literal notranslate"><span class="pre">mpi</span></code> parameter (of
both the
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.__init__" title="ase2sprkkr.sprkkr.calculator.SPRKKR.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculator</span> <span class="pre">constructor</span></code></a>,
and
<a class="reference internal" href="auto/ase2sprkkr.sprkkr.calculator.SPRKKR.html#ase2sprkkr.sprkkr.calculator.SPRKKR.calculate" title="ase2sprkkr.sprkkr.calculator.SPRKKR.calculate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate</span></code></a>,
method). On clusters,
where the number of processes is determined by the batch system, you can
just pass True to the argument, otherwise supply an integer that denotes
the number of wanted processes. The mpi runner is detected
automatically. If the detection failed, the message is printed and
non-MPI calculation is runned. In this case, or if you want to use a
different MPI implementation, you have to pass the correct mpi runner
and its arguments to the calculator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">calculator</span> <span class="o">=</span> <span class="n">SPRKKR</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">atoms</span><span class="p">,</span> <span class="n">mpi</span> <span class="o">=</span> <span class="s1">&#39;path/to/my/mpirunner&#39;</span><span class="p">)</span>
<span class="n">calculator</span> <span class="o">=</span> <span class="n">SPRKKR</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">atoms</span><span class="p">,</span> <span class="n">mpi</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;path/to/my/mpirunner&#39;</span><span class="p">,</span><span class="s1">&#39;-np&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>In the case you use common mpi runners (<code class="docutils literal notranslate"><span class="pre">mpirun</span></code>, <code class="docutils literal notranslate"><span class="pre">mpirun.openmpi</span></code>
or <code class="docutils literal notranslate"><span class="pre">mpirun.mpich</span></code>), you can either pass just <code class="docutils literal notranslate"><span class="pre">True</span></code> to the <code class="docutils literal notranslate"><span class="pre">mpi</span></code>
parameter - if the runner can detect the number of processes, e.g. in a
cluster environment - or integer that denotes the number of requested
processes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">calculator</span> <span class="o">=</span> <span class="n">SPRKKR</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">atoms</span><span class="p">,</span> <span class="n">mpi</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">calculator</span> <span class="o">=</span> <span class="n">SPRKKR</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">atoms</span><span class="p">,</span> <span class="n">mpi</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="bundled-tools">
<h3>Bundled tools<a class="headerlink" href="#bundled-tools" title="Link to this heading"></a></h3>
<p>In
<a class="reference internal" href="auto/ase2sprkkr.tools.html#module-ase2sprkkr.tools" title="ase2sprkkr.tools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tools</span></code></a>
subdirectory of the package, there is a tool
visualise_in_struct for visualisation of the surfaces computed by the
SPR-KKR package. To view a surface, you can run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a2s_visualise_in_struct</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">i</span> <span class="n">in_structure</span><span class="o">.</span><span class="n">inp</span> <span class="o">-</span><span class="n">p</span> <span class="n">potential</span><span class="o">.</span><span class="n">pot</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">potential.pot</span></code> is a potential file and <code class="docutils literal notranslate"><span class="pre">in_structure.inp</span></code> is
a file containing the structure of the surface. Run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a2s_visualise_in_struct</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">for the further options of this tool.</div>
<div class="line">Note: if you have not installed the package using pip or conda, you
must run the script using its actual location, e.g.</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">tools</span><span class="o">/</span><span class="n">a2s_visualise_in_struct</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
</section>
</section>
<section id="contributing-and-error-reporting">
<h2>Contributing and error reporting<a class="headerlink" href="#contributing-and-error-reporting" title="Link to this heading"></a></h2>
<p>Please feel free to make a pullrequest or post an issue at our <a class="reference external" href="https://github.com/ase2sprkkr/ase2sprkkr">GitHub
repository</a>. Any form of
contributing, error reporting and/or feature request posting will be
highly appreciated.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="ASE2SPRKKR software package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="how-to-install.html" class="btn btn-neutral float-right" title="More about installing of the ASE2SPRKKR package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Matyáš Novák &amp; Jano Minár.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>