[build-system]
requires = ["setuptools>=64", "setuptools-scm>=8"]
build-backend = "setuptools.build_meta"


[tool.setuptools_scm]
local_scheme="no-local-version"
version_file = "crystpqdb/_version.py"
version_scheme="python-simplified-semver"


[project]
name = "crystpqdb"
authors = [
    {name = "Logan Lang", email = "lllang@mix.wvu.edu"},
]

description = "A Python library for Crystal Parquet Database."
readme = {file = "README.md", content-type = "text/markdown"}  # Ensure this matches the file used
license = "MIT"
license-files = ["LICENSE"]
keywords = []
classifiers = [
    "Programming Language :: Python :: 3",
]

dynamic = ["version"]

requires-python = ">=3.8"

[project.urls]
homepage = "https://github.com/llangWV/Crystal-Parquet-Database"
documentation = "https://llangWV.github.io/Crystal-Parquet-Database/"
Issues = "https://github.com/llangWV/Crystal-Parquet-Database/issues"
Changelog = "https://github.com/llangWV/Crystal-Parquet-Database/CHANGELOG.md"

[project.scripts]
crystpqdb-download = "scripts.download:main"


[tool.setuptools.packages.find]
where = ["."]
include = ["crystpqdb*", "scripts*"]
exclude = ["crystpqdb.tests*"]


[tool.pixi.workspace]
channels = ["conda-forge"]
platforms = ["linux-64", "osx-arm64", "osx-64", "win-64"]


[tool.pixi.dependencies]
compilers = "*"
cmake = "*"
pandera-pandas = ">=0.26.1,<0.27"
pandera-polars = ">=0.26.1,<0.27"

[tool.pixi.system-requirements]
cuda = "12.0"


[tool.pixi.pypi-dependencies]
crystpqdb = {path = ".", editable = true}
platformdirs = "*"
python-dotenv = "*"
matplotlib = "*"
numpy = "*"
pandas = "*"
parquetdb = "*"
ipykernel = "*"
prefect = "*"
mp_api = "*"
jarvis-tools = "*"
huggingface_hub = { version = "*", extras = ["cli", "hf-transfer"] }


[tool.pixi.feature.test]
pypi-dependencies = {pytest = "*", pytest-cov = "*"}

[tool.pixi.feature.build]
pypi-dependencies = {build = "*", setuptools-scm = "*"}

[tool.pixi.feature.github_actions]
pypi-dependencies = {PyGithub = "*", openai = "*"}


[tool.pixi.environments]
test = { features = ["test"], solve-group = "default" }
build = { features = ["build"], solve-group = "default" }
dev = { features = ["test", "build", "github_actions"], solve-group = "default" }

