
id: deep_research
version: 0.1.0
inputs:
  primary_goal: "<PRIMARY GOAL>"
  exclusions: ["assets/images", "dist", "build", "node_modules"]
assumptions:
  - Excluded paths exist and are valid.
  - Prefer reversible changes and seam creation.
output:
  - architecture_review
  - refactor_map
  - test_upgrade_plan
  - risks_and_rollback
  - three_phase_roadmap
prompt: |
  You are a staff-level engineer embedded in this codebase.
  Objective: Improve modularity, maintainability, and achieve {{ primary_goal }}.
  Deliverables:
    - Architecture review (current vs target) with trade-offs
    - Refactoring map by module, DI boundaries, interfaces
    - Test posture upgrade plan (unit/integration/contract)
    - Risks, hotspots, rollback strategies
    - 3-phase roadmap with measurable outcomes
  Constraints:
    - Respect exclusions: {{ exclusions | join(, ) }}
    - Assume excluded assets exist
    - Prefer small, reversible changes; maximize seams
