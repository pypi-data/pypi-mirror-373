<!DOCTYPE html>
<html>

<head>
    <title>Portfolio</title>
</head>

<body>
    <h1>Portfolio Management</h1>
    <a href="/">‚Üê Back</a>

    <h2>Portfolio Info</h2>
    <p><strong>Path:</strong> {{ portfolio.path }}</p>
    <p><strong>Total Submissions:</strong> {{ portfolio.submissions|length if portfolio.submissions_loaded else
        'Loading...' }}</p>
    <p><strong>Status:</strong> {{ 'Loaded' if portfolio.submissions_loaded else 'Loading...' }}</p>

    <h2>Actions</h2>
    <form method="POST" style="display: inline;">
        <button name="action" value="compress" disabled>Compress</button>
        <button name="action" value="decompress" disabled>Decompress</button>
        <button name="action" value="delete" onclick="return confirm('Delete portfolio?')" disabled>Delete</button>
    </form>

    {% if portfolio.submissions_loaded %}
    <h2>Submissions</h2>
    <details open>
        <table border="1">
            <tr>
                <th>Accession</th>
                <th>Submission Type</th>
                <th>Filing Date</th>
                <th>Documents</th>
            </tr>
            {% for sub in portfolio.submissions %}
            <tr>

                <td><a href="{{ url_for('submission_view', accession=sub.accession) }}">{{ sub.accession }}</a></td>
                <td>{{ sub.metadata.content['documents'][0].type if sub.metadata.content['documents'] else 'N/A' }}</td>
                <td>{{ sub.filing_date or 'N/A' }}</td>
                <td>{{ sub.metadata.content['documents']|length }}</td>
            </tr>
            {% endfor %}
        </table>
    </details>


    {% endif %}
</body>

</html>